import Feedback from "@site/src/components/Feedback";
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Button from '@site/src/components/button'

# Обзор Blueprint

> **Резюме:** На предыдущих этапах мы установили и настроили все инструменты, необходимые для разработки смарт-контрактов в TON, и создали наш первый шаблон проекта.

:::info
Мы рекомендуем установить расширение [Tact для VS Code](https://marketplace.visualstudio.com/items?itemName=tonstudio.vscode-tact). Оно содержит подсветку синтаксиса, подсказки об ошибках, а также делает опыт разработки более гладким.
:::

Прежде чем приступить к разработке смарт-контракта, давайте кратко опишем структуру проекта и объясним, как использовать **`Blueprint`**.

## Структура проекта

:::warning
Если вы не выбрали предложенные названия на предыдущих шагах, то названия исходных файлов и некоторые сущности в коде могут отличаться.
:::

<Tabs groupId="language">
  <TabItem value="Tact" label="Tact">
    ```ls title="Структура проекта"
    Example/
    ├── contracts/           # Папка с кодом смарт-контрактов
    │   ├── hello_world.tact   # Файл основного контракта
    ├── scripts/             # Скрипты для развёртывания и взаимодействия в блокчейне 
    │   ├── deployHelloWorld.ts      # Скрипт для развёртывания контракта
    │   └── incrementHelloWorld.ts  # Скрипт для взаимодействия с контрактом
    ├── tests/               # Папка с тестами для локального тестирования контрактов
    ├── HelloWorld.spec.ts      # Тестовые спецификации для контракта
    └── wrappers/            # Обёртки TypeScript для взаимодействия с контрактами
    ├── HelloWorld.ts            # Класс-обёртка для смарт-контракта
    └── HelloWorld.compile.ts    # Скрипт для компиляции контракта
    ```
  </TabItem>

</Tabs>

### `/contracts`

Эта папка содержит исходный код вашего контракта, написанный на одном из доступных в TON языков программирования для смарт-контрактов.

### `/scripts`

Папка `scripts` содержит файлы на языке `TypeScript`, которые помогут вам разворачивать ваши смарт-контрактами в блокчейне и взаимодействовать с ними, используя ранее реализованные обёртки.

### `/tests`

Этот каталог содержит тестовые файлы для ваших смарт-контрактов. Тестирование контрактов непосредственно в сети TON не является наилучшим вариантом, так как развёртывание требует некоторого количества времени и может приводить к потере средств. Эта тестовая площадка позволяет выполнять несколько смарт-контрактов и даже отправлять сообщения между ними в **"локальной сети"**. Тесты имеют критическое значение, чтобы до развёртывания смарт-контрактов в сеть убедиться, что они действуют ожидаемым образом.

### `/wrappers`

Чтобы взаимодействовать с вашим смарт-контрактом извне блокчейна, вам нужно сериализовать и десериализовать отправленные ему сообщения. `Обёртки` — это классы, разработанные, чтобы «зеркалировать» реализацию вашего смарт-контракта, делая его функциональность простой в использовании.

## Поток разработки

Почти любая разработка смарт-контрактов состоит из пяти простых шагов:

1. Отредактируйте код смарт-контракта в папке `/contracts` и соберите его, запустив скрипт сборки:

```bash
npx blueprint build
```

2. Обновите обёртку контракта в папке `/wrappers`, чтобы соответствовать изменениям в контракте.

3. Обновите тесты в папке `/tests`, чтобы проверить корректность новой функциональности, и запустите тестовый скрипт:

```bash
npx blueprint test
```

4. Повторите шаги 1-3, пока не достигнете желаемого результата.

5. Обновите сценарий развёртывания в папке `/scripts` и запустите его с помощью этой команды:

```bash
npx blueprint run
```

:::tip
Все примеры в этом гайде отражают последовательность **шагов 1-3** и приводят соответствующий код. А **шаг 5**, процесс развёртывания, освещён в последней части гайда: [Развёртывание в сеть](/ru/v3/guidelines/quick-start/developing-smart-contracts/tact-folder/tact-deploying-to-network/).
:::

Кроме того, вы всегда можете сгенерировать такую же структуру для другого смарт-контракта (если, например, вы хотите создать несколько контрактов, взаимодействующих друг с другом), используя следующую команду:

```bash
npx blueprint create PascalCase # Don't forget to name the contract in PascalCase
```

## Использование blueprint.config.ts

`blueprint.config.ts` – необязательный, но удобный файл, позволяющий заранее задать все сетевые и прочие параметры CLI.  
Преимущества:
* Запуск CLI без интерактивных вопросов (полезно в CI).
* Единая точка правды для всей команды.
* Лёгкое переопределение параметров через флаги, если нужно.

### Структура файла

```ts
import { Config } from '@ton/blueprint';

export const config: Config = {
    // поля см. таблицу ниже
};
```

После этого достаточно выполнить:

```bash
npx blueprint run          # или build / test и т.д.
```

CLI-флаги всё ещё имеют приоритет и могут временно переопределить настройки.

### Справочник по полям

<div className="doc-table">
| Путь | Тип / Значения | По-умолчанию | Описание |
|------|----------------|--------------|----------|
| `plugins` | `Plugin[]` | `[]` | Подключение сторонних расширений Blueprint. Плагин должен реализовывать интерфейс `Plugin` и возвращать набор CLI-раннеров. |
| `network` | `'mainnet' \| 'testnet'` или `CustomNetwork` | `undefined` | Сетевое окружение по-умолчанию. Если не указано, Blueprint спросит об этом при запуске. |
| `network.endpoint` | `string` | — | URL RPC-узла. Обязательно для `custom`, для остальных используется TON Center по-умолчанию. |
| `network.version` | `'v2' \| 'v4' \| 'tonapi' \| 'liteclient'` | `'v2'` | Версия API целевого узла. |
| `network.key` | `string` | — | API-ключ, если потребуется (TON Center v2 / TonAPI). |
| `network.type` | `'mainnet' \| 'testnet' \| 'custom'` | `'custom'` | Логический тип сети, отражается в ссылках на обозреватели и пр. |
| `separateCompilables` | `boolean` | `false` | Если `true`, файлы `*.compile.ts` кладутся в каталог `compilables` (иначе в `wrappers`). |
| `requestTimeout` | `number` (мс) | `undefined` | Переопределяет общий таймаут HTTP-запросов к API-узлу. |
| `recursiveWrappers` | `boolean` | `false` | Рекурсивно обходить подпапки `wrappers` / `compilables` при поиске контрактов. |
| `manifestUrl` | `string` | `'https://raw.githubusercontent.com/ton-org/blueprint/main/tonconnect/manifest.json'` | Ссылка на `manifest.json`, который TON Connect кошелёк покажет пользователю. |
</div>

> **Приоритет:** CLI-флаги (например `--custom …`) всегда перекрывают значения из конфига.

### Полный пример

```ts
import { Config } from '@ton/blueprint';
import { ScaffoldPlugin } from 'blueprint-scaffold';

export const config: Config = {
    plugins: [new ScaffoldPlugin()],   // подключаем плагин

    network: {
        endpoint: 'https://toncenter.com/api/v2/jsonRPC',
        version:  'v2',
        type:     'mainnet',
        key:      process.env.TONCENTER_KEY, // секреты храните в env
    },

    separateCompilables: true,
    recursiveWrappers:   true,
    requestTimeout:      15_000, // 15 сек
    manifestUrl:         'https://example.com/my-dapp/manifest.json',
};
```

### Когда использовать

1. **CI и автоматизация** – запуск `blueprint build` / `blueprint test` без интерактивных вопросов.  
2. **Работа в команде** – единые сетевые настройки и таймауты у всех разработчиков.  
3. **Сторонние плагины** – регистрируются через `plugins` и сразу доступны во всех CLI-командах.

## Следующий шаг

Теперь всё готово: пришло время начать писать смарт-контракты. Мы начнём с базовых задач: **хранения данных** и **get-методов**.

<Button href="/v3/guidelines/quick-start/developing-smart-contracts/tact-folder/tact-storage-and-get-methods/" colorType={'primary'} sizeType={'sm'}>

  Хранение данных и get-методы

</Button>

<Feedback />
