# Как использовать пул номинаторов

:::tip
Перед чтением этого руководства рекомендуется ознакомиться со [спецификацией Nominator Pool](/v3/documentation/smart-contracts/contracts-specs/nominator-pool).
:::

## Запуск валидатора в режиме пула номинаторов

1. Настройте аппаратное обеспечение валидатора, для этого потребуется: 8 vCPUs, 128 ГБ RAM, 1 ТБ SSD, фиксированный IP-адрес и скорость канала 1 Гб/с.

   Для поддержания стабильности сети рекомендуется распределять узлы валидаторов в разных географических точках по всему миру, а не концентрировать их в одном дата-центре. Вы можете воспользоваться [этим сайтом](https://status.toncenter.com/), чтобы оценить загрузку различных локаций. Карта показывает загрузку центров обработки данных в Европе, в частности в Финляндии, Германии и Франции, поэтому использовать таких провайдеров, как Hetzner и OVH, не рекомендуется.

   > Убедитесь, что оборудование соответствует или превосходит указанные выше характеристики. Запуск валидатора на несоответствующем оборудовании негативно сказывается на работе сети и может привести к штрафам.
   >
   > Обратите внимание, что с мая 2021 года компания Hetzner запретила майнинг на своих серверах, данный запрет распространяется как на алгоритмы PoW, так и на PoS. Даже установка обычного узла может быть расценена как нарушение условий обслуживания.
   >
   > **Рекомендуемые провайдеры:** [Amazon](https://aws.amazon.com/), [DigitalOcean](https://www.digitalocean.com/), [Linode](https://www.linode.com/), [Alibaba Cloud](https://alibabacloud.com/), [Latitude](https://www.latitude.sh/).

2. Установите и синхронизируйте **MyTonCtrl**, как описано в руководстве [здесь](/v3/guidelines/nodes/running-nodes/full-node#установите-mytonctrl).

   Также доступна [видео-инструкция](/v3/guidelines/nodes/running-nodes/full-node#запуск-узла-видео).

3. Переведите 1 TON на адрес кошелька валидатора. Адрес можно узнать в MyTonCtrl с помощью команды `wl`.

4. Используйте команду `aw`, чтобы активировать ваш кошелек валидатора.

5. Активируйте режим пула:

   ```bash
   enable_mode nominator-pool
   set stake null
   ```

6. Создайте два пула (для четных и нечетных раундов проверки):

   ```bash
   new_pool p1 0 1 1000 300000
   new_pool p2 0 1 1001 300000
   ```

   где:

   - `p1` – имя пула;
   - `0` % – доля вознаграждения валидатора (например, введите 40 для 40%);
   - `1` – максимальное количество номинаторов в пуле (\<= 40);
   - `1000` TON – минимальная ставка валидатора (>= 1 000 TON);
   - `300000` TON – минимальная ставка номинатора (>= 10 000 TON);

   > (!) Конфигурации пулов не обязательно должны быть одинаковыми, можно добавить 1 к минимальной ставке одного пула, чтобы сделать их разными.
   >
   > (!) Воспользуйтесь https://tonmon.xyz/, чтобы определить текущую минимальную ставку валидатора.

7. Введите `pools_list`, чтобы отобразить адреса пулов:

   ```bash
   pools_list
   Name  Status  Balance  Address
   p1    empty   0        0f98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780qIT
   p2    empty   0        0f9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV5jL
   ```

8. Отправьте по 1 TON в каждый пул и активируйте пулы:

   ```bash
   mg validator_wallet_001 0f98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780qIT 1
   mg validator_wallet_001 0f9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV5jL 1
   activate_pool p1
   activate_pool p2
   ```

9. Введите `pools_list`, чтобы отобразить пулы:

   ```bash
   pools_list
   Name  Status  Balance      Address
   p1    active  0.731199733  kf98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780v_W
   p2    active  0.731199806  kf9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV8UO
   ```

10. Откройте каждый пул по ссылке "https://tonscan.org/nominator/{address_of_pool}" и проверьте конфигурацию пула.

11. Продолжайте вносить депозит валидатора в каждый пул:

    ```bash
    deposit_to_pool validator_wallet_001 <address_of_pool_1> 1005
    deposit_to_pool validator_wallet_001 <address_of_pool_2> 1005
    ```

`1005` – это сумма депозита в TON. Имейте в виду, что за обработку депозита пулом будет вычтен 1 TON.

12. Продолжайте вносить депозит номинатора в каждый пул:

    Перейдите по ссылке на пул (из **шага 10**) и нажмите **ADD STAKE**.
    Также можно внести депозит с помощью **MyTonCtrl**, используя следующие команды:

    ```bash
    mg nominator_wallet_001 <address_of_pool_1> 300001 -C d
    mg nominator_wallet_001 <address_of_pool_2> 300001 -C d
    ```

> (!) Кошелек номинатора должен быть инициализирован в basechain (воркчейн 0).
>
> (!) Помните, что кошелек валидатора и кошелек номинатора должны храниться отдельно! Кошелек валидатора должен храниться на сервере с узлом валидатора, чтобы обеспечить обработку всех системных транзакций. Кошелек номинатора должен храниться в вашем холодном криптовалютном кошельке.
>
> Чтобы вывести депозит номинатора, отправьте транзакцию с комментарием `w` на адрес пула (приложите 1 TON для обработки транзакции). Также можно выполнить это действие с помощью **MyTonCtrl**.

13. Предложите номинаторам внести депозит в ваши пулы. Участие в валидации начнется автоматически.

    > (!) Убедитесь, что на вашем кошельке валидатора есть не менее 200 TON в месяц для оплаты комиссий.

## Конфигурация пула

Если вы собираетесь давать в долг самому себе, используйте `new_pool p1 0 1 1000 300000` (максимум 1 номинатор, доля валидаторов 0%).

Если вы создаете пул для большого количества номинаторов, то можно использовать: `new_pool p1 40 40 10000 10000` (максимум 40 номинаторов, доля валидаторов 40%, минимальная ставка участника 10 000 TON).

## Переход обычного валидатора в режим пула номинаторов

1. Введите `set stake 0`, чтобы прекратить участие в выборах.

2. Ожидайте возврата двух ваших ставок от избирателя.

3. Выполните действия из раздела [Запуск валидатора в режиме пула номинаторов](#запуск-валидатора-в-режиме-пула-номинаторов), начиная с **4-го шага** и далее.
