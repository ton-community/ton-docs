---
description: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏, —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# –†–∞–±–æ—Ç–∞ —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∫–æ—à–µ–ª—å–∫–∞

## üëã –í–≤–µ–¥–µ–Ω–∏–µ

–ü—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –≤–∞–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—à–µ–ª—å–∫–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ TON. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–æ—à–µ–ª—å–∫–∞–º–∏, —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

:::tip
–ü–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å—Ç–∞—Ç—å–µ–π [–¢–∏–ø—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫–æ—à–µ–ª—å–∫–∞](/v3/documentation/smart-contracts/contracts-specs/wallet-contracts).
:::

–ú—ã –Ω–∞—É—á–∏–º—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞.

## üí° –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã

–ò–∑—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –±–∞–∑–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π JavaScript –∏ TypeScript –∏–ª–∏ Golang. –ù–∞ –±–∞–ª–∞–Ω—Å–µ –∫–æ—à–µ–ª—å–∫–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º 3 TON (—ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–∏—Ä–∂–µ–≤–æ–π —Å—á–µ—Ç, –Ω–µ–∫–∞—Å—Ç–æ–¥–∏–∞–ª—å–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ –∏–ª–∏ –±–æ—Ç –ö–æ—à–µ–ª–µ–∫ –æ—Ç Telegram). –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–± [–∞–¥—Ä–µ—Å–∞—Ö –≤ TON](/v3/documentation/smart-contracts/addresses), [—è—á–µ–π–∫–µ](/v3/concepts/dive-into-ton/ton-blockchain/cells-as-data-storage), [–±–ª–æ–∫—á–µ–π–Ω–µ –±–ª–æ–∫—á–µ–π–Ω–æ–≤](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains).

:::info –†–ê–ó–í–ò–¢–ò–ï MAINNET –ù–ï–û–ë–•–û–î–ò–ú–û
–†–∞–±–æ—Ç–∞ —Å TON Testnet —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å–µ—Ç–∏. –ë–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ª—É—á—à–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ TON Mainnet, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∏ –ø–æ–Ω–∏–∑–∏—Ç—å —Å–±–æ—Ä—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
:::

## üíø –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub](https://github.com/aSpite/wallet-tutorial).

## ‚úçÔ∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π NodeJS
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ TON: @ton/ton 13.5.1+, @ton/core 0.49.2+ –∏ @ton/crypto 3.2.0+

**–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û**: –ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Go, –∞ –Ω–µ JS, —Ç–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ TON –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å GoLand IDE –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É [tonutils-go](https://github.com/xssnick/tonutils-go). –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –¥–∞–Ω–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –¥–ª—è –≤–µ—Ä—Å–∏–∏ Go.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```bash
npm i --save @ton/ton @ton/core @ton/crypto
```

</TabItem>
<TabItem value="go" label="Golang">

```bash
go get github.com/xssnick/tonutils-go
go get github.com/xssnick/tonutils-go/adnl
go get github.com/xssnick/tonutils-go/address
```

</TabItem>
</Tabs>

## ‚öô –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ TypeScript –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É (–º—ã –Ω–∞–∑–æ–≤–µ–º –µ–µ WalletsTutorial).
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é CLI.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
npm init -y
npm install typescript @types/node ts-node nodemon --save-dev
npx tsc --init --rootDir src --outDir build \ --esModuleInterop --target es2020 --resolveJsonModule --lib es6 \ --module commonjs --allowJs true --noImplicitAny false --allowSyntheticDefaultImports true --strict false
```

:::info
–ü—Ä–æ—Ü–µ—Å—Å `ts-node` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ TypeScript –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –∞ `nodemon` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è node –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
:::

```json
  "files": [
    "\\",
    "\\"
  ]
```

5. –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `nodemon.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:

```json
{
  "watch": ["src"],
  "ext": ".ts,.js",
  "ignore": [],
  "exec": "npx ts-node ./src/index.ts"
}
```

6. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤ `package.json` –≤–º–µ—Å—Ç–æ "test", –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```json
"start:dev": "npx nodemon"
```

7. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `src` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–∞–π–ª `index.ts` –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ.
8. –î–∞–ª–µ–µ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```ts
async function main() {
  console.log("Hello, TON!");
}

main().finally(() => console.log("Exiting..."));
```

9. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
npm run start:dev
```

10. –í –∏—Ç–æ–≥–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:

![](/img/docs/how-to-wallet/wallet_1.png)

:::tip Blueprint
TON Community —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–ª–∏—á–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [Blueprint](https://github.com/ton-org/blueprint). –û–¥–Ω–∞–∫–æ –Ω–∞–º –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç–∞–∫–æ–π –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ—ç—Ç–æ–º—É —Å–ª–µ–¥—É–µ—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –≤—ã—à–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
:::

**–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Golang –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ GoLand IDE.
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–∞–π–ª `go.mod` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º (–¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∏–∑–º–µ–Ω–∏—Ç—å **–≤–µ—Ä—Å–∏—é Go**, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞):

```
module main

go 1.20
```

3. –í–≤–µ–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
go get github.com/xssnick/tonutils-go
```

4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `main.go` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:

```go
package main

import (
	"log"
)

func main() {
	log.Println("Hello, TON!")
}
```

5. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –≤ —Ñ–∞–π–ª–µ `go.mod` –Ω–∞ `main`.
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥ –≤—ã—à–µ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –≤—ã–≤–æ–¥–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

:::info
–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é IDE, –ø–æ—Å–∫–æ–ª—å–∫—É GoLand –Ω–µ –±–µ—Å–ø–ª–∞—Ç–Ω–∞, –Ω–æ –æ–Ω–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ.
:::

:::warning –í–ê–ñ–ù–û

–í –∫–∞–∂–¥–æ–º –ø–æ—Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç —É–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ –∏–º–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∫–æ–¥–∞, –Ω–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏.
:::

## üöÄ –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º!

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —É–∑–Ω–∞–µ–º, –∫–∞–∫–∏–µ –∫–æ—à–µ–ª—å–∫–∏ (V3 –∏ V4) —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω–µ TON, –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∏—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ TON, —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏—Ö —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –±–ª–æ–∫—á–µ–π–Ω, –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ—à–µ–ª—å–∫–∏ –∏, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ, —Ä–∞–±–æ—Ç–∞—Ç—å —Å highload-–∫–æ—à–µ–ª—å–∫–∞–º–∏.

–ù–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äì –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏: @ton/ton, @ton/core, @ton/crypto (ExternalMessage, InternalMessage, Signing –∏ —Ç.–¥.), —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏—Ö –º–∞—Å—à—Ç–∞–±–∞—Ö. –î–ª—è —ç—Ç–æ–≥–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ (V3 –∏ V4), –ø–æ—Å–∫–æ–ª—å–∫—É –±–∏—Ä–∂–∏, –Ω–µ–∫–∞—Å—Ç–æ–¥–∏–∞–ª—å–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏ –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –≤–µ—Ä—Å–∏–∏.

:::note
There may be occasions in this tutorial when there is no explanation for particular details. In these cases, more details will be provided in later stages of this tutorial.

**–í–ê–ñ–ù–û:** –í –¥–∞–Ω–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [–∫–æ–¥ –∫–æ—à–µ–ª—å–∫–∞ V3](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/wallet3-code.fc). –°–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤–µ—Ä—Å–∏—è 3 –∏–º–µ–µ—Ç –¥–≤–µ —Ä–µ–≤–∏–∑–∏–∏: R1 –∏ R2. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ç–æ—Ä–∞—è —Ä–µ–≤–∏–∑–∏—è, –ø–æ—ç—Ç–æ–º—É, –∫–æ–≥–¥–∞ –º—ã –ø–æ —Ç–µ–∫—Å—Ç—É —Å—Å—ã–ª–∞–µ–º—Å—è –Ω–∞ V3, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç V3R2.
:::

## üíé –ö–æ—à–µ–ª—å–∫–∏ TON Blockchain

–í—Å–µ –∫–æ—à–µ–ª—å–∫–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω–µ TON, —è–≤–ª—è—é—Ç—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, –∏ –≤—Å–µ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ TON —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–∞–∫ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç. –ö–∞–∫ –∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –±–ª–æ–∫—á–µ–π–Ω–æ–≤ TON –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ü–µ–ª–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–ø–æ–ª–Ω–æ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞**. –í TON —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫–æ—à–µ–ª—å–∫–∞ –æ–±–ª–µ–≥—á–∞—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ –¥—Ä—É–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∞–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.

### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ—à–µ–ª—å–∫–æ–º

–í –±–ª–æ–∫—á–µ–π–Ω–µ TON —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: `internal` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ) –∏ `external` (–≤–Ω–µ—à–Ω–∏–µ). –í–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–ª–æ–∫—á–µ–π–Ω –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞, —Ç–µ–º —Å–∞–º—ã–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–≤—è–∑—å —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ç–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –§—É–Ω–∫—Ü–∏—è, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```func
() recv_external(slice in_msg) impure {
    ;; some code
}
```

–ü–µ—Ä–µ–¥ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–º –∏–∑—É—á–µ–Ω–∏–µ–º –∫–æ—à–µ–ª—å–∫–æ–≤ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞ TON –∫–∞–∂–¥—ã–π –∫–æ—à–µ–ª–µ–∫ —Ö—Ä–∞–Ω–∏—Ç `public key`, `seqno` –∏ `subwallet_id` –≤–ª–∞–¥–µ–ª—å—Ü–∞. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ—à–µ–ª–µ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ `get_data()` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ó–∞—Ç–µ–º –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–¥—É—Ä –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è, –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ—Ç. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```func
() recv_external(slice in_msg) impure {
  var signature = in_msg~load_bits(512); ;; get signature from the message body
  var cs = in_msg;
  var (subwallet_id, valid_until, msg_seqno) = (cs~load_uint(32), cs~load_uint(32), cs~load_uint(32));  ;; get rest values from the message body
  throw_if(35, valid_until <= now()); ;; check the relevance of the message
  var ds = get_data().begin_parse(); ;; get data from storage and convert it into a slice to be able to read values
  var (stored_seqno, stored_subwallet, public_key) = (ds~load_uint(32), ds~load_uint(32), ds~load_uint(256)); ;; read values from storage
  ds.end_parse(); ;; make sure we do not have anything in ds variable
  throw_unless(33, msg_seqno == stored_seqno);
  throw_unless(34, subwallet_id == stored_subwallet);
  throw_unless(35, check_signature(slice_hash(in_msg), signature, public_key));
  accept_message();
```

> üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
>
> ["load_bits()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#load_bits)
>
> ["get_data()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#get_data)
>
> ["begin_parse()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#begin_parse)
>
> ["end_parse()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#end_parse)
>
> ["load_int()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#load_int)
>
> ["load_uint()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#load_uint)
>
> ["check_signature()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#check_signature)
>
> ["slice_hash()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#slice_hash)
>
> ["accept_message()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#accept_message)

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ.

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è ‚Äì Seqno

–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∫–æ—à–µ–ª—å–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ `seqno` (Sequence Number) ‚Äì –ø–æ—Ä—è–¥–∫–æ–≤–æ–º –Ω–æ–º–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç—ã –º–æ–≥—É—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥ —É–≥—Ä–æ–∑—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã. –ï—Å–ª–∏ –∏–∑—É—á–∏—Ç—å –∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞, —Ç–æ `seqno` –æ–±—ã—á–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```func
throw_unless(33, msg_seqno == stored_seqno);
```

–ö–æ–¥ –≤—ã—à–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `seqno`, –ø—Ä–∏—à–µ–¥—à–µ–µ –≤–æ –≤—Ö–æ–¥—è—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å `seqno`, –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç, —Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å –∫–æ–¥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `33`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ `seqno` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—à–∏–±–∫—É –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤.

:::note
–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–µ–º —É–≥–æ–¥–Ω–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ, –µ—Å–ª–∏ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –∫–æ–º—É-—Ç–æ 1 TON, –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π —Å–º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –û–¥–Ω–∞–∫–æ, –∫–æ–≥–¥–∞ seqno —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º, –∞ –∑–Ω–∞—á–∏—Ç –Ω–∏–∫—Ç–æ –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫—Ä–∞–∂–∏ –≤–∞—à–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤.
:::

### –ü–æ–¥–ø–∏—Å—å

–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫–æ—à–µ–ª—å–∫–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –û–¥–Ω–∞–∫–æ, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞, —Ç–∞–∫–∏–º –¥–∞–Ω–Ω—ã–º –Ω–µ–ª—å–∑—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä—è—Ç—å. –ü–æ—ç—Ç–æ–º—É –≤ –∫–∞–∂–¥–æ–º –∫–æ—à–µ–ª—å–∫–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤–ª–∞–¥–µ–ª—å—Ü–∞. –ö–æ–≥–¥–∞ –∫–æ—à–µ–ª–µ–∫ –ø–æ–ª—É—á–∞–µ—Ç –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –∏–º–µ–Ω–Ω–æ –æ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

–ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ—à–µ–ª–µ–∫ —Å–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å –∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä:

```func
var signature = in_msg~load_bits(512);
var ds = get_data().begin_parse();
var (stored_seqno, stored_subwallet, public_key) = (ds~load_uint(32), ds~load_uint(32), ds~load_uint(256));
throw_unless(35, check_signature(slice_hash(in_msg), signature, public_key));
```

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:

```func
accept_message();
```

:::info accept_message()
–ü–æ—Å–∫–æ–ª—å–∫—É –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç Toncoin, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –æ–ø–ª–∞—Ç—ã –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, —Ñ—É–Ω–∫—Ü–∏—è `accept_message()` –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `gas_credit` (–≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 10 000 –µ–¥–∏–Ω–∏—Ü –≥–∞–∑–∞). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞—Å—á–µ—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –µ—Å–ª–∏ –≥–∞–∑ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `gas_credit`. –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `accept_message()` —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã—á–∏—Ç–∞–µ—Ç –≤—Å–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –≥–∞–∑ (–≤ TON) –∏–∑ —Å–≤–æ–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](/v3/documentation/smart-contracts/transaction-fees/accept-message-effects).
:::

### –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–ï—â–µ –æ–¥–Ω–∏–º —à–∞–≥–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ `valid_until`. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —ç—Ç–æ –≤—Ä–µ–º—è –≤ UNIX –¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º. –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –Ω–µ—É–¥–∞—á–µ–π, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `35`:

```func
var (subwallet_id, valid_until, msg_seqno) = (cs~load_uint(32), cs~load_uint(32), cs~load_uint(32));
throw_if(35, valid_until <= now());
```

–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω –ø–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ.

### –†–∞–∑–ª–∏—á–∏—è –∫–æ—à–µ–ª—å–∫–∞ V3 –∏ V4

–ö–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É V3 –∏ V4 –∫–æ—à–µ–ª—å–∫–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∫–æ—à–µ–ª—å–∫–æ–º V4 `–ø–ª–∞–≥–∏–Ω–æ–≤`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —Å–ø–æ—Å–æ–±–Ω—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON –∏–∑ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞.

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫–æ—à–µ–ª—å–∫–∞, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–ª–∞–≥–∏–Ω–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –≤ –æ—Ç–≤–µ—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç **–º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–∫–∏**, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–ª–∞–≥–∏–Ω–æ–≤. –ú—ã –Ω–µ –±—É–¥–µ–º —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏ –¥–∞–ª–µ–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ –¥–∞–Ω–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.

### –ö–∞–∫ –∫–æ—à–µ–ª—å–∫–∏ –æ–±–ª–µ–≥—á–∞—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏

–ö–∞–∫ –º—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–∏, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ—à–µ–ª—å–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã. –ó–∞—Ç–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Ç–µ–ª–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–∑–¥–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –±–ª–æ–∫—á–µ–π–Ω:

```func
cs~touch();
while (cs.slice_refs()) {
    var mode = cs~load_uint(8); ;; load message mode
    send_raw_message(cs~load_ref(), mode); ;; get each new internal message as a cell with the help of load_ref() and send it
}
```

:::tip `touch()`
–ù–∞ TON –≤—Å–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ TON (TVM), –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ —Å—Ç–µ–∫–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. `~ touch()` –ø–æ–º–µ—â–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `cs` –Ω–∞ –≤–µ—Ä—à–∏–Ω—É —Å—Ç–µ–∫–∞, —á—Ç–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ –≥–∞–∑–∞.
:::

–ü–æ—Å–∫–æ–ª—å–∫—É –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è **–º–∞–∫—Å–∏–º—É–º 4 —Å—Å—ã–ª–∫–∏**, —Ç–æ –Ω–∞ –æ–¥–Ω–æ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º—É–º 4 –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è.

> üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
>
> ["slice_refs()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#slice_refs)
>
> ["send_raw_message() –∏ message modes" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#send_raw_message)
>
> ["load_ref()" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#load_ref)

## üì¨ –í–Ω–µ—à–Ω–∏–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —É–∑–Ω–∞–µ–º —á—É—Ç—å –±–æ–ª—å—à–µ –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö `internal` –∏ –≤–Ω–µ—à–Ω–∏—Ö `external` —Å–æ–æ–±—â–µ–Ω–∏—è—Ö. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º –∏ –æ—Ç–ø—Ä–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Ç—å, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è —Å–≤–µ—Å—Ç–∏ –∫ –º–∏–Ω–∏–º—É–º—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –≥–æ—Ç–æ–≤—ã–º –∫–æ—à–µ–ª—å–∫–æ–º. –î–ª—è —ç—Ç–æ–≥–æ:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞](/v3/concepts/dive-into-ton/ton-ecosystem/wallet-apps) (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Tonkeeper).
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–µ—Ä—Å–∏—é V3R2.
3. –í–Ω–µ—Å–∏—Ç–µ 1 TON –Ω–∞ –∫–æ—à–µ–ª–µ–∫.
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ —Å–µ–±–µ –Ω–∞ —ç—Ç–æ—Ç –∂–µ –∫–æ—à–µ–ª–µ–∫).

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Tonkeeper —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ—à–µ–ª—å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤.

:::note
–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π-–∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∞ TON –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ—à–µ–ª–µ–∫ V4. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø–ª–∞–≥–∏–Ω—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è, –∞ –∑–Ω–∞—á–∏—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—à–µ–ª—å–∫–∞ V3. Tonkeeper –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—É—é –∏–º –≤–µ—Ä—Å–∏—é –∫–æ—à–µ–ª—å–∫–∞, –ø–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ—à–µ–ª–µ–∫ V3.
:::

### TL-B

–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –≤—Å–µ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ TON ‚Äì —ç—Ç–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —è—á–µ–µ–∫. –ß—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–∞–º –Ω—É–∂–Ω—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã. –î–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω `TL-B` ‚Äì —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤–Ω—É—Ç—Ä–∏ —è—á–µ–µ–∫.

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ö–µ–º–æ–π –¥–∞–Ω–Ω—ã—Ö [block.tlb](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb). –≠—Ç–æ—Ç —Ñ–∞–π–ª –±—É–¥–µ—Ç –Ω–µ–∑–∞–º–µ–Ω–∏–º –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–µ–º –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —è—á–µ–µ–∫. –í –Ω–∞—à–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ —Ç–∞–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

:::info
–í –¥–∞–Ω–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑—É—á–∏—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ TL-B](/v3/documentation/data-formats/tlb/tl-b-language).
:::

### CommonMsgInfo

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å `CommonMsgInfo` ([TL-B](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L123-L130)) –∏–ª–∏ `CommonMsgInfoRelaxed` ([TL-B](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L132-L137)). –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ —Ç–∏–ø—É –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞–¥—Ä–µ—Å—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ñ–ª–∞–≥–∞–º –∏ —Å–±–æ—Ä–∞–º.

–ß–∏—Ç–∞—è —Ñ–∞–π–ª `block.tlb`, –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å —Ç—Ä–∏ —Ç–∏–ø–∞ CommonMsgInfo: `int_msg_info$0`, `ext_in_msg_info$10`, `ext_out_msg_info$11`. –ï—Å–ª–∏ –Ω–µ —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏, —Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `ext_out_msg_info` ‚Äì —ç—Ç–æ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–Ω–µ—à–Ω–µ–≥–æ –ª–æ–≥–∞. –ö–∞–∫ –ø—Ä–∏–º–µ—Ä –ø–æ–¥–æ–±–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–∑—É—á–∏—Ç–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [–ò–∑–±–∏—Ä–∞—Ç–µ–ª—è](https://tonscan.org/address/Ef8zMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzM0vF).

–í —Å—Ö–µ–º–µ [TL-B —É–∫–∞–∑–∞–Ω–æ](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L127-L128), —á—Ç–æ **–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–∞ ext_in_msg_info –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ CommonMsgInfo**. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ç–∞–∫–∏–µ –ø–æ–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–∞–∫ `src`, `created_lt`, `created_at` –∏ –¥—Ä—É–≥–∏–µ, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–æ–ª–µ `src` –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω, –∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç –¥–∞–Ω–Ω–æ–µ –ø–æ–ª–µ –≤–æ –≤—Ä–µ–º—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∞–¥—Ä–µ—Å `src` –¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `CommonMsgInfo` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `MsgAddress`, –Ω–æ —Ç–∞–∫ –∫–∞–∫ –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ–±—ã—á–Ω–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω, —Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è `addr_none$00`(`00`‚Äì –¥–≤–∞ –Ω—É–ª–µ–≤—ã—Ö –±–∏—Ç–∞), –∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `CommonMsgInfoRelaxed`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `addr_none`. –î–ª—è `ext_in_msg_info` (–≤—Ö–æ–¥—è—â–∏–µ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `CommonMsgInfo`, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∏ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∞ [MsgAddressExt](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L100), —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

:::note
–ß–∏—Å–ª–∞ –ø–æ—Å–ª–µ —Å–∏–º–≤–æ–ª–∞ `$` ‚Äì —ç—Ç–æ –±–∏—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–∞—á–∞–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —ç—Ç–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ (–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏).
:::

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏. –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—é—â–∏–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (—Ç–∞–∫–∏—Ö –∫–∞–∫ [NFT](https://github.com/ton-blockchain/token-contract/blob/f2253cb0f0e1ae0974d7dc0cef3a62cb6e19f806/nft/nft-item.fc#L51-L56) –∏ [Jetons](https://github.com/ton-blockchain/token-contract/blob/f2253cb0f0e1ae0974d7dc0cef3a62cb6e19f806/ft/jetton-wallet.fc#L139-L144)), —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:

```func
var msg = begin_cell()
  .store_uint(0x18, 6) ;; or 0x10 for non-bounce
  .store_slice(to_address)
  .store_coins(amount)
  .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1 + 1) ;; default message headers (see sending messages page)
  ;; store something as a body
```

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º `0x18` –∏ `0x10`, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —á–∏—Å–ª–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º (—Å —É—á–µ—Ç–æ–º, —á—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å 6 –±–∏—Ç): `011000` –∏ `010000`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –∫–æ–¥ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```func
var msg = begin_cell()
  .store_uint(0, 1) ;; this bit indicates that we send an internal message according to int_msg_info$0  
  .store_uint(1, 1) ;; IHR Disabled
  .store_uint(1, 1) ;; or .store_uint(0, 1) for 0x10 | bounce
  .store_uint(0, 1) ;; bounced
  .store_uint(0, 2) ;; src -> two zero bits for addr_none
  .store_slice(to_address)
  .store_coins(amount)
  .store_uint(0, 1 + 4 + 4 + 64 + 32 + 1 + 1) ;; default message headers (see sending messages page)
  ;; store something as a body
```

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–æ –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä:

|   –ü–∞—Ä–∞–º–µ—Ç—Ä   |                                                                                                                                                                                                                                                                                            –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                           |
| :----------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| IHR Disabled |              –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ (—ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã —Ö—Ä–∞–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ `1`), –ø–æ—Å–∫–æ–ª—å–∫—É –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ì–∏–ø–µ—Ä–∫—É–±–∞ (Instant Hypercube Routing) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –û–ø—Ü–∏—è –±—É–¥–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞, –∫–æ–≥–¥–∞ –≤ —Å–µ—Ç–∏ –ø–æ—è–≤–∏—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ [—à–∞—Ä–¥—á–µ–π–Ω–æ–≤](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains#–º–Ω–æ–∂–µ—Å—Ç–≤–æ-accountchains-—à–∞—Ä–¥—ã). –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± IHR Disabled –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ [tblkch.pdf](https://ton.org/tblkch.pdf) (–≥–ª–∞–≤–∞ 2)             |
|    Bounce    | –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ TON, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Bounce` –∑–Ω–∞—á–µ–Ω–∏–µ `1` (true). –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ, —Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON (–∑–∞ –≤—ã—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏) –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –Ω–µ–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](/v3/documentation/smart-contracts/message-management/non-bounceable-messages) |
|    Bounced   |                                                                                                                                                         –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Bounced) ‚Äì —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏, –≤–æ–∑–Ω–∏–∫—à–µ–π –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–æ–æ–±—â–∞–µ—Ç –æ —Ç–æ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ *–≤–µ—Ä–Ω—É–≤—à–∏–º—Å—è*                                                                                                                                                        |
|      Src     |                                                                                                                                                                                                                                        –ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –¥–≤–∞ –Ω—É–ª–µ–≤—ã—Ö –±–∏—Ç–∞, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å `addr_none`                                                                                                                                                                                                                                        |

–°–ª–µ–¥—É—é—â–∏–µ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:

```func
...
.store_slice(to_address)
.store_coins(amount)
...
```

- —É–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:

```func
...
  .store_uint(0, 1) ;; Extra currency
  .store_uint(0, 4) ;; IHR fee
  .store_uint(0, 4) ;; Forwarding fee
  .store_uint(0, 64) ;; Logical time of creation
  .store_uint(0, 32) ;; UNIX time of creation
  .store_uint(0, 1) ;; State Init
  .store_uint(0, 1) ;; Message body
  ;; store something as a body
```

|         –ü–∞—Ä–∞–º–µ—Ç—Ä         |                                                                                                                                                                                                                 –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                 |
| :----------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      Extra currency      |                                                                                                                                                       –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞. –≠—Ç–æ –ø–µ—Ä–≤–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∂–µ—Ç–æ–Ω–æ–≤, –∏ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                                                                                                                                                      |
|          IHR fee         |                                                                –ö–æ–º–∏—Å—Å–∏—è IHR. –ö–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å, IHR –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–∞ –Ω—É–ª—é. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ [tblkch.pdf](https://ton.org/tblkch.pdf) (3.1.8)                                                               |
|      Forwarding fee      |                                                                                                                             –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –ø–µ—Ä–µ—Å—ã–ª–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](/v3/documentation/smart-contracts/transaction-fees/fees-low-level#–ø–ª–∞—Ç–∞-–∑–∞-–ø–µ—Ä–µ—Å—ã–ª–∫—É)                                                                                                                             |
| Logical time of creation |                                                                                                                                                                                        –í—Ä–µ–º—è, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π                                                                                                                                                                                       |
|   UNIX time of creation  |                                                                                                                                                                                                      –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ UNIX                                                                                                                                                                                                     |
|        State Init        |                                  –ö–æ–¥ –∏ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ï—Å–ª–∏ –±–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `0`, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –Ω–∞—Å –Ω–µ—Ç State Init. –ù–æ –µ—Å–ª–∏ –æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `1`, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–∏—Å–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –±–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å, —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–∏ State Init –≤ —Ç–æ–π –∂–µ —è—á–µ–π–∫–µ (`0`) –∏–ª–∏ –∑–∞–ø–∏—Å–∞–Ω –∫–∞–∫ —Å—Å—ã–ª–∫–∞ (`1`)                                  |
|       Message body       | –¢–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ò–Ω–æ–≥–¥–∞ —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–æ, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –µ–≥–æ —Å–ª–µ–¥—É–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ **—Å—Å—ã–ª–∫—É**, –ø—Ä–∏ —ç—Ç–æ–º –±–∏—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `1`, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Å—ã–ª–∫–∏. –ï—Å–ª–∏ –±–∏—Ç —Ä–∞–≤–µ–Ω `0`, —Ç–µ–ª–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–æ–π –∂–µ —è—á–µ–π–∫–µ, —á—Ç–æ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ |

–ó–Ω–∞—á–µ–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤—ã—à–µ (–≤–∫–ª—é—á–∞—è `src`), –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –±–∏—Ç–æ–≤ `State Init` –∏ `Message Body`, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏.

:::note
–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ —É–º–µ—â–∞–µ—Ç—Å—è –≤ –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç, —á–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –Ω—É–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, 0x18 —É–º–µ—â–∞–µ—Ç—Å—è –≤ 5 –±–∏—Ç -> `11000`. –û–¥–Ω–∞–∫–æ, –∫–∞–∫ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è 6 –±–∏—Ç, —Ç–æ–≥–¥–∞ –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è `011000`.
:::

–ü—Ä–∏—Å—Ç—É–ø–∏–º –∫ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º Toncoin –Ω–∞ –¥—Ä—É–≥–æ–π –∫–æ—à–µ–ª–µ–∫ V3.
–î–ª—è –Ω–∞—á–∞–ª–∞, –¥–æ–ø—É—Å—Ç–∏–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 0.5 TON —Å–∞–º–æ–º—É —Å–µ–±–µ —Å —Ç–µ–∫—Å—Ç–æ–º **Hello, TON!**. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [—ç—Ç–æ–º—É —Ä–∞–∑–¥–µ–ª—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](/v3/documentation/smart-contracts/func/cookbook#–∫–∞–∫-–æ—Ç–ø—Ä–∞–≤–∏—Ç—å-–ø—Ä–æ—Å—Ç–æ–µ-—Å–æ–æ–±—â–µ–Ω–∏–µ).

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { beginCell } from '@ton/core';

let internalMessageBody = beginCell()
  .storeUint(0, 32) // write 32 zero bits to indicate that a text comment will follow
  .storeStringTail("Hello, TON!") // write our text comment
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
	"github.com/xssnick/tonutils-go/tvm/cell"
)

internalMessageBody := cell.BeginCell().
  MustStoreUInt(0, 32). // write 32 zero bits to indicate that a text comment will follow
  MustStoreStringSnake("Hello, TON!"). // write our text comment
  EndCell()
```

</TabItem>
</Tabs>

–í—ã—à–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ —è—á–µ–π–∫—É `InternalMessageBody`, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–µ–ª–æ –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ–¥–Ω—É —è—á–µ–π–∫—É (1023 –±–∏—Ç–∞), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **—Ä–∞–∑–±–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —è—á–µ–µ–∫** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ [—Å–ª–µ–¥—É—é—â–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](/v3/documentation/smart-contracts/message-management/internal-messages). –û–¥–Ω–∞–∫–æ, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–æ–∑–¥–∞—é—Ç —è—á–µ–π–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏, –ø–æ—ç—Ç–æ–º—É –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –æ–± —ç—Ç–æ–º –Ω–µ —Å—Ç–æ–∏—Ç –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è.

–ó–∞—Ç–µ–º, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ä–∞–Ω–µ–µ –∏–∑—É—á–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, —Å–æ–∑–¥–∞–µ—Ç—Å—è `InternalMessage`:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { toNano, Address } from '@ton/ton';

const walletAddress = Address.parse('put your wallet address');

let internalMessage = beginCell()
  .storeUint(0, 1) // indicate that it is an internal message -> int_msg_info$0
  .storeBit(1) // IHR Disabled
  .storeBit(1) // bounce
  .storeBit(0) // bounced
  .storeUint(0, 2) // src -> addr_none
  .storeAddress(walletAddress)
  .storeCoins(toNano("0.2")) // amount
  .storeBit(0) // Extra currency
  .storeCoins(0) // IHR Fee
  .storeCoins(0) // Forwarding Fee
  .storeUint(0, 64) // Logical time of creation
  .storeUint(0, 32) // UNIX time of creation
  .storeBit(0) // No State Init
  .storeBit(1) // We store Message Body as a reference
  .storeRef(internalMessageBody) // Store Message Body as a reference
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/tlb"
)

walletAddress := address.MustParseAddr("put your address")

internalMessage := cell.BeginCell().
  MustStoreUInt(0, 1). // indicate that it is an internal message -> int_msg_info$0
  MustStoreBoolBit(true). // IHR Disabled
  MustStoreBoolBit(true). // bounce
  MustStoreBoolBit(false). // bounced
  MustStoreUInt(0, 2). // src -> addr_none
  MustStoreAddr(walletAddress).
  MustStoreCoins(tlb.MustFromTON("0.2").NanoTON().Uint64()).   // amount
  MustStoreBoolBit(false). // Extra currency
  MustStoreCoins(0). // IHR Fee
  MustStoreCoins(0). // Forwarding Fee
  MustStoreUInt(0, 64). // Logical time of creation
  MustStoreUInt(0, 32). // UNIX time of creation
  MustStoreBoolBit(false). // No State Init
  MustStoreBoolBit(true). // We store Message Body as a reference
  MustStoreRef(internalMessageBody). // Store Message Body as a reference
  EndCell()
```

</TabItem>
</Tabs>

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–≤–ª–µ—á—å `seqno` (–ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä) —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è `Client`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ GET-–º–µ—Ç–æ–¥–∞ `seqno`. –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å seed-—Ñ—Ä–∞–∑—É (–∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ [–∑–¥–µ—Å—å](#-–≤–Ω–µ—à–Ω–∏–µ-–∏-–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ-—Å–æ–æ–±—â–µ–Ω–∏—è)), —á—Ç–æ–±—ã –ø–æ–¥–ø–∏—Å–∞—Ç—å –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';
import { mnemonicToWalletKey } from '@ton/crypto';

const client = new TonClient({
  endpoint: "https://toncenter.com/api/v2/jsonRPC", // you can replace it on https://testnet.toncenter.com/api/v2/jsonRPC for testnet
  apiKey: "put your api key" // you can get an api key from @tonapibot bot in Telegram
});

const mnemonic = 'put your mnemonic'; // word1 word2 word3
let getMethodResult = await client.runMethod(walletAddress, "seqno"); // run "seqno" GET method from your wallet contract
let seqno = getMethodResult.stack.readNumber(); // get seqno from response

const mnemonicArray = mnemonic.split(' '); // get array from string
const keyPair = await mnemonicToWalletKey(mnemonicArray); // get Secret and Public keys from mnemonic 
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "context"
  "crypto/ed25519"
  "crypto/hmac"
  "crypto/sha512"
  "github.com/xssnick/tonutils-go/liteclient"
  "github.com/xssnick/tonutils-go/ton"
  "golang.org/x/crypto/pbkdf2"
  "log"
  "strings"
)

mnemonic := strings.Split("put your mnemonic", " ") // get our mnemonic as array

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection) // create client

block, err := client.CurrentMasterchainInfo(context.Background()) // get current block, we will need it in requests to LiteServer
if err != nil {
  log.Fatalln("CurrentMasterchainInfo err:", err.Error())
  return
}

getMethodResult, err := client.RunGetMethod(context.Background(), block, walletAddress, "seqno") // run "seqno" GET method from your wallet contract
if err != nil {
  log.Fatalln("RunGetMethod err:", err.Error())
  return
}
seqno := getMethodResult.MustInt(0) // get seqno from response

// The next three lines will extract the private key using the mnemonic phrase. We will not go into cryptographic details. With the tonutils-go library, this is all implemented, but we‚Äôre doing it again to get a full understanding.
mac := hmac.New(sha512.New, []byte(strings.Join(mnemonic, " ")))
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys

privateKey := ed25519.NewKeyFromSeed(k)
```

</TabItem>
</Tabs>

–ò—Ç–∞–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `seqno`, `keys` –∏ `internal message`. –¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å [—Å–æ–æ–±—â–µ–Ω–∏–µ](/v3/documentation/smart-contracts/message-management/sending-messages) –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –≤ —Ç–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –≤ –Ω–∞—á–∞–ª–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { sign } from '@ton/crypto';

let toSign = beginCell()
  .storeUint(698983191, 32) // subwallet_id | We consider this further
  .storeUint(Math.floor(Date.now() / 1e3) + 60, 32) // Message expiration time, +60 = 1 minute
  .storeUint(seqno, 32) // store seqno
  .storeUint(3, 8) // store mode of our internal message
  .storeRef(internalMessage); // store our internalMessage as a reference

let signature = sign(toSign.endCell().hash(), keyPair.secretKey); // get the hash of our message to wallet smart contract and sign it to get signature

let body = beginCell()
  .storeBuffer(signature) // store signature
  .storeBuilder(toSign) // store our message
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "time"
)

toSign := cell.BeginCell().
  MustStoreUInt(698983191, 32). // subwallet_id | We consider this further
  MustStoreUInt(uint64(time.Now().UTC().Unix()+60), 32). // Message expiration time, +60 = 1 minute
  MustStoreUInt(seqno.Uint64(), 32). // store seqno
  MustStoreUInt(uint64(3), 8). // store mode of our internal message
  MustStoreRef(internalMessage) // store our internalMessage as a reference

signature := ed25519.Sign(privateKey, toSign.EndCell().Hash()) // get the hash of our message to wallet smart contract and sign it to get signature

body := cell.BeginCell().
  MustStoreSlice(signature, 512). // store signature
  MustStoreBuilder(toSign). // store our message
  EndCell()
```

</TabItem>
</Tabs>

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∑–¥–µ—Å—å –≤ `toSign` –Ω–µ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ `.endCell()`. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ toSign –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è**. –ï—Å–ª–∏ –±—ã –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å –∑–∞–ø–∏—Å—å —è—á–µ–π–∫–∏, –µ–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã —Ö—Ä–∞–Ω–∏—Ç—å –≤ –≤–∏–¥–µ —Å—Å—ã–ª–∫–∏.

:::tip –ö–æ—à–µ–ª–µ–∫ V4
–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –±–∞–∑–æ–≤–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏–∑—É—á–∏–ª–∏ –¥–ª—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫–æ—à–µ–ª—å–∫–∞ V3, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ—à–µ–ª—å–∫–∞ V4 [–∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ–ø–∫–æ–¥, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –ø–ª–∞–≥–∏–Ω–æ–º](https://github.com/ton-blockchain/wallet-contract/blob/4111fd9e3313ec17d99ca9b5b1656445b5b49d8f/func/wallet-v4-code.fc#L94-L100). –ß—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `storeUint(0, 8)` (JS/TS), `MustStoreUInt(0, 8)` (Golang) –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ seqno –∏ –ø–µ—Ä–µ–¥ —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ–∂–∏–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
:::

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

–ß—Ç–æ–±—ã –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ª—é–±–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–ª–æ–∫—á–µ–π–Ω –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤–æ –≤–Ω–µ—à–Ω–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏. –ö–∞–∫ –º—ã —É–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ —Ä–∞–Ω–µ–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `ext_in_msg_info$10`, –ø–æ—Å–∫–æ–ª—å–∫—É —Ü–µ–ª—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞—à–µ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É. –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ω–∞—à –∫–æ—à–µ–ª–µ–∫:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
let externalMessage = beginCell()
  .storeUint(0b10, 2) // 0b10 -> 10 in binary
  .storeUint(0, 2) // src -> addr_none
  .storeAddress(walletAddress) // Destination address
  .storeCoins(0) // Import Fee
  .storeBit(0) // No State Init
  .storeBit(1) // We store Message Body as a reference
  .storeRef(body) // Store Message Body as a reference
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
externalMessage := cell.BeginCell().
  MustStoreUInt(0b10, 2). // 0b10 -> 10 in binary
  MustStoreUInt(0, 2). // src -> addr_none
  MustStoreAddr(walletAddress). // Destination address
  MustStoreCoins(0). // Import Fee
  MustStoreBoolBit(false). // No State Init
  MustStoreBoolBit(true). // We store Message Body as a reference
  MustStoreRef(body). // Store Message Body as a reference
  EndCell()
```

</TabItem>
</Tabs>

|   –ü–∞—Ä–∞–º–µ—Ç—Ä   |                                                                                                                                               –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                               |
| :----------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      Src     |    –ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è. –ü–æ—Å–∫–æ–ª—å–∫—É –≤—Ö–æ–¥—è—â–µ–µ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –≤ –Ω–µ–º –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 2 –Ω—É–ª–µ–≤—ã—Ö –±–∏—Ç–∞ (`addr_none` [TL-B](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L100))    |
|  Import Fee  |                                                                                                                        –ö–æ–º–∏—Å—Å–∏—è –¥–ª—è –æ–ø–ª–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞ –≤—Ö–æ–¥—è—â–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π                                                                                                                        |
|  State Init  | –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, `State Init` –≤–Ω—É—Ç—Ä–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞**. `State Init`, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤–º–µ—Å—Ç–µ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥—Ä—É–≥–æ–π |
| Message Body |                                                                                                   –¢–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –°–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É                                                                                                  |

:::tip 0b10
0b10 (b ‚Äì –¥–≤–æ–∏—á–Ω—ã–π) –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–≤–æ–∏—á–Ω—É—é –∑–∞–ø–∏—Å—å. –í —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–≤–∞ –±–∏—Ç–∞: `1` –∏ `0`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ —ç—Ç–æ `ext_in_msg_info$10`.
:::

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –≥–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—à–µ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É. –î–ª—è —ç—Ç–æ–≥–æ –µ–≥–æ –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ `BOC` ([Bag of Cells](/v3/documentation/data-formats/tlb/cell-boc#bag-of-cells)), –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–¥–∞:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
console.log(externalMessage.toBoc().toString("base64"))

client.sendFile(externalMessage.toBoc());
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "encoding/base64"
  "github.com/xssnick/tonutils-go/tl"
)

log.Println(base64.StdEncoding.EncodeToString(externalMessage.ToBOCWithFlags(false)))

var resp tl.Serializable
err = client.Client().QueryLiteserver(context.Background(), ton.SendMessage{Body: externalMessage.ToBOCWithFlags(false)}, &resp)

if err != nil {
  log.Fatalln(err.Error())
  return
}
```

</TabItem>
</Tabs>

> üí° –ü–æ–ª–µ–∑–Ω–∞—è —Å—Å—ã–ª–∫–∞:
>
> [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ Bag of Cells](/v3/documentation/data-formats/tlb/cell-boc#bag-of-cells)

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤—ã–≤–æ–¥ –Ω–∞—à–µ–≥–æ BOC –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ –Ω–∞—à –∫–æ—à–µ–ª–µ–∫. –°–∫–æ–ø–∏—Ä–æ–≤–∞–≤ —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ base64, –º–æ–∂–Ω–æ [–≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ö—ç—à —Å –ø–æ–º–æ—â—å—é toncenter](https://toncenter.com/api/v2/#/send/send_boc_return_hash_sendBocReturnHash_post).

## üëõ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞

–ú—ã –∏–∑—É—á–∏–ª–∏ –æ—Å–Ω–æ–≤—ã —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è –Ω–∞–º –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞. –†–∞–Ω–µ–µ –º—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–ª–∏ –∫–æ—à–µ–ª–µ–∫ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞, –Ω–æ —Ç–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ –≤—Ä—É—á–Ω—É—é.

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ (V3) —Å –Ω—É–ª—è. –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫—É—é —Ñ—Ä–∞–∑—É, –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ—à–µ–ª–µ–∫ —Å –ø–æ–º–æ—â—å—é –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ State Init (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è).

### –°–æ–∑–¥–∞–Ω–∏–µ –º–Ω–µ–º–æ–Ω–∏–∫–∏

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ ‚Äì —ç—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ` –∏ `–ø—É–±–ª–∏—á–Ω–æ–≥–æ` –∫–ª—é—á–µ–π. –ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫—É—é seed-—Ñ—Ä–∞–∑—É, –∞ –∑–∞—Ç–µ–º –∏–∑–≤–ª–µ—á—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á–∏ —Å –ø–æ–º–æ—â—å—é –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { mnemonicToWalletKey, mnemonicNew } from '@ton/crypto';

// const mnemonicArray = 'put your mnemonic'.split(' ') // get our mnemonic as array
const mnemonicArray = await mnemonicNew(24); // 24 is the number of words in a seed phrase
const keyPair = await mnemonicToWalletKey(mnemonicArray); // extract private and public keys from mnemonic
console.log(mnemonicArray) // if we want, we can print our mnemonic
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
	"crypto/ed25519"
	"crypto/hmac"
	"crypto/sha512"
	"log"
	"github.com/xssnick/tonutils-go/ton/wallet"
	"golang.org/x/crypto/pbkdf2"
	"strings"
)

// mnemonic := strings.Split("put your mnemonic", " ") // get our mnemonic as array
mnemonic := wallet.NewSeed() // get new mnemonic

// The following three lines will extract the private key using the mnemonic phrase. We will not go into cryptographic details. It has all been implemented in the tonutils-go library, but it immediately returns the finished object of the wallet with the address and ready methods. So we‚Äôll have to write the lines to get the key separately. Goland IDE will automatically import all required libraries (crypto, pbkdf2 and others).
mac := hmac.New(sha512.New, []byte(strings.Join(mnemonic, " "))) 
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len 

privateKey := ed25519.NewKeyFromSeed(k) // get private key
publicKey := privateKey.Public().(ed25519.PublicKey) // get public key from private key
log.Println(publicKey) // print publicKey so that at this stage the compiler does not complain that we do not use our variable
log.Println(mnemonic) // if we want, we can print our mnemonic
```

</TabItem>
</Tabs>

–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∫–æ—à–µ–ª—å–∫–∞.

:::danger –í–ê–ñ–ù–û
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–≤–µ—Å—Ç–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫—É—é seed-—Ñ—Ä–∞–∑—É –≤ –∫–æ–Ω—Å–æ–ª—å, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞—Ä—É –∫–ª—é—á–µ–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–¥–∞ –∫–æ—à–µ–ª—å–∫–∞ (–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ).
:::

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã subwallet

–û–¥–Ω–æ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ —Ç–æ–≥–æ, —á—Ç–æ –∫–æ—à–µ–ª—å–∫–∏ —è–≤–ª—è—é—Ç—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ ‚Äì —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å **–æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—à–µ–ª—å–∫–æ–≤**, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ–≥–æ –æ–¥–∏–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –∞–¥—Ä–µ—Å–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ TON –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≤–∫–ª—é—á–∞—è `stateInit`. StateInit —Å–æ–¥–µ—Ä–∂–∏—Ç `code` –∏ `initial data` (–ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –±–ª–æ–∫—á–µ–π–Ω–∞.

–ò–∑–º–µ–Ω–∏–≤ –≤—Å–µ–≥–æ –æ–¥–∏–Ω –±–∏—Ç –≤ `stateInit`, –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª —Å–æ–∑–¥–∞–Ω `subwallet_id`. `subwallet_id` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤ (—Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ subwallet) —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞ –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ—à–µ–ª—å–∫–æ–≤ —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –±–∏—Ä–∂–∏.

–ó–Ω–∞—á–µ–Ω–∏–µ `subwallet_id` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–Ω–æ `698983191`, —Å–æ–≥–ª–∞—Å–Ω–æ [—Å—Ç—Ä–æ–∫–µ –∫–æ–¥–∞](https://github.com/ton-blockchain/ton/blob/4b940f8bad9c2d3bf44f196f6995963c7cee9cc3/tonlib/tonlib/TonlibClient.cpp#L2420) –Ω–∏–∂–µ, –≤–∑—è—Ç–æ–π –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ TON Blockchain:

```cpp
res.wallet_id = td::as<td::uint32>(res.config.zero_state_id.root_hash.as_slice().data());
```

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª–æ–∫–µ genesis (`zero_state`) –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ [—Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](https://ton.org/global-config.json). –†–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ –≤ —ç—Ç–æ–º –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏–µ `subwallet_id` —Ä–∞–≤–Ω–æ `698983191`.

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –∫–∞–∂–¥–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª–µ `subwallet_id` –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –∫–æ—à–µ–ª–µ–∫ —Å –¥—Ä—É–≥–∏–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º:

```func
var (subwallet_id, valid_until, msg_seqno) = (cs~load_uint(32), cs~load_uint(32), cs~load_uint(32));
var (stored_seqno, stored_subwallet, public_key) = (ds~load_uint(32), ds~load_uint(32), ds~load_uint(256));
throw_unless(34, subwallet_id == stored_subwallet);
```

–ù—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `initial data` (–ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
const subWallet = 698983191;
```

</TabItem>
<TabItem value="go" label="Golang">

```go
var subWallet uint64 = 698983191
```

</TabItem>
</Tabs>

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞ –∫–æ—à–µ–ª—å–∫–∞

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á–∏, –∞ —Ç–∞–∫–∂–µ subwallet_id, –Ω—É–∂–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∫–æ—à–µ–ª—å–∫–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –∫–æ–¥–æ–º [wallet V3](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/wallet3-code.fc) –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

–ß—Ç–æ–±—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∫–æ—à–µ–ª—å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É [@ton-community/func-js](https://github.com/ton-community/func-js).
–° –ø–æ–º–æ—â—å—é —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–∂–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ FunC –∏ –ø–æ–ª—É—á–∏—Ç—å —è—á–µ–π–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é —ç—Ç–æ—Ç –∫–æ–¥. –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–µ –≤ `package.json` —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
npm i --save @ton-community/func-js
```

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–¥–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ JavaScript, –ø–æ—Å–∫–æ–ª—å–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–¥–∞ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ JavaScript.
–û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –ø–æ–∫–∞ —É –Ω–∞—Å –µ—Å—Ç—å **base64-–≤—ã–≤–æ–¥** –Ω–∞—à–µ–π —è—á–µ–π–∫–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ —Ç–∞–∫–∏—Ö —è–∑—ã–∫–∞—Ö, –∫–∞–∫ Go –∏ –¥—Ä—É–≥–∏—Ö.

–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞: `wallet_v3.fc` –∏ `stdlib.fc`. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `stdlib.fc`. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏ –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º `asm`, –µ—Å—Ç—å –≤ —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –§–∞–π–ª `stdlib.fc` –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å [–∑–¥–µ—Å—å](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/stdlib.fc). –í —Ñ–∞–π–ª `wallet_v3.fc` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –∫–æ–¥.

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```
.
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.ts
‚îÇ   ‚îú‚îÄ‚îÄ wallet_v3.fc
‚îÇ   ‚îî‚îÄ‚îÄ stdlib.fc
‚îú‚îÄ‚îÄ nodemon.json
‚îú‚îÄ‚îÄ package-lock.json
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

:::info
–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –µ—Å–ª–∏ IDE-–ø–ª–∞–≥–∏–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å `() set_seed(int) impure asm "SETRAND";` –≤ —Ñ–∞–π–ª–µ `stdlib.fc`.
:::

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ `wallet_v3.fc`, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –Ω–∏–∂–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `stdlib`:

```func
#include "stdlib.fc";
```

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –Ω–∞–ø–∏—à–µ–º –∫–æ–¥ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –∑–∞–ø—É—Å—Ç–∏–º –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `npm run start:dev`:

```js
import { compileFunc } from '@ton-community/func-js';
import fs from 'fs'; // we use fs for reading content of files
import { Cell } from '@ton/core';

const result = await compileFunc({
targets: ['wallet_v3.fc'], // targets of your project
sources: {
    "stdlib.fc": fs.readFileSync('./src/stdlib.fc', { encoding: 'utf-8' }),
    "wallet_v3.fc": fs.readFileSync('./src/wallet_v3.fc', { encoding: 'utf-8' }),
}
});

if (result.status === 'error') {
console.error(result.message)
return;
}

const codeCell = Cell.fromBoc(Buffer.from(result.codeBoc, "base64"))[0]; // get buffer from base64 encoded BOC and get cell from this buffer

// now we have base64 encoded BOC with compiled code in result.codeBoc
console.log('Code BOC: ' + result.codeBoc);
console.log('\nHash: ' + codeCell.hash().toString('base64')); // get the hash of cell and convert in to base64 encoded string. We will need it further
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:

```text
Code BOC: te6ccgEBCAEAhgABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQCW8oMI1xgg0x/TH9MfAvgju/Jj7UTQ0x/TH9P/0VEyuvKhUUS68qIE+QFUEFX5EPKj+ACTINdKltMH1AL7AOgwAaTIyx/LH8v/ye1UAATQMAIBSAYHABe7Oc7UTQ0z8x1wv/gAEbjJftRNDXCx+A==

Hash: idlku00WfSC36ujyK2JVT92sMBEpCNRUXOGO4sJVBPA=
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç—É –∂–µ —Å–∞–º—É—é —è—á–µ–π–∫—É (–∏—Å–ø–æ–ª—å–∑—É—è –≤—ã–≤–æ–¥ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ base64) —Å –ø–æ–º–æ—â—å—é –∫–æ–¥–∞ –∫–æ—à–µ–ª—å–∫–∞, –∏—Å–ø–æ–ª—å–∑—É—è –¥—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —è–∑—ã–∫–∏:

<Tabs groupId="code-examples">
<TabItem value="go" label="Golang">

```go
import (
  "encoding/base64"
  "github.com/xssnick/tonutils-go/tvm/cell"
)

base64BOC := "te6ccgEBCAEAhgABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQCW8oMI1xgg0x/TH9MfAvgju/Jj7UTQ0x/TH9P/0VEyuvKhUUS68qIE+QFUEFX5EPKj+ACTINdKltMH1AL7AOgwAaTIyx/LH8v/ye1UAATQMAIBSAYHABe7Oc7UTQ0z8x1wv/gAEbjJftRNDXCx+A==" // save our base64 encoded output from compiler to variable
codeCellBytes, _ := base64.StdEncoding.DecodeString(base64BOC) // decode base64 in order to get byte array
codeCell, err := cell.FromBOC(codeCellBytes) // get cell with code from byte array
if err != nil { // check if there are any error
  panic(err) 
}

log.Println("Hash:", base64.StdEncoding.EncodeToString(codeCell.Hash())) // get the hash of our cell, encode it to base64 because it has []byte type and output to the terminal
```

</TabItem>
</Tabs>

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:

```text
idlku00WfSC36ujyK2JVT92sMBEpCNRUXOGO4sJVBPA=
```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –≤ –Ω–∞—à–µ–π —è—á–µ–π–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥, –ø–æ—Å–∫–æ–ª—å–∫—É —Ö—ç—à–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç.

### –°–æ–∑–¥–∞–Ω–∏–µ State Init –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü—Ä–µ–∂–¥–µ —á–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤–∞–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Ç–∞–∫–æ–µ State Init. –î–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–µ–º—Å—è –ø–æ [—Å—Ö–µ–º–µ TL-B](https://github.com/ton-blockchain/ton/blob/24dc184a2ea67f9c47042b4104bbb4d82289fac1/crypto/block/block.tlb#L141-L143):

|             –ü–∞—Ä–∞–º–µ—Ç—Ä             |                                                                                                                                                                                                                                                               –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                              |
| :------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| split_depth | –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö [—à–∞—Ä–¥—á–µ–π–Ω–∞—Ö](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains#–º–Ω–æ–∂–µ—Å—Ç–≤–æ-accountchains-—à–∞—Ä–¥—ã).  –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [tblkch.pdf](https://ton.org/tblkch.pdf) (4.1.6).  –•—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∏—Ç `0`, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞ |
|              special             |       –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è TicTok. –≠—Ç–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [—ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ](/v3/documentation/data-formats/tlb/transaction-layout#tick-tock) –∏–ª–∏ –≤ [tblkch.pdf](https://ton.org/tblkch.pdf) (4.1.6). –í –¥–∞–Ω–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∏—Ç `0`, –ø–æ—Å–∫–æ–ª—å–∫—É —Ç–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–º –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è      |
|               code               |                                                                                                                                                                                                                                   –ë–∏—Ç `1` –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Å—ã–ª–∫–∏                                                                                                                                                                                                                                   |
|               data               |                                                                                                                                                                                                                                  –ë–∏—Ç `1` –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Å—ã–ª–∫–∏                                                                                                                                                                                                                                  |
|              library             |                                –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å [–º–∞—Å—Ç–µ—Ä—á–µ–π–Ω–æ–º](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains#–º–∞—Å—Ç–µ—Ä—á–µ–π–Ω-–±–ª–æ–∫—á–µ–π–Ω-–±–ª–æ–∫—á–µ–π–Ω–æ–≤) –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏. –û–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞, –ø–æ—ç—Ç–æ–º—É –±–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `0`. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [tblkch.pdf](https://ton.org/tblkch.pdf) (1.8.4)                               |

–î–∞–ª–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º `initial data` (–ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { beginCell } from '@ton/core';

const dataCell = beginCell()
  .storeUint(0, 32) // Seqno
  .storeUint(698983191, 32) // Subwallet ID
  .storeBuffer(keyPair.publicKey) // Public Key
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
dataCell := cell.BeginCell().
  MustStoreUInt(0, 32). // Seqno
  MustStoreUInt(698983191, 32). // Subwallet ID
  MustStoreSlice(publicKey, 256). // Public Key
  EndCell()
```

</TabItem>
</Tabs>

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫ `code` –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, —Ç–∞–∫ –∏ `initial data`. –° –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–∞—à **–∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞**. –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `State Init`, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∫–æ–¥ –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address } from '@ton/core';

const stateInit = beginCell()
  .storeBit(0) // No split_depth
  .storeBit(0) // No special
  .storeBit(1) // We have code
  .storeRef(codeCell)
  .storeBit(1) // We have data
  .storeRef(dataCell)
  .storeBit(0) // No library
  .endCell();

const contractAddress = new Address(0, stateInit.hash()); // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
console.log(`Contract address: ${contractAddress.toString()}`); // Output contract address to console
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/address"
)

stateInit := cell.BeginCell().
  MustStoreBoolBit(false). // No split_depth
  MustStoreBoolBit(false). // No special
  MustStoreBoolBit(true). // We have code
  MustStoreRef(codeCell).
  MustStoreBoolBit(true). // We have data
  MustStoreRef(dataCell).
  MustStoreBoolBit(false). // No library
  EndCell()

contractAddress := address.NewAddress(0, 0, stateInit.Hash()) // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
log.Println("Contract address:", contractAddress.String()) // Output contract address to console
```

</TabItem>
</Tabs>

–ò—Å–ø–æ–ª—å–∑—É—è `State Init`, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ –±–ª–æ–∫—á–µ–π–Ω.

:::warning
To carry out this process, **a minimum wallet balance of 0.1 TON** is required (the balance can be less, but this amount is guaranteed to be sufficient). To accomplish this, we‚Äôll need to run the code mentioned earlier in the tutorial, obtain the correct wallet address, and send 0.1 TON to this address. Alternatively, you can send this sum manually via your wallet app before sending the deployment message itself.

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∑–¥–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ [—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª—å–∫–∏](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞-—á–µ—Ä–µ–∑-–∫–æ—à–µ–ª–µ–∫), —á—Ç–æ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–æ –ø–æ–∑–∂–µ.
:::

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ —Ç–æ–º—É, –∫–æ—Ç–æ—Ä–æ–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ **–≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ**:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { sign } from '@ton/crypto';
import { toNano } from '@ton/core';

const internalMessageBody = beginCell()
  .storeUint(0, 32)
  .storeStringTail("Hello, TON!")
  .endCell();

const internalMessage = beginCell()
  .storeUint(0x10, 6) // no bounce
  .storeAddress(Address.parse("put your first wallet address from were you sent 0.1 TON"))
  .storeCoins(toNano("0.03"))
  .storeUint(1, 1 + 4 + 4 + 64 + 32 + 1 + 1) // We store 1 that means we have body as a reference
  .storeRef(internalMessageBody)
  .endCell();

// message for our wallet
const toSign = beginCell()
  .storeUint(subWallet, 32)
  .storeUint(Math.floor(Date.now() / 1e3) + 60, 32)
  .storeUint(0, 32) // We put seqno = 0, because after deploying wallet will store 0 as seqno
  .storeUint(3, 8)
  .storeRef(internalMessage);

const signature = sign(toSign.endCell().hash(), keyPair.secretKey);
const body = beginCell()
  .storeBuffer(signature)
  .storeBuilder(toSign)
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/tlb"
  "time"
)

internalMessageBody := cell.BeginCell().
  MustStoreUInt(0, 32).
  MustStoreStringSnake("Hello, TON!").
  EndCell()

internalMessage := cell.BeginCell().
  MustStoreUInt(0x10, 6). // no bounce
  MustStoreAddr(address.MustParseAddr("put your first wallet address from were you sent 0.1 TON")).
  MustStoreBigCoins(tlb.MustFromTON("0.03").NanoTON()).
  MustStoreUInt(1, 1 + 4 + 4 + 64 + 32 + 1 + 1). // We store 1 that means we have body as a reference
  MustStoreRef(internalMessageBody).
  EndCell()

// message for our wallet
toSign := cell.BeginCell().
  MustStoreUInt(subWallet, 32).
  MustStoreUInt(uint64(time.Now().UTC().Unix()+60), 32).
  MustStoreUInt(0, 32). // We put seqno = 0, because after deploying wallet will store 0 as seqno
  MustStoreUInt(3, 8).
  MustStoreRef(internalMessage)

signature := ed25519.Sign(privateKey, toSign.EndCell().Hash())
body := cell.BeginCell().
  MustStoreSlice(signature, 512).
  MustStoreBuilder(toSign).
	EndCell()
```

</TabItem>
</Tabs>

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `State Init` –∏ `Message Body`.

### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ** –±—É–¥–µ—Ç –∑–∞–∫–ª—é—á–∞—Ç—å—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ—Å–∫–æ–ª—å–∫—É State Init —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ü–æ—Å–∫–æ–ª—å–∫—É —É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –µ—â–µ –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∏–∫–∞–∫–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–æ—ç—Ç–æ–º—É –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º –µ–≥–æ –∫–æ–¥ –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ **–ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç, —á—Ç–æ–±—ã –æ–Ω —Å–º–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º "Hello, TON!":

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
const externalMessage = beginCell()
  .storeUint(0b10, 2) // indicate that it is an incoming external message
  .storeUint(0, 2) // src -> addr_none
  .storeAddress(contractAddress)
  .storeCoins(0) // Import fee
  .storeBit(1) // We have State Init
  .storeBit(1) // We store State Init as a reference
  .storeRef(stateInit) // Store State Init as a reference
  .storeBit(1) // We store Message Body as a reference
  .storeRef(body) // Store Message Body as a reference
  .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
externalMessage := cell.BeginCell().
  MustStoreUInt(0b10, 2). // indicate that it is an incoming external message
  MustStoreUInt(0, 2). // src -> addr_none
  MustStoreAddr(contractAddress).
  MustStoreCoins(0). // Import fee
  MustStoreBoolBit(true). // We have State Init
  MustStoreBoolBit(true).  // We store State Init as a reference
  MustStoreRef(stateInit). // Store State Init as a reference
  MustStoreBoolBit(true). // We store Message Body as a reference
  MustStoreRef(body). // Store Message Body as a reference
  EndCell()
```

</TabItem>
</Tabs>

–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ, –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–ª–æ–∫—á–µ–π–Ω, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ—à–µ–ª–µ–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';

const client = new TonClient({
  endpoint: "https://toncenter.com/api/v2/jsonRPC",
  apiKey: "put your api key" // you can get an api key from @tonapibot bot in Telegram
});

client.sendFile(externalMessage.toBoc());
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "context"
  "github.com/xssnick/tonutils-go/liteclient"
  "github.com/xssnick/tonutils-go/tl"
  "github.com/xssnick/tonutils-go/ton"
)

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection)

var resp tl.Serializable
err = client.Client().QueryLiteserver(context.Background(), ton.SendMessage{Body: externalMessage.ToBOCWithFlags(false)}, &resp)
if err != nil {
  log.Fatalln(err.Error())
  return
}
```

</TabItem>
</Tabs>

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–∂–∏–º `3`. –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∫–æ—à–µ–ª—å–∫–∞, **—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å**. –î–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–µ–∂–∏–º, –¥–æ–±–∞–≤–∏–≤ 128 (–∑–∞–±—Ä–∞—Ç—å –≤–µ—Å—å –±–∞–ª–∞–Ω—Å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞) + 32 (—É–Ω–∏—á—Ç–æ–∂–∏—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç), —á—Ç–æ —Å–æ—Å—Ç–∞–≤–∏—Ç = `160` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –±–∞–ª–∞–Ω—Å–∞ TON –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞.

–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ **seqno –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É**.

:::info
–ö–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ‚Äì [–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω](https://tonscan.org/tx/BL9T1i5DjX1JRLUn4z9JOgOWRKWQ80pSNevis26hGvc=), –ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∑–¥–µ—Å—å](https://tonscan.org/address/EQDBjzo_iQCZh3bZSxFnK9ue4hLTOKgsCNKfC8LOUM4SlSCX#source).
:::

## üí∏ –†–∞–±–æ—Ç–∞ —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∫–æ—à–µ–ª—å–∫–∞

–¢–µ–ø–µ—Ä—å –º—ã –≥–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ –∑–Ω–∞–∫–æ–º—ã —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∫–æ—à–µ–ª—å–∫–∞, —Å —Ç–µ–º –∫–∞–∫ –æ–Ω–∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –ú—ã –Ω–∞—É—á–∏–ª–∏—Å—å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏ —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –∞ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –í —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–æ, —á—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏ –≤—ã—à–µ.

### –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

–ö–∞–∫ –≤—ã, –≤–æ–∑–º–æ–∂–Ω–æ, —É–∂–µ –∑–Ω–∞–µ—Ç–µ, [–æ–¥–Ω–∞ —è—á–µ–π–∫–∞ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –¥–æ 1023 –±–∏—Ç –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ 4 —Å—Å—ã–ª–æ–∫](/v3/documentation/data-formats/tlb/cell-boc#cell) –Ω–∞ –¥—Ä—É–≥–∏–µ —è—á–µ–π–∫–∏. –†–∞–Ω–µ–µ –º—ã –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–ª–∏, –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤ "–ø–æ–ª–Ω–æ–º" —Ü–∏–∫–ª–µ –≤ –≤–∏–¥–µ —Å—Å—ã–ª–∫–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–Ω–æ **—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ 4 –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ç—ã—Ä–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

–î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å 4 —Ä–∞–∑–Ω—ã—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è. –ú—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞ ‚Äì `loop`. –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å 3 –º–∞—Å—Å–∏–≤–∞: –º–∞—Å—Å–∏–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ TON, –º–∞—Å—Å–∏–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π. –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –µ—â–µ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤ ‚Äì internalMessages.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Cell } from '@ton/core';

const internalMessagesAmount = ["0.01", "0.02", "0.03", "0.04"];
const internalMessagesComment = [
  "Hello, TON! #1",
  "Hello, TON! #2",
  "", // Let's leave the third message without comment
  "Hello, TON! #4" 
]
const destinationAddresses = [
  "Put any address that belongs to you",
  "Put any address that belongs to you",
  "Put any address that belongs to you",
  "Put any address that belongs to you"
] // All 4 addresses can be the same

let internalMessages:Cell[] = []; // array for our internal messages
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/tvm/cell"
)

internalMessagesAmount := [4]string{"0.01", "0.02", "0.03", "0.04"}
internalMessagesComment := [4]string{
  "Hello, TON! #1",
  "Hello, TON! #2",
  "", // Let's leave the third message without comment
  "Hello, TON! #4",
}
destinationAddresses := [4]string{
  "Put any address that belongs to you",
  "Put any address that belongs to you",
  "Put any address that belongs to you",
  "Put any address that belongs to you",
} // All 4 addresses can be the same

var internalMessages [len(internalMessagesAmount)]*cell.Cell // array for our internal messages
```

</TabItem>
</Tabs>

[–†–µ–∂–∏–º –æ—Ç–ø—Ä–∞–≤–∫–∏](/v3/documentation/smart-contracts/message-management/sending-messages#—Ä–µ–∂–∏–º—ã-—Å–æ–æ–±—â–µ–Ω–∏–π) –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `mode 3`.  –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ü–µ–ª–µ–π.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address, beginCell, toNano } from '@ton/core';

for (let index = 0; index < internalMessagesAmount.length; index++) {
  const amount = internalMessagesAmount[index];
  
  let internalMessage = beginCell()
      .storeUint(0x18, 6) // bounce
      .storeAddress(Address.parse(destinationAddresses[index]))
      .storeCoins(toNano(amount))
      .storeUint(0, 1 + 4 + 4 + 64 + 32 + 1);
      
  /*
      At this stage, it is not clear if we will have a message body. 
      So put a bit only for stateInit, and if we have a comment, in means 
      we have a body message. In that case, set the bit to 1 and store the 
      body as a reference.
  */

  if(internalMessagesComment[index] != "") {
    internalMessage.storeBit(1) // we store Message Body as a reference

    let internalMessageBody = beginCell()
      .storeUint(0, 32)
      .storeStringTail(internalMessagesComment[index])
      .endCell();

    internalMessage.storeRef(internalMessageBody);
  } 
  else 
    /*
        Since we do not have a message body, we indicate that 
        the message body is in this message, but do not write it, 
        which means it is absent. In that case, just set the bit to 0.
    */
    internalMessage.storeBit(0);
  
  internalMessages.push(internalMessage.endCell());
}
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/tlb"
)

for i := 0; i < len(internalMessagesAmount); i++ {
  amount := internalMessagesAmount[i]

  internalMessage := cell.BeginCell().
    MustStoreUInt(0x18, 6). // bounce
    MustStoreAddr(address.MustParseAddr(destinationAddresses[i])).
    MustStoreBigCoins(tlb.MustFromTON(amount).NanoTON()).
    MustStoreUInt(0, 1+4+4+64+32+1)

  /*
      At this stage, it is not clear if we will have a message body. 
      So put a bit only for stateInit, and if we have a comment, in means 
      we have a body message. In that case, set the bit to 1 and store the 
      body as a reference.
  */

  if internalMessagesComment[i] != "" {
    internalMessage.MustStoreBoolBit(true) // we store Message Body as a reference

    internalMessageBody := cell.BeginCell().
      MustStoreUInt(0, 32).
      MustStoreStringSnake(internalMessagesComment[i]).
      EndCell()

    internalMessage.MustStoreRef(internalMessageBody)
  } else {
    /*
        Since we do not have a message body, we indicate that
        the message body is in this message, but do not write it,
        which means it is absent. In that case, just set the bit to 0.
    */
    internalMessage.MustStoreBoolBit(false)
  }
  internalMessages[i] = internalMessage.EndCell()
}
```

</TabItem>
</Tabs>

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ –∏–∑ [–ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞](#-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–∫–æ—à–µ–ª—å–∫–∞), —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å 4 —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';
import { mnemonicToWalletKey } from '@ton/crypto';

const walletAddress = Address.parse('put your wallet address');
const client = new TonClient({
  endpoint: "https://toncenter.com/api/v2/jsonRPC",
  apiKey: "put your api key" // you can get an api key from @tonapibot bot in Telegram
});

const mnemonic = 'put your mnemonic'; // word1 word2 word3
let getMethodResult = await client.runMethod(walletAddress, "seqno"); // run "seqno" GET method from your wallet contract
let seqno = getMethodResult.stack.readNumber(); // get seqno from response

const mnemonicArray = mnemonic.split(' '); // get array from string
const keyPair = await mnemonicToWalletKey(mnemonicArray); // get Secret and Public keys from mnemonic 

let toSign = beginCell()
  .storeUint(698983191, 32) // subwallet_id
  .storeUint(Math.floor(Date.now() / 1e3) + 60, 32) // Message expiration time, +60 = 1 minute
  .storeUint(seqno, 32); // store seqno
  // Do not forget that if we use Wallet V4, we need to add .storeUint(0, 8) 
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
	"context"
	"crypto/ed25519"
	"crypto/hmac"
	"crypto/sha512"
	"github.com/xssnick/tonutils-go/liteclient"
	"github.com/xssnick/tonutils-go/ton"
	"golang.org/x/crypto/pbkdf2"
	"log"
	"strings"
	"time"
)

walletAddress := address.MustParseAddr("put your wallet address")

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection)

mnemonic := strings.Split("put your mnemonic", " ") // word1 word2 word3
// The following three lines will extract the private key using the mnemonic phrase.
// We will not go into cryptographic details. In the library tonutils-go, it is all implemented,
// but it immediately returns the finished object of the wallet with the address and ready-made methods.
// So we‚Äôll have to write the lines to get the key separately. Goland IDE will automatically import
// all required libraries (crypto, pbkdf2 and others).
mac := hmac.New(sha512.New, []byte(strings.Join(mnemonic, " ")))
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len
privateKey := ed25519.NewKeyFromSeed(k)              // get private key

block, err := client.CurrentMasterchainInfo(context.Background()) // get current block, we will need it in requests to LiteServer
if err != nil {
  log.Fatalln("CurrentMasterchainInfo err:", err.Error())
  return
}

getMethodResult, err := client.RunGetMethod(context.Background(), block, walletAddress, "seqno") // run "seqno" GET method from your wallet contract
if err != nil {
  log.Fatalln("RunGetMethod err:", err.Error())
  return
}
seqno := getMethodResult.MustInt(0) // get seqno from response

toSign := cell.BeginCell().
  MustStoreUInt(698983191, 32). // subwallet_id | We consider this further
  MustStoreUInt(uint64(time.Now().UTC().Unix()+60), 32). // message expiration time, +60 = 1 minute
  MustStoreUInt(seqno.Uint64(), 32) // store seqno
  // Do not forget that if we use Wallet V4, we need to add MustStoreUInt(0, 8). 
```

</TabItem>
</Tabs>

–î–∞–ª–µ–µ –¥–æ–±–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–Ω–µ–µ –≤ —Ü–∏–∫–ª–µ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
for (let index = 0; index < internalMessages.length; index++) {
  const internalMessage = internalMessages[index];
  toSign.storeUint(3, 8) // store mode of our internal message
  toSign.storeRef(internalMessage) // store our internalMessage as a reference
}
```

</TabItem>
<TabItem value="go" label="Golang">

```go
for i := 0; i < len(internalMessages); i++ {
		internalMessage := internalMessages[i]
		toSign.MustStoreUInt(3, 8) // store mode of our internal message
		toSign.MustStoreRef(internalMessage) // store our internalMessage as a reference
}
```

</TabItem>
</Tabs>

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –¥–∞–≤–∞–π—Ç–µ **–ø–æ–¥–ø–∏—à–µ–º** –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, **—Å–æ–∑–¥–∞–¥–∏–º –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** (–∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞) –∏ **–æ—Ç–ø—Ä–∞–≤–∏–º –µ–≥–æ** –≤ –±–ª–æ–∫—á–µ–π–Ω:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { sign } from '@ton/crypto';

let signature = sign(toSign.endCell().hash(), keyPair.secretKey); // get the hash of our message to wallet smart contract and sign it to get signature

let body = beginCell()
    .storeBuffer(signature) // store signature
    .storeBuilder(toSign) // store our message
    .endCell();

let externalMessage = beginCell()
    .storeUint(0b10, 2) // ext_in_msg_info$10
    .storeUint(0, 2) // src -> addr_none
    .storeAddress(walletAddress) // Destination address
    .storeCoins(0) // Import Fee
    .storeBit(0) // No State Init
    .storeBit(1) // We store Message Body as a reference
    .storeRef(body) // Store Message Body as a reference
    .endCell();

client.sendFile(externalMessage.toBoc());
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/tl"
)

signature := ed25519.Sign(privateKey, toSign.EndCell().Hash()) // get the hash of our message to wallet smart contract and sign it to get signature

body := cell.BeginCell().
  MustStoreSlice(signature, 512). // store signature
  MustStoreBuilder(toSign). // store our message
  EndCell()

externalMessage := cell.BeginCell().
  MustStoreUInt(0b10, 2). // ext_in_msg_info$10
  MustStoreUInt(0, 2). // src -> addr_none
  MustStoreAddr(walletAddress). // Destination address
  MustStoreCoins(0). // Import Fee
  MustStoreBoolBit(false). // No State Init
  MustStoreBoolBit(true). // We store Message Body as a reference
  MustStoreRef(body). // Store Message Body as a reference
  EndCell()

var resp tl.Serializable
err = client.Client().QueryLiteserver(context.Background(), ton.SendMessage{Body: externalMessage.ToBOCWithFlags(false)}, &resp)

if err != nil {
  log.Fatalln(err.Error())
  return
}
```

</TabItem>
</Tabs>

:::info –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ lite-—Å–µ—Ä–≤–µ—Ä—É (Golang), –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ tonutils-go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö lite-—Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞ –≤ –∫–æ–¥–µ. –û–¥–Ω–∞–∫–æ –Ω–µ –≤—Å–µ lite-—Å–µ—Ä–≤–µ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω—è—Ç—å –Ω–∞—à–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
:::

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ–±–æ–∑—Ä–µ–≤–∞—Ç–µ–ª–µ–º –±–ª–æ–∫—á–µ–π–Ω–∞ TON, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ—à–µ–ª–µ–∫ –æ—Ç–ø—Ä–∞–≤–∏–ª —á–µ—Ç—ã—Ä–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ –∞–¥—Ä–µ—Å–∞.

### –ü–µ—Ä–µ–¥–∞—á–∞ NFT

–ü–æ–º–∏–º–æ –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–∞—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É NFT. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –º–µ—Ç–æ–¥—ã, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º —Ç–∏–ø–æ–º —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –≤—ã—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ NFT. –î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å [NFT-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º](https://github.com/ton-blockchain/TEPs/blob/master/text/0062-nft-standard.md) TON.

–î–∞–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å—Ö–µ–º—É TL-B –¥–ª—è [NFT Transfers](https://github.com/ton-blockchain/TEPs/blob/master/text/0062-nft-standard.md#1-transfer):

- `query_id` ‚Äì –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –ö–æ–Ω—Ç—Ä–∞–∫—Ç NFT –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –µ–≥–æ, –∞ —Ç–æ–ª—å–∫–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç. –ó–Ω–∞—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å —Ö–æ—á–µ—Ç –ø—Ä–∏—Å–≤–æ–∏—Ç—å –∫–∞–∂–¥–æ–º—É —Å–≤–æ–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π ID –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü–æ—ç—Ç–æ–º—É –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ–≥–æ –≤ 0.

- `response_destination` ‚Äì –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–æ—è–≤—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ TON. –û–Ω–∏ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É, –µ—Å–ª–∏ –æ–Ω —É–∫–∞–∑–∞–Ω, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å–µ NFT.

- `custom_payload` ‚Äì –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –æ–±—ã—á–Ω—ã–º–∏ NFT.

- `forward_amount` ‚Äì –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ forward_amount –Ω–µ —Ä–∞–≤–Ω–æ –Ω—É–ª—é, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–æ–≤—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω –æ —Ç–æ–º, —á—Ç–æ –æ–Ω —á—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏–ª.

- `forward_payload` ‚Äì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–æ–≤–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É –≤–º–µ—Å—Ç–µ —Å `forward_amount`. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `forward_payload` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º [–¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ NFT](https://github.com/ton-blockchain/TEPs/blob/master/text/0062-nft-standard.md#forward_payload-format), –∫–∞–∫ –±—ã–ª–æ –æ—Ç–º–µ—á–µ–Ω–æ –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ —Ä–∞–Ω–µ–µ. –û–¥–Ω–∞–∫–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ `forward_payload` –Ω–∞–ø–∏—Å–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ TON –¥–ª—è NFT, –±–ª–æ–∫—á–µ–π–Ω-–æ–±–æ–∑—Ä–µ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π. –¢–∞–∫–∞—è –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∂–µ—Ç–æ–Ω–æ–≤.

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address, beginCell, toNano } from '@ton/core';

const destinationAddress = Address.parse("put your wallet where you want to send NFT");
const walletAddress = Address.parse("put your wallet which is the owner of NFT")
const nftAddress = Address.parse("put your nft address");

// We can add a comment, but it will not be displayed in the explorers, 
// as it is not supported by them at the time of writing the tutorial.
const forwardPayload = beginCell()
  .storeUint(0, 32)
  .storeStringTail("Hello, TON!")
  .endCell();

const transferNftBody = beginCell()
  .storeUint(0x5fcc3d14, 32) // Opcode for NFT transfer
  .storeUint(0, 64) // query_id
  .storeAddress(destinationAddress) // new_owner
  .storeAddress(walletAddress) // response_destination for excesses
  .storeBit(0) // we do not have custom_payload
  .storeCoins(toNano("0.01")) // forward_amount
  .storeBit(1) // we store forward_payload as a reference
  .storeRef(forwardPayload) // store forward_payload as a .reference
  .endCell();

const internalMessage = beginCell().
  storeUint(0x18, 6). // bounce
  storeAddress(nftAddress).
  storeCoins(toNano("0.05")).
  storeUint(1, 1 + 4 + 4 + 64 + 32 + 1 + 1). // We store 1 that means we have body as a reference
  storeRef(transferNftBody).
  endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/tlb"
  "github.com/xssnick/tonutils-go/tvm/cell"
)

destinationAddress := address.MustParseAddr("put your wallet where you want to send NFT")
walletAddress := address.MustParseAddr("put your wallet which is the owner of NFT")
nftAddress := address.MustParseAddr("put your nft address")

// We can add a comment, but it will not be displayed in the explorers,
// as it is not supported by them at the time of writing the tutorial.
forwardPayload := cell.BeginCell().
  MustStoreUInt(0, 32).
  MustStoreStringSnake("Hello, TON!").
  EndCell()

transferNftBody := cell.BeginCell().
  MustStoreUInt(0x5fcc3d14, 32). // Opcode for NFT transfer
  MustStoreUInt(0, 64). // query_id
  MustStoreAddr(destinationAddress). // new_owner
  MustStoreAddr(walletAddress). // response_destination for excesses
  MustStoreBoolBit(false). // we do not have custom_payload
  MustStoreBigCoins(tlb.MustFromTON("0.01").NanoTON()). // forward_amount
  MustStoreBoolBit(true). // we store forward_payload as a reference
  MustStoreRef(forwardPayload). // store forward_payload as a reference
  EndCell()

internalMessage := cell.BeginCell().
  MustStoreUInt(0x18, 6). // bounce
  MustStoreAddr(nftAddress).
  MustStoreBigCoins(tlb.MustFromTON("0.05").NanoTON()).
  MustStoreUInt(1, 1 + 4 + 4 + 64 + 32 + 1 + 1). // We store 1 that means we have body as a reference
  MustStoreRef(transferNftBody).
  EndCell()
```

</TabItem>
</Tabs>

–û–ø–∫–æ–¥ –ø–µ—Ä–µ–¥–∞—á–∏ NFT –≤–∑—è—Ç –∏–∑ [—Ç–æ–≥–æ –∂–µ —Å–∞–º–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞](https://github.com/ton-blockchain/TEPs/blob/master/text/0062-nft-standard.md#tl-b-schema).
–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –∑–∞–≤–µ—Ä—à–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–∞–∫ –±—ã–ª–æ –∏–∑–ª–æ–∂–µ–Ω–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞. –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub](/v3/guidelines/smart-contracts/howto/wallet#-–∏—Å—Ö–æ–¥–Ω—ã–π-–∫–æ–¥).

–¢–∞–∫—É—é –∂–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—É –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏ —Å –∂–µ—Ç–æ–Ω–∞–º–∏. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —á–∏—Ç–∞–π—Ç–µ –≤ TL-B-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ –æ –ø–µ—Ä–µ–≤–æ–¥–µ –∂–µ—Ç–æ–Ω–æ–≤ [jetton-standart](https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md). –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–µ—Ä–µ–¥–∞—á–µ–π NFT –∏ –∂–µ—Ç–æ–Ω–æ–≤.

### GET-–º–µ—Ç–æ–¥—ã –∫–æ—à–µ–ª—å–∫–∞ V3 –∏ V4

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç [GET-–º–µ—Ç–æ–¥—ã](/v3/guidelines/smart-contracts/get-methods), –æ–¥–Ω–∞–∫–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫—á–µ–π–Ω–∞. GET-–º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–æ–¥ [get_nft_data() –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö NFT](https://github.com/ton-blockchain/token-contract/blob/991bdb4925653c51b0b53ab212c53143f71f5476/nft/nft-item.fc#L142-L145) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ, –∫–æ–ª–ª–µ–∫—Ü–∏–∏ NFT, —Å–æ–¥–µ—Ä–∂–∏–º–æ–º `content`.

–ù–∏–∂–µ –º—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ GET-–º–µ—Ç–æ–¥–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –≤ [V3](https://github.com/ton-blockchain/ton/blob/e37583e5e6e8cd0aebf5142ef7d8db282f10692b/crypto/smartcont/wallet3-code.fc#L31-L41) –∏ [V4](https://github.com/ton-blockchain/wallet-contract/blob/4111fd9e3313ec17d99ca9b5b1656445b5b49d8f/func/wallet-v4-code.fc#L164-L198). –ù–∞—á–Ω–µ–º —Å –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã –¥–ª—è –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π –∫–æ—à–µ–ª—å–∫–∞:

|                                       –ú–µ—Ç–æ–¥                                       |                                                                                                                                                                      –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                      |
| :-------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|                           int seqno()                          |                                                                             –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ seqno –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–ª—Å—è –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.                                                                             |
| int get_public_key() | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. –ú–µ—Ç–æ–¥ get_public_key() –Ω–µ –∏–º–µ–µ—Ç —à–∏—Ä–æ–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ API-—Å–µ—Ä–≤–∏—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ—à–µ–ª—å–∫–æ–≤ —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º |

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–π–¥–µ–º –∫ –º–µ—Ç–æ–¥–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ—à–µ–ª–µ–∫ V4:

|                                                               –ú–µ—Ç–æ–¥                                                              |                                                                                                                                    –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                   |
| :------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|                        int get_subwallet_id()                       |                                                                     –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –º—ã —É–∂–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ, –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å subwallet_id ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä subwallet                                                                    |
| int is_plugin_installed(int wc, int addr_hash) | –ù—É–∂–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –±–ª–æ–∫—á–µ–π–Ω –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–ª–∞–≥–∏–Ω–∞. –î–ª—è –≤—ã–∑–æ–≤–∞ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å [–≤–æ—Ä–∫—á–µ–π–Ω](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains#–≤–æ—Ä–∫—á–µ–π–Ω-–±–ª–æ–∫—á–µ–π–Ω-—Å-–≤–∞—à–∏–º–∏-—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏-–ø—Ä–∞–≤–∏–ª–∞–º–∏) –∏ —Ö—ç—à –∞–¥—Ä–µ—Å–∞ –ø–ª–∞–≥–∏–Ω–∞ |
|                       tuple get_plugin_list()                       |                                                                                                                    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤                                                                                                                    |

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–µ—Ç–æ–¥—ã `get_public_key` –∏ `is_plugin_installed`. –≠—Ç–∏ –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –±—ã–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –¥–∞–Ω–Ω—ã—Ö –¥–ª–∏–Ω–æ–π 256 –±–∏—Ç, –∞ –∑–∞—Ç–µ–º –Ω–∞—É—á–∏—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å *slice* ‚Äì —Å—Ä–µ–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ GET-–º–µ—Ç–æ–¥—ã. –≠—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –∏ –¥–æ–ª–∂–Ω–æ –ø–æ–º–æ—á—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.

–°–Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç, —Å–ø–æ—Å–æ–±–Ω—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –ü–æ—ç—Ç–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ ([EQDKbjIcfM6ezt8KjKJJLshZJJSqX7XOA4ff-W72r5gqPrHF](https://tonscan.org/address/EQDKbjIcfM6ezt8KjKJJLshZJJSqX7XOA4ff-W72r5gqPrHF)):

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';
import { Address } from '@ton/core';

const client = new TonClient({
    endpoint: "https://toncenter.com/api/v2/jsonRPC",
    apiKey: "put your api key" // you can get an api key from @tonapibot bot in Telegram
});

const walletAddress = Address.parse("EQDKbjIcfM6ezt8KjKJJLshZJJSqX7XOA4ff-W72r5gqPrHF"); // my wallet address as an example
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "context"
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/liteclient"
  "github.com/xssnick/tonutils-go/ton"
  "log"
)

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection)

block, err := client.CurrentMasterchainInfo(context.Background()) // get current block, we will need it in requests to LiteServer
if err != nil {
  log.Fatalln("CurrentMasterchainInfo err:", err.Error())
  return
}

walletAddress := address.MustParseAddr("EQDKbjIcfM6ezt8KjKJJLshZJJSqX7XOA4ff-W72r5gqPrHF") // my wallet address as an example
```

</TabItem>
</Tabs>

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å GET-–º–µ—Ç–æ–¥–∞ –∫–æ—à–µ–ª—å–∫–∞.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
// I always call runMethodWithError instead of runMethod to be able to check the exit_code of the called method. 
let getResult = await client.runMethodWithError(walletAddress, "get_public_key"); // run get_public_key GET Method
const publicKeyUInt = getResult.stack.readBigNumber(); // read answer that contains uint256
const publicKey = publicKeyUInt.toString(16); // get hex string from bigint (uint256)
console.log(publicKey)
```

</TabItem>
<TabItem value="go" label="Golang">

```go
getResult, err := client.RunGetMethod(context.Background(), block, walletAddress, "get_public_key") // run get_public_key GET Method
if err != nil {
	log.Fatalln("RunGetMethod err:", err.Error())
	return
}

// We have a response as an array with values and should specify the index when reading it
// In the case of get_public_key, we have only one returned value that is stored at 0 index
publicKeyUInt := getResult.MustInt(0) // read answer that contains uint256
publicKey := publicKeyUInt.Text(16)   // get hex string from bigint (uint256)
log.Println(publicKey)
```

</TabItem>
</Tabs>

–£—Å–ø–µ—à–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –≤—ã–∑–æ–≤–∞ –±—É–¥–µ—Ç –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–µ 256-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ —Å—Ç—Ä–æ–∫—É —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞. –†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —É–∫–∞–∑–∞–ª–∏ –≤—ã—à–µ, –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: `430db39b13cf3cb76bfa818b6b13417b82be2c6c389170fbe06795c71996b1f8`.
–î–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º [TonAPI](https://docs.tonconsole.com/tonapi/rest-api) (–º–µ—Ç–æ–¥ /v1/wallet/findByPubkey), –≤–≤–æ–¥—è –ø–æ–ª—É—á–µ–Ω–Ω—É—é —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ —Å–∏—Å—Ç–µ–º—É, –∏ —Å—Ä–∞–∑—É —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Å–Ω–æ, —á—Ç–æ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –∫–æ—à–µ–ª–µ–∫.

–ó–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –º–µ—Ç–æ–¥—É `is_plugin_installed`. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –±—É–¥–µ–º —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—à–µ–ª–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ ([EQAM7M--HGyfxlErAIUODrxBA3yj5roBeYiTuy6BHgJ3Sx8k](https://tonscan.org/address/EQAM7M--HGyfxlErAIUODrxBA3yj5roBeYiTuy6BHgJ3Sx8k)) –∏ –ø–ª–∞–≥–∏–Ω ([EQBTKTis-SWYdupy99ozeOvnEBu8LRrQP_N9qwOTSAy3sQSZ](https://tonscan.org/address/EQBTKTis-SWYdupy99ozeOvnEBu8LRrQP_N9qwOTSAy3sQSZ)):

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
const oldWalletAddress = Address.parse("EQAM7M--HGyfxlErAIUODrxBA3yj5roBeYiTuy6BHgJ3Sx8k"); // my old wallet address
const subscriptionAddress = Address.parseFriendly("EQBTKTis-SWYdupy99ozeOvnEBu8LRrQP_N9qwOTSAy3sQSZ"); // subscription plugin address which is already installed on the wallet
```

</TabItem>
<TabItem value="go" label="Golang">

```go
oldWalletAddress := address.MustParseAddr("EQAM7M--HGyfxlErAIUODrxBA3yj5roBeYiTuy6BHgJ3Sx8k")
subscriptionAddress := address.MustParseAddr("EQBTKTis-SWYdupy99ozeOvnEBu8LRrQP_N9qwOTSAy3sQSZ") // subscription plugin address which is already installed on the wallet
```

</TabItem>
</Tabs>

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ö—ç—à-–∞–¥—Ä–µ—Å –ø–ª–∞–≥–∏–Ω–∞, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ–≥–æ –≤ —á–∏—Å–ª–æ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ GET-–º–µ—Ç–æ–¥.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
const hash = BigInt(`0x${subscriptionAddress.address.hash.toString("hex")}`) ;

getResult = await client.runMethodWithError(oldWalletAddress, "is_plugin_installed", 
[
    {type: "int", value: BigInt("0")}, // pass workchain as int
    {type: "int", value: hash} // pass plugin address hash as int
]);
console.log(getResult.stack.readNumber()); // -1
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "math/big"
)

hash := big.NewInt(0).SetBytes(subscriptionAddress.Data())
// runGetMethod will automatically identify types of passed values
getResult, err = client.RunGetMethod(context.Background(), block, oldWalletAddress,
  "is_plugin_installed",
  0,    // pass workchain
  hash) // pass plugin address
if err != nil {
  log.Fatalln("RunGetMethod err:", err.Error())
  return
}

log.Println(getResult.MustInt(0)) // -1
```

</TabItem>
</Tabs>

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `-1`, —á—Ç–æ –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å—Ç–∏–Ω–∞. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ä–µ–∑ –∏ —è—á–µ–π–∫—É. –î–ª—è —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å `Slice` –∏–ª–∏ `Cell` –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –∏—Ö –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è BigInt, —É–∫–∞–∑–∞–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–∏–ø.

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª–µ–∫

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ –º—ã —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ –∫–æ—à–µ–ª–µ–∫: –¥–ª—è —ç—Ç–æ–≥–æ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ TON, –∞ –∑–∞—Ç–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–æ—à–µ–ª—å–∫–∞ ‚Äì –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –û–¥–Ω–∞–∫–æ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –æ—á–µ–Ω—å —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ—à–µ–ª—å–∫–æ–≤. –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—É—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

–î–ª—è —ç—Ç–æ–≥–æ –º—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –∫–æ—à–µ–ª—å–∫–∞ V3R2, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ [–ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ](/v3/guidelines/smart-contracts/howto/wallet#–∫–æ–º–ø–∏–ª—è—Ü–∏—è-–∫–æ–¥–∞-–∫–æ—à–µ–ª—å–∫–∞).
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–ª—è `subwallet_id` –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `3` –∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ —á–∏—Å–ª–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–æ–≥–æ –∂–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (–µ–≥–æ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å):

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { beginCell, Cell } from '@ton/core';
import { mnemonicToWalletKey } from '@ton/crypto';

const mnemonicArray = 'put your mnemonic'.split(" ");
const keyPair = await mnemonicToWalletKey(mnemonicArray); // extract private and public keys from mnemonic

const codeCell = Cell.fromBase64('te6ccgEBCAEAhgABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQCW8oMI1xgg0x/TH9MfAvgju/Jj7UTQ0x/TH9P/0VEyuvKhUUS68qIE+QFUEFX5EPKj+ACTINdKltMH1AL7AOgwAaTIyx/LH8v/ye1UAATQMAIBSAYHABe7Oc7UTQ0z8x1wv/gAEbjJftRNDXCx+A==');
const dataCell = beginCell()
    .storeUint(0, 32) // Seqno
    .storeUint(3, 32) // Subwallet ID
    .storeBuffer(keyPair.publicKey) // Public Key
    .endCell();

const stateInit = beginCell()
    .storeBit(0) // No split_depth
    .storeBit(0) // No special
    .storeBit(1) // We have code
    .storeRef(codeCell)
    .storeBit(1) // We have data
    .storeRef(dataCell)
    .storeBit(0) // No library
    .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "crypto/ed25519"
  "crypto/hmac"
  "crypto/sha512"
  "encoding/base64"
  "github.com/xssnick/tonutils-go/tvm/cell"
  "golang.org/x/crypto/pbkdf2"
  "strings"
)

mnemonicArray := strings.Split("put your mnemonic", " ")
// The following three lines will extract the private key using the mnemonic phrase.
// We will not go into cryptographic details. In the library tonutils-go, it is all implemented,
// but it immediately returns the finished object of the wallet with the address and ready-made methods.
// So we‚Äôll have to write the lines to get the key separately. Goland IDE will automatically import
// all required libraries (crypto, pbkdf2 and others).
mac := hmac.New(sha512.New, []byte(strings.Join(mnemonicArray, " ")))
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len
privateKey := ed25519.NewKeyFromSeed(k)              // get private key
publicKey := privateKey.Public().(ed25519.PublicKey) // get public key from private key

BOCBytes, _ := base64.StdEncoding.DecodeString("te6ccgEBCAEAhgABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQCW8oMI1xgg0x/TH9MfAvgju/Jj7UTQ0x/TH9P/0VEyuvKhUUS68qIE+QFUEFX5EPKj+ACTINdKltMH1AL7AOgwAaTIyx/LH8v/ye1UAATQMAIBSAYHABe7Oc7UTQ0z8x1wv/gAEbjJftRNDXCx+A==")
codeCell, _ := cell.FromBOC(BOCBytes)
dataCell := cell.BeginCell().
  MustStoreUInt(0, 32).           // Seqno
  MustStoreUInt(3, 32).           // Subwallet ID
  MustStoreSlice(publicKey, 256). // Public Key
  EndCell()

stateInit := cell.BeginCell().
  MustStoreBoolBit(false). // No split_depth
  MustStoreBoolBit(false). // No special
  MustStoreBoolBit(true).  // We have code
  MustStoreRef(codeCell).
  MustStoreBoolBit(true). // We have data
  MustStoreRef(dataCell).
  MustStoreBoolBit(false). // No library
  EndCell()
```

</TabItem>
</Tabs>

–î–∞–ª–µ–µ –º—ã –ø–æ–ª—É—á–∏–º –∞–¥—Ä–µ—Å –∏–∑ –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞–¥–∏–º InternalMessage. –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "Deploying..." –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address, toNano } from '@ton/core';

const contractAddress = new Address(0, stateInit.hash()); // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
console.log(`Contract address: ${contractAddress.toString()}`); // Output contract address to console

const internalMessageBody = beginCell()
    .storeUint(0, 32)
    .storeStringTail('Deploying...')
    .endCell();

const internalMessage = beginCell()
    .storeUint(0x10, 6) // no bounce
    .storeAddress(contractAddress)
    .storeCoins(toNano('0.01'))
    .storeUint(0, 1 + 4 + 4 + 64 + 32)
    .storeBit(1) // We have State Init
    .storeBit(1) // We store State Init as a reference
    .storeRef(stateInit) // Store State Init as a reference
    .storeBit(1) // We store Message Body as a reference
    .storeRef(internalMessageBody) // Store Message Body Init as a reference
    .endCell();
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/tlb"
  "log"
)

contractAddress := address.NewAddress(0, 0, stateInit.Hash()) // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
log.Println("Contract address:", contractAddress.String())   // Output contract address to console

internalMessageBody := cell.BeginCell().
  MustStoreUInt(0, 32).
  MustStoreStringSnake("Deploying...").
  EndCell()

internalMessage := cell.BeginCell().
  MustStoreUInt(0x10, 6). // no bounce
  MustStoreAddr(contractAddress).
  MustStoreBigCoins(tlb.MustFromTON("0.01").NanoTON()).
  MustStoreUInt(0, 1+4+4+64+32).
  MustStoreBoolBit(true).            // We have State Init
  MustStoreBoolBit(true).            // We store State Init as a reference
  MustStoreRef(stateInit).           // Store State Init as a reference
  MustStoreBoolBit(true).            // We store Message Body as a reference
  MustStoreRef(internalMessageBody). // Store Message Body Init as a reference
  EndCell()
```

</TabItem>
</Tabs>

:::info
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤—ã—à–µ –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –±–∏—Ç—ã, –∞ `stateInit` –∏ `internalMessageBody` –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ —Å—Å—ã–ª–∫–∏. –ü–æ—Å–∫–æ–ª—å–∫—É —Å—Å—ã–ª–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –º—ã –º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å `4 (0b100) + 2 (0b10) + 1 (0b1) -> (4 + 2 + 1, 1 + 4 + 4 + 64 + 32 + 1 + 1)`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `(0b111, 1 + 4 + 4 + 64 + 32 + 1 + 1 + 1)`, –∞ –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–≤–µ —Å—Å—ã–ª–∫–∏.
:::

–î–∞–ª–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏–º –µ–≥–æ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';
import { sign } from '@ton/crypto';

const client = new TonClient({
    endpoint: 'https://toncenter.com/api/v2/jsonRPC',
    apiKey: 'put your api key' // you can get an api key from @tonapibot bot in Telegram
});

const walletMnemonicArray = 'put your mnemonic'.split(' ');
const walletKeyPair = await mnemonicToWalletKey(walletMnemonicArray); // extract private and public keys from mnemonic
const walletAddress = Address.parse('put your wallet address with which you will deploy');
const getMethodResult = await client.runMethod(walletAddress, 'seqno'); // run "seqno" GET method from your wallet contract
const seqno = getMethodResult.stack.readNumber(); // get seqno from response

// message for our wallet
const toSign = beginCell()
    .storeUint(698983191, 32) // subwallet_id
    .storeUint(Math.floor(Date.now() / 1e3) + 60, 32) // Message expiration time, +60 = 1 minute
    .storeUint(seqno, 32) // store seqno
    // Do not forget that if we use Wallet V4, we need to add .storeUint(0, 8) 
    .storeUint(3, 8)
    .storeRef(internalMessage);

const signature = sign(toSign.endCell().hash(), walletKeyPair.secretKey); // get the hash of our message to wallet smart contract and sign it to get signature
const body = beginCell()
    .storeBuffer(signature) // store signature
    .storeBuilder(toSign) // store our message
    .endCell();

const external = beginCell()
    .storeUint(0b10, 2) // indicate that it is an incoming external message
    .storeUint(0, 2) // src -> addr_none
    .storeAddress(walletAddress)
    .storeCoins(0) // Import fee
    .storeBit(0) // We do not have State Init
    .storeBit(1) // We store Message Body as a reference
    .storeRef(body) // Store Message Body as a reference
    .endCell();

console.log(external.toBoc().toString('base64'));
client.sendFile(external.toBoc());
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "context"
  "github.com/xssnick/tonutils-go/liteclient"
  "github.com/xssnick/tonutils-go/tl"
  "github.com/xssnick/tonutils-go/ton"
  "time"
)

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection)

block, err := client.CurrentMasterchainInfo(context.Background()) // get current block, we will need it in requests to LiteServer
if err != nil {
  log.Fatalln("CurrentMasterchainInfo err:", err.Error())
  return
}

walletMnemonicArray := strings.Split("put your mnemonic", " ")
mac = hmac.New(sha512.New, []byte(strings.Join(walletMnemonicArray, " ")))
hash = mac.Sum(nil)
k = pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len
walletPrivateKey := ed25519.NewKeyFromSeed(k) // get private key
walletAddress := address.MustParseAddr("put your wallet address with which you will deploy")

getMethodResult, err := client.RunGetMethod(context.Background(), block, walletAddress, "seqno") // run "seqno" GET method from your wallet contract
if err != nil {
  log.Fatalln("RunGetMethod err:", err.Error())
  return
}
seqno := getMethodResult.MustInt(0) // get seqno from response

toSign := cell.BeginCell().
  MustStoreUInt(698983191, 32).                          // subwallet_id | We consider this further
  MustStoreUInt(uint64(time.Now().UTC().Unix()+60), 32). // message expiration time, +60 = 1 minute
  MustStoreUInt(seqno.Uint64(), 32).                     // store seqno
  // Do not forget that if we use Wallet V4, we need to add MustStoreUInt(0, 8).
  MustStoreUInt(3, 8).          // store mode of our internal message
  MustStoreRef(internalMessage) // store our internalMessage as a reference

signature := ed25519.Sign(walletPrivateKey, toSign.EndCell().Hash()) // get the hash of our message to wallet smart contract and sign it to get signature

body := cell.BeginCell().
  MustStoreSlice(signature, 512). // store signature
  MustStoreBuilder(toSign).       // store our message
  EndCell()

externalMessage := cell.BeginCell().
  MustStoreUInt(0b10, 2).       // ext_in_msg_info$10
  MustStoreUInt(0, 2).          // src -> addr_none
  MustStoreAddr(walletAddress). // Destination address
  MustStoreCoins(0).            // Import Fee
  MustStoreBoolBit(false).      // No State Init
  MustStoreBoolBit(true).       // We store Message Body as a reference
  MustStoreRef(body).           // Store Message Body as a reference
  EndCell()

var resp tl.Serializable
err = client.Client().QueryLiteserver(context.Background(), ton.SendMessage{Body: externalMessage.ToBOCWithFlags(false)}, &resp)

if err != nil {
  log.Fatalln(err.Error())
  return
}
```

</TabItem>
</Tabs>

–ù–∞ —ç—Ç–æ–º –º—ã –∑–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–±–æ—Ç—É —Å –æ–±—ã—á–Ω—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –≤—ã –¥–æ–ª–∂–Ω—ã —Ö–æ—Ä–æ—à–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∫–æ—à–µ–ª—å–∫–∞, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —É–º–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –±–∏–±–ª–∏–æ—Ç–µ–∫.

## üî• Highload Wallet V3

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –∫–æ—à–µ–ª—å–∫–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Highload Wallet (highload-–∫–æ—à–µ–ª–µ–∫). Highload-–∫–æ—à–µ–ª–µ–∫ V2 –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –±—ã–ª –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ—à–µ–ª—å–∫–æ–º –Ω–∞ TON, –Ω–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ [–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ä–µ–¥—Å—Ç–≤–∞](https://t.me/tonstatus/88).

[–° –ø–æ—è–≤–ª–µ–Ω–∏–µ–º highload-–∫–æ—à–µ–ª—å–∫–∞ V3](https://github.com/ton-blockchain/highload-wallet-contract-v3) —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –±—ã–ª —Ä–µ—à–µ–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –±—ã–ª–æ —Å–Ω–∏–∂–µ–Ω–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≥–∞–∑–∞. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤—ã highload-–∫–æ—à–µ–ª—å–∫–∞ V3 –∏ –≤–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã, –æ –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å.

:::note
–ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å [—Å –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π –æ–±–µ—Ä—Ç–∫–∏](https://github.com/aSpite/highload-wallet-contract-v3/blob/main/wrappers/HighloadWalletV3.ts) –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–µ–π –µ—Å—Ç—å –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã—Ö –æ—à–∏–±–æ–∫.
:::

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, [—Å—Ö–µ–º–∞ TL-B](https://github.com/ton-blockchain/highload-wallet-contract-v3/blob/d58c31e82315c34b4db55942851dd8d4153975c5/contracts/scheme.tlb#L1C1-L3C21) –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –≤ –∏–∑—É—á–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:

```
storage$_ public_key:bits256 subwallet_id:uint32 old_queries:(HashmapE 14 ^Cell)
          queries:(HashmapE 14 ^Cell) last_clean_time:uint64 timeout:uint22
          = Storage;
```

:::tip TL-B
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ TL-B –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](/v3/documentation/data-formats/tlb/tl-b-language).
:::

–•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

|                            –ü–æ–ª–µ                           |                                                                                                               –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                               |
| :-------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|              public_key              |                                                                                                       –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞                                                                                                       |
|             subwallet_id             |                                               [–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä subwallet](#subwallet-ids). –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ—à–µ–ª—å–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á                                               |
|              old_queries             |                                                         –°—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ —É—Å—Ç–∞—Ä–µ–ª–∏. –û–Ω–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è —Å—é–¥–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞                                                         |
|                          queries                          |                                                                                         –ó–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –Ω–æ –µ—â–µ –Ω–µ —É—Å—Ç–∞—Ä–µ–ª–∏                                                                                         |
| last_clean_time | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—á–∏—Å—Ç–∫–∏. –ï—Å–ª–∏ `last_clean_time < (now()-timeout)`, —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ `old_queries`. –ï—Å–ª–∏ `last_clean_time < (now()-2*timeout)`, —Ç–æ –æ—á–∏—â–∞—é—Ç—Å—è –∏ `old_queries` –∏ `queries` |
|                          timeout                          |                                                                                   –í—Ä–µ–º—è, –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ `old_queries`                                                                                  |

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ [–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è](#–∑–∞—â–∏—Ç–∞-–æ—Ç-–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è).

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–≤–∏–≥–æ–≤ –∏ –±–∏—Ç–æ–≤ –≤ Query ID

Query ID (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞) ‚Äì —ç—Ç–æ —á–∏—Å–ª–æ, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π: `shift` –∏ `bit_number`:

```func.
int shift = msg_inner_slice~load_uint(KEY_SIZE);
int bit_number = msg_inner_slice~load_uint(BIT_NUMBER_SIZE);
```

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π Query ID –∑–∞–Ω–∏–º–∞–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ –≤—Å–µ–≥–æ 1 –±–∏—Ç, –ø—Ä–∏ —ç—Ç–æ–º —Ä–∞—Å—Ö–æ–¥ –≥–∞–∑–∞ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.

–î–ª—è –Ω–∞—á–∞–ª–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∏—Å–ø–æ–ª—å–∑—É—è shift, –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —è—á–µ–π–∫—É —Å —Ç–∞–∫–∏–º –∏–Ω–¥–µ–∫—Å–æ–º –≤ —Å–ª–æ–≤–∞—Ä–µ `old_queries`:

```func
(cell value, int found) = old_queries.udict_get_ref?(KEY_SIZE, shift);
```

–ï—Å–ª–∏ —Ç–∞–∫–∞—è —è—á–µ–π–∫–∞ –Ω–∞–π–¥–µ–Ω–∞, –æ–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç `bit_number` –±–∏—Ç–æ–≤, —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –±–∏—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º `bit_number` (–≤–∞–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å bit_number –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ bit_number –∫–∞–∫ –∏–Ω–¥–µ–∫—Å). –ï—Å–ª–∏ –±–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–∫–∏–º Query ID —É–∂–µ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É:

```func
if (found) {
    slice value_slice = value.begin_parse();
    value_slice~skip_bits(bit_number);
    throw_if(error::already_executed, value_slice.preload_int(1));
}
```

–°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –±—É–¥–µ—Ç –ø–æ–∏—Å–∫ –≤ —Å–ª–æ–≤–∞—Ä–µ `queries`:

```func
(cell value, int found) = queries.udict_get_ref?(KEY_SIZE, shift);
```

–ï—Å–ª–∏ —Ç–∞–∫–∞—è —è—á–µ–π–∫–∞ –Ω–∞–π–¥–µ–Ω–∞, –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ä–∞–∑–¥–µ–ª—è–µ—Ç –µ–µ –Ω–∞ 2 —á–∞—Å—Ç–∏: `0...bit_number-1` (head) –∏ `bit_number...1023` (tail). –ó–∞—Ç–µ–º —Å –Ω–∞—á–∞–ª–∞ tail —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω –±–∏—Ç (—ç—Ç–æ—Ç –±–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `bit_number`, –µ—Å–ª–∏ –Ω–∞—á–∞—Ç—å –æ—Ç—Å—á–µ—Ç —Å 0, —Ç.–µ. —ç—Ç–æ –∏–Ω–¥–µ–∫—Å –Ω—É–∂–Ω–æ–≥–æ –±–∏—Ç–∞). –ï—Å–ª–∏ –±–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `1`, —Ç–æ –∑–∞–ø—Ä–æ—Å —Å —ç—Ç–∏–º Query ID —É–∂–µ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∏—Ç –Ω–∞ `1`, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Å–Ω–æ–≤–∞ –≤ –æ–¥–Ω—É —è—á–µ–π–∫—É –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–ª–æ–≤–∞—Ä—å `queries`:

```func
builder new_value = null();
if (found) {
    slice value_slice = value.begin_parse();
    (slice tail, slice head) = value_slice.load_bits(bit_number);
    throw_if(error::already_executed, tail~load_int(1));
    new_value = begin_cell().store_slice(head).store_true().store_slice(tail);
} else {
    new_value = begin_cell().store_zeroes(bit_number).store_true().store_zeroes(CELL_BITS_SIZE - bit_number - 1);
}
```

:::note
If you [familiarize yourself](/v3/documentation/tvm/instructions) with the operation of the `LDSLICEX` opcode (the load\_bits function uses this opcode), you will notice that the read data is returned first (head) and only then the remaining data (tail), but they are in reverse order in the contract code.

–ï—Å–ª–∏ –≤—ã [–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å](https://docs.ton.org/v3/documentation/tvm/instructions) —Å —Ä–∞–±–æ—Ç–æ–π –æ–ø–∫–æ–¥–∞ `LDSLICEX` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `load_bits`), —Ç–æ –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏ (head), –∞ –∑–∞—Ç–µ–º —É–∂–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ (tail), –û–¥–Ω–∞–∫–æ –≤ –∫–æ–¥–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –≤ `stdlib` –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ [–∏–¥—É—Ç –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ](https://github.com/ton-blockchain/highload-wallet-contract-v3/blob/d58c31e82315c34b4db55942851dd8d4153975c5/contracts/imports/stdlib.fc#L321): `(slice, slice) load_bits(slice s, int len) asm(s len -> 1 0) "LDSLICEX";`. –ó–¥–µ—Å—å `-> 1 0` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º `1` (tail), –∞ –∑–∞—Ç–µ–º `0` (head).
:::

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –º–∞—Ç—Ä–∏—Ü–µ–π, –≥–¥–µ `shift` ‚Äì —ç—Ç–æ –∏–Ω–¥–µ–∫—Å —Å—Ç—Ä–æ–∫–∏, –∞ `bit_number` ‚Äì –∏–Ω–¥–µ–∫—Å —Å—Ç–æ–ª–±—Ü–∞. –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Ö—Ä–∞–Ω–∏—Ç—å –¥–æ 1023 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ, —Ç–æ –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–¥ –≥–∞–∑–∞ –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–µ 1023 –∑–∞–ø—Ä–æ—Å–∞, –∫–æ–≥–¥–∞ –Ω–æ–≤–∞—è —è—á–µ–π–∫–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–æ–≤–∞—Ä—å. –î–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∞ –Ω–µ —Å–ª—É—á–∞–π–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å Query ID, [–∏—Å–ø–æ–ª—å–∑—É—è –¥–ª—è —ç—Ç–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å](https://github.com/aSpite/highload-wallet-contract-v3/blob/main/wrappers/HighloadQueryId.ts).

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞ –æ–¥–∏–Ω —Ç–∞–π–º–∞—É—Ç (1023 \* 8192 = 8 380 416), –Ω–æ –∫–∞–∫ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å [–∫–ª–∞—Å—Å HighloadQueryId –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 8 380 415](https://github.com/ton-blockchain/highload-wallet-contract-v3/blob/d58c31e82315c34b4db55942851dd8d4153975c5/wrappers/HighloadQueryId.ts#L32). –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞–ª—Å—è 1 –±–∏—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Ç–∞–π–º–∞—É—Ç, –µ—Å–ª–∏ –≤–µ—Å—å –ª–∏–º–∏—Ç –±—É–¥–µ—Ç –∏—Å—á–µ—Ä–ø–∞–Ω. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑-–∑–∞ [–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—á–µ–µ–∫ –≤ —Å—Ç–µ–∫–µ –∞–∫–∫–∞—É–Ω—Ç–∞](https://github.com/ton-blockchain/ton/blob/5c392e0f2d946877bb79a09ed35068f7b0bd333a/crypto/block/mc-config.h#L395) –≤ –±–ª–æ–∫—á–µ–π–Ω–µ (–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏).

–ù–∞ –∫–∞–∂–¥—É—é —è—á–µ–π–∫—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –≤–º–µ—Å—Ç–∏—Ç—å 1023 –∑–∞–ø—Ä–æ—Å–∞, —Ç—Ä–∞—Ç–∏—Ç—Å—è 2 —è—á–µ–π–∫–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ (–æ–¥–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–∞, –¥—Ä—É–≥–∞—è ‚Äì –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è). –ï—Å–ª–∏ –º—ã –≤–æ–∑—å–º–µ–º —Ç–µ–∫—É—â–µ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `shift`, —Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –º–∞–∫—Å–∏–º—É–º —Å–æ—Å—Ç–∞–≤–∏—Ç 8192 \* 2 \* 2 (—É –Ω–∞—Å –¥–≤–∞ —Å–ª–æ–≤–∞—Ä—è: `queries` –∏ `old_queries`) = 32 768 —è—á–µ–µ–∫. –ï—Å–ª–∏ –≤—ã —É–≤–µ–ª–∏—á–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–ª—é—á–∞ –Ω–∞ –±–∏—Ç, –æ–Ω —É–∂–µ –Ω–µ –±—É–¥–µ—Ç –≤–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–∏–º–∏—Ç—ã.

:::info
–í highload-–∫–æ—à–µ–ª—å–∫–µ V2, –∫–∞–∂–¥—ã–π Quiery ID (64-–±–∏—Ç–Ω—ã–π) —Ö—Ä–∞–Ω–∏–ª—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —è—á–µ–π–∫–µ —Å–ª–æ–≤–∞—Ä—è –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª —Å–æ–±–æ–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö 32-–±–∏—Ç–Ω—ã—Ö –ø–æ–ª–µ–π `expire_at` –∏ `query_id`. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–º—É —Ä–æ—Å—Ç—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≥–∞–∑–∞ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
:::

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

–ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ TON [–Ω–µ –∏–º–µ—é—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ª—é–±—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –≤ —Å–µ—Ç–∏](#–∑–∞—â–∏—Ç–∞-–æ—Ç-–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è--seqno), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –î–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ highload-–∫–æ—à–µ–ª–µ–∫ V3 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–≤–∞—Ä–∏ `queries` –∏ `old_queries`, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏—è `last_clean_time` –∏ `timeout`.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–≤–ª–µ–∫ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –µ–º—É –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –æ—á–∏—Å—Ç–∫–∞ —Å–ª–æ–≤–∞—Ä—è –∑–∞–ø—Ä–æ—Å–æ–≤. –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–æ –±–æ–ª–µ–µ —á–µ–º `timeout` –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–∑–∞–¥, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ `queries` –≤ `old_queries`. –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –æ—á–∏—Å—Ç–∫–∞ –±—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –±–æ–ª–µ–µ —á–µ–º `timeout * 2` –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–∑–∞–¥, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ—Ç `old_queries`:

```func
if (last_clean_time < (now() - timeout)) {
    (old_queries, queries) = (queries, null());
    if (last_clean_time < (now() - (timeout * 2))) {
        old_queries = null();
    }
    last_clean_time = now();
}
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Ç–∞–π–º–∞—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 3 —á–∞—Å–∞, –Ω–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ –º–∏–Ω—É—Ç—É –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ –æ–¥–Ω—É –º–∏–Ω—É—Ç—É, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ—à–µ–ª –≤–µ—Å—å —Ç—Ä–µ—Ö—á–∞—Å–æ–≤–æ–π –ø–µ—Ä–∏–æ–¥. –ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª–æ–≤–∞—Ä–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–µ –∂–µ —Å–∞–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∫ –º–∏–Ω–∏–º—É–º –µ—â–µ —Å—Ç–æ–ª—å–∫–æ –∂–µ –≤—Ä–µ–º–µ–Ω–∏.

–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏, —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç `timeout` –¥–æ `timeout * 2`, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ `timeout * 2`, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–∞–ø—Ä–æ—Å —É—Å—Ç–∞—Ä–µ–ª.

### –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–µ–∑–æ—à–∏–±–æ—á–Ω–∞—è action phase (—Ñ–∞–∑–∞ –¥–µ–π—Å—Ç–≤–∏–π)

–ö–æ–≥–¥–∞ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `commit`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ñ–∞–∑–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ—à–∏–±–∫–∞:

```func
accept_message();

queries~udict_set_ref(KEY_SIZE, shift, new_value.end_cell());

set_data(begin_cell()
    .store_uint(public_key, PUBLIC_KEY_SIZE)
    .store_uint(subwallet_id, SUBWALLET_ID_SIZE)
    .store_dict(old_queries)
    .store_dict(queries)
    .store_uint(last_clean_time, TIMESTAMP_SIZE)
    .store_uint(timeout, TIMEOUT_SIZE)
    .end_cell());


commit();
```

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è –≤ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Å–∏–ª–µ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–Ω—è—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–∞–ø—Ä–∞—Å–Ω–æ–π —Ç—Ä–∞—Ç–µ –±–∞–ª–∞–Ω—Å–∞.

–û–¥–Ω–∞–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ—à–∏—Ç—å –µ—â–µ –æ–¥–Ω—É –ø—Ä–æ–±–ª–µ–º—É: –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è **—Ñ–∞–∑—ã –¥–µ–π—Å—Ç–≤–∏–π**. –•–æ—Ç—è —É –Ω–∞—Å –µ—Å—Ç—å —Ñ–ª–∞–≥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ (2) –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ–Ω –Ω–µ –æ—Ö—ã–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª—É—á–∞–∏. –ü–æ—ç—Ç–æ–º—É –º—ã –¥–æ–ª–∂–Ω—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–æ –≤—Ä–µ–º—è —ç—Ç–æ–π —Ñ–∞–∑—ã –Ω–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—Ç–∫–∞—Ç—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–¥–µ–ª–∞—Ç—å `commit()` –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º.

–ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ—Å—ã–ª–∞–µ—Ç —Å–∞–º —Å–µ–±–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–ø–∫–æ–¥–æ–º `internal_transfer`. –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –≤ —Ñ–∞–∑–µ –¥–µ–π—Å—Ç–≤–∏–π:

```func
throw_if(error::invalid_message_to_send, message_slice~load_uint(1)); ;; int_msg_info$0
int msg_flags = message_slice~load_uint(3); ;; ihr_disabled:Bool bounce:Bool bounced:Bool
if (is_bounced(msg_flags)) {
    return ();
}
slice message_source_adrress = message_slice~load_msg_addr(); ;; src
throw_unless(error::invalid_message_to_send, is_address_none(message_source_adrress));
message_slice~load_msg_addr(); ;; dest
message_slice~load_coins(); ;; value.coins
message_slice = message_slice.skip_dict(); ;; value.other extra-currencies
message_slice~load_coins(); ;; ihr_fee
message_slice~load_coins(); ;; fwd_fee
message_slice~skip_bits(64 + 32); ;; created_lt:uint64 created_at:uint32
int maybe_state_init = message_slice~load_uint(1);
throw_if(error::invalid_message_to_send, maybe_state_init); ;; throw if state-init included (state-init not supported)
int either_body = message_slice~load_int(1);
if (either_body) {
    message_slice~load_ref();
    message_slice.end_parse();
}
```

–ï—Å–ª–∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –∫–∞–∫–∞—è-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º–∞, –æ–Ω–∞ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –∏ –≤–æ –≤—Ä–µ–º—è —Ñ–∞–∑—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –û–¥–Ω–∞–∫–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞–ª–∏—á–∏—é `commit()` —ç—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π, –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ–π. –ï—Å–ª–∏ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ, —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—è —Ç–æ–≥–æ, —á—Ç–æ –§–∞–∑–∞ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–æ–π–¥–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –≤—Å–µ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Ñ–ª–∞–≥ `IGNORE_ERRORS` (2) –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, –æ—Ç–ø—Ä–∞–≤–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ:

```func
;; send message with IGNORE_ERRORS flag to ignore errors in the action phase

send_raw_message(message_to_send, send_mode | SEND_MODE_IGNORE_ERRORS);
```

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–µ—Ä–µ–≤–æ–¥

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ `internal_transfer` –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –æ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Ö –≤ `c5` —Ä–µ–≥–∏—Å—Ç—Ä–µ, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç `set_code` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ–º. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 254, –∞ –Ω–µ 255, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –±–ª–æ–∫—á–µ–π–Ω–∞. –û–¥–Ω–∞–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–∞–º —Å–µ–±—è, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –æ —á–µ–º –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø–æ–∑–∂–µ:

```func
if (op == op::internal_transfer) {
    in_msg_body~skip_query_id();
    cell actions = in_msg_body.preload_ref();
    cell old_code = my_code();
    set_actions(actions);
    set_code(old_code); ;; prevent to change smart contract code
    return ();
}
```

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `internal_transfer` –µ—Å—Ç—å –æ–¥–∏–Ω –≤–∞–∂–Ω—ã–π –Ω—é–∞–Ω—Å. –ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–∞–º–æ–º—É —Å–µ–±–µ, –Ω–æ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–æ–¥—Å—á–µ—Ç–µ —Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ TON, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é.

–í wrapper –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —ç—Ç–æ –ø–æ–ª–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –∏ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ, [mode –±—É–¥–µ—Ç —Ä–∞–≤–Ω—ã–º 128](https://github.com/ton-blockchain/highload-wallet-contract-v3/blob/d58c31e82315c34b4db55942851dd8d4153975c5/wrappers/HighloadWalletV3.ts#L115), —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤–µ—Å—å –±–∞–ª–∞–Ω—Å. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —Ç–æ–≥–¥–∞ —ç—Ç–æ –±—É–¥–µ—Ç **–ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π**.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤. –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è TON –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞ –Ω–∞—à –∫–æ—à–µ–ª–µ–∫, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã —É–∫–∞–∑–∞–ª–∏ –Ω–∞—à –∞–¥—Ä–µ—Å –≤ –ø–æ–ª–µ `response_destination`. –ï—Å–ª–∏ –º—ã –Ω–∞—á–Ω–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–ª–µ–¥—É—é—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

1. –í–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ A –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Å—å –±–∞–ª–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ `internal_transfer`.
2. –î–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è B —á–∞—Å—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –æ—Ç —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –≠—Ç–æ –ø–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –ø–æ–∑–≤–æ–ª—è—è —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Å—å –±–∞–ª–∞–Ω—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ B, –Ω–æ –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ —Å –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º TON.
3. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ A –ø–æ–ª—É—á–µ–Ω–æ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ. –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –ø–µ—Ä–µ–≤–æ–¥–µ —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã.
4. –ü—Ä–µ–∂–¥–µ —á–µ–º –ø–æ—Å—Ç—É–ø–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ B, –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ C –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Å—å –±–∞–ª–∞–Ω—Å.
5. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è B, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–º–µ–µ—Ç —Ç–∞–∫ –º–∞–ª–æ TON, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö TON –æ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤, –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–µ—É—Å–ø–µ—à–Ω—ã–º —Å –∫–æ–¥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è = `37` –≤ —Ñ–∞–∑–µ –¥–µ–π—Å—Ç–≤–∏–π (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–º–µ—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π, —Ö–æ—Ç—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –Ω–µ —Ç–∞–∫. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è, **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ –∫–ª–∞—Å—Ç—å 1 TON** –Ω–∞ `internal_transfer`. –ü–æ—ç—Ç–æ–º—É [–º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±–µ—Ä—Ç–∫–æ–π](#-highload-wallet-v3), –∫–æ—Ç–æ—Ä–∞—è —Ç—Ä–µ–±—É–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ TON. –≠—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É —Ä–∞–∑–º–µ—Ä –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 64 –ö–ë, –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, –±–ª–∏–∑–∫–æ–µ –∫ —ç—Ç–æ–º—É –ø—Ä–µ–¥–µ–ª—É, –ø–æ—Ç—Ä–∞—Ç–∏—Ç –º–µ–Ω—å—à–µ 1 TON.

Highload-–∫–æ—à–µ–ª–µ–∫ V3 –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±–æ–ª–µ–µ 254 —Å–æ–æ–±—â–µ–Ω–∏–π, [–ø–æ–º–µ—â–∞—è –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ 254-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ](https://github.com/aSpite/highload-wallet-contract-v3/blob/d4c1752d00b5303782f121a87eb0620d403d9544/wrappers/HighloadWalletV3.ts#L169-L176). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `internal_transfer` –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –û–±–µ—Ä—Ç–∫–∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏ –Ω–∞–º –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –æ–± —ç—Ç–æ–º –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è, –Ω–æ **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 150 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ —Ä–∞–∑**, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –¥–∞–∂–µ —Å–ª–æ–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–µ—Å—Ç—è—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

:::info
–•–æ—Ç—è –ª–∏–º–∏—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 64 –ö–ë, —á–µ–º –±–æ–ª—å—à–µ –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–µ–º –±–æ–ª—å—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –µ–≥–æ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ, –ø–æ—ç—Ç–æ–º—É 150 —Å–æ–æ–±—â–µ–Ω–∏–π —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º.
:::

### GET-–º–µ—Ç–æ–¥—ã

Highload-–∫–æ—à–µ–ª–µ–∫ V3 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5 GET-–º–µ—Ç–æ–¥–æ–≤:

|                                                    –ú–µ—Ç–æ–¥                                                    |                                                                                                                                     –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                     |
| :---------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|              int get_public_key()              |                                                                                                                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞                                                                                                                       |
|             int get_subwallet_id()             |                                                                                                                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä subwallet                                                                                                                        |
| int get_last_clean_time() |                                                                                                                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—á–∏—Å—Ç–∫–∏                                                                                                                        |
|                          int get_timeout()                          |                                                                                                                           –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞                                                                                                                           |
|  int processed?(int query_id, int need_clean)  | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç, –±—ã–ª –ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω query_id. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `need_clean` —Ä–∞–≤–Ω–æ `1`, —Ç–æ —Å–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `last_clean_time` –∏ `timeout`, –∞ –∑–∞—Ç–µ–º –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω query_id –≤ `old_queries` –∏ `queries` |

:::tip
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `true` –¥–ª—è `need_clean`, –µ—Å–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω–æ–≥–æ. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã —Å–∞–º—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è.
:::

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Query ID –≤ Highload-–∫–æ—à–µ–ª—å–∫–µ V3, –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–º –∂–µ Query ID –µ—â–µ —Ä–∞–∑, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –ø—Ä–∏—à–ª–æ, –Ω–µ –æ–ø–∞—Å–∞—è—Å—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∑–∞–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω.

–û–¥–Ω–∞–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–π—Ç–∏ –Ω–µ –±–æ–ª–µ–µ `timeout` –≤—Ä–µ–º–µ–Ω–∏. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –Ω–æ —É–∂–µ —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ª–æ–≤–∞—Ä–µ–π. –ü–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `timeout` –Ω–µ –º–µ–Ω–µ–µ –æ–¥–Ω–æ–≥–æ —á–∞—Å–∞ –∏ –Ω–µ –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤.

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ highload-–∫–æ—à–µ–ª—å–∫–∞ V3

–ß—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –Ω–∞–º –Ω—É–∂–Ω—ã 2 —è—á–µ–π–∫–∏: `code` –∏ `data`. –î–ª—è `code` –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é —è—á–µ–π–∫—É:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Cell } from "@ton/core";

const HIGHLOAD_V3_CODE = Cell.fromBoc(Buffer.from('b5ee9c7241021001000228000114ff00f4a413f4bcf2c80b01020120020d02014803040078d020d74bc00101c060b0915be101d0d3030171b0915be0fa4030f828c705b39130e0d31f018210ae42e5a4ba9d8040d721d74cf82a01ed55fb04e030020120050a02027306070011adce76a2686b85ffc00201200809001aabb6ed44d0810122d721d70b3f0018aa3bed44d08307d721d70b1f0201200b0c001bb9a6eed44d0810162d721d70b15800e5b8bf2eda2edfb21ab09028409b0ed44d0810120d721f404f404d33fd315d1058e1bf82325a15210b99f326df82305aa0015a112b992306dde923033e2923033e25230800df40f6fa19ed021d721d70a00955f037fdb31e09130e259800df40f6fa19cd001d721d70a00937fdb31e0915be270801f6f2d48308d718d121f900ed44d0d3ffd31ff404f404d33fd315d1f82321a15220b98e12336df82324aa00a112b9926d32de58f82301de541675f910f2a106d0d31fd4d307d30cd309d33fd315d15168baf2a2515abaf2a6f8232aa15250bcf2a304f823bbf2a35304800df40f6fa199d024d721d70a00f2649130e20e01fe5309800df40f6fa18e13d05004d718d20001f264c858cf16cf8301cf168e1030c824cf40cf8384095005a1a514cf40e2f800c94039800df41704c8cbff13cb1ff40012f40012cb3f12cb15c9ed54f80f21d0d30001f265d3020171b0925f03e0fa4001d70b01c000f2a5fa4031fa0031f401fa0031fa00318060d721d300010f0020f265d2000193d431d19130e272b1fb00b585bf03', 'hex'))[0];
```

</TabItem>
</Tabs> 

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤, –∑–¥–µ—Å—å –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å [—Å –≥–æ—Ç–æ–≤–æ–π –æ–±–µ—Ä—Ç–∫–æ–π](https://github.com/aSpite/highload-wallet-contract-v3/blob/main/wrappers/HighloadWalletV3.ts), –ø–æ—Å–∫–æ–ª—å–∫—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é –±—É–¥–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ –∏ —Ç—Ä—É–¥–æ–µ–º–∫–æ. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ `HighloadWalletV3`, –º—ã –ø–µ—Ä–µ–¥–∞–µ–º `publicKey`, `subwalletId` –∏ `timeout`, –∞ —Ç–∞–∫–∂–µ –∫–æ–¥:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from "@ton/ton";
import { HighloadWalletV3 } from "./wrappers/HighloadWalletV3"; 
import { mnemonicToWalletKey } from "@ton/crypto";

const client = new TonClient({
    endpoint: 'https://toncenter.com/api/v2/jsonRPC',
    apiKey: 'put your api key' // you can get an api key from @tonapibot bot in Telegram
});

const walletMnemonicArray = 'put your mnemonic'.split(' ');
const walletKeyPair = await mnemonicToWalletKey(walletMnemonicArray); // extract private and public keys from mnemonic
const wallet = client.open(HighloadWalletV3.createFromConfig({
    publicKey: walletKeyPair.publicKey,
    subwalletId: 0x10ad,
    timeout: 60 * 60, // 1 hour
}, HIGHLOAD_V3_CODE));

console.log(`Wallet address: ${wallet.address.toString()}`);
```

</TabItem>
</Tabs> 

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–µ–Ω –æ–±—ã—á–Ω—ã–π –∫–æ—à–µ–ª–µ–∫, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –±—É–¥–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { WalletContractV3R2 } from "@ton/ton";

const deployerWalletMnemonicArray = 'put your mnemonic'.split(' ');
const deployerWalletKeyPair = await mnemonicToWalletKey(deployerWalletMnemonicArray); // extract private and public keys from mnemonic
const deployerWallet = client.open(WalletContractV3R2.create({
    publicKey: deployerWalletKeyPair.publicKey,
    workchain: 0
}));
console.log(`Deployer wallet address: ${deployerWallet.address.toString()}`);
```

</TabItem>
</Tabs> 

–ï—Å–ª–∏ —É –≤–∞—Å –∫–æ—à–µ–ª–µ–∫ –≤–µ—Ä—Å–∏–∏ V4, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `WalletContractV4`. –¢–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
await wallet.sendDeploy(deployerWallet.sender(deployerWalletKeyPair.secretKey), toNano(0.05));
```

</TabItem>
</Tabs> 

–ú–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞—à –∫–æ—à–µ–ª–µ–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç, –ø—Ä–æ–≤–µ—Ä–∏–≤ –∞–¥—Ä–µ—Å, –≤—ã–≤–µ–¥–µ–Ω–Ω—ã–π –≤ –∫–æ–Ω—Å–æ–ª–∏, –≤ –±–ª–æ–∫—á–µ–π–Ω-–æ–±–æ–∑—Ä–µ–≤–∞—Ç–µ–ª–µ.

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π highload-–∫–æ—à–µ–ª—å–∫–æ–º V3

–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–∞–∫–∂–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±–µ—Ä—Ç–∫—É, –Ω–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å Query ID –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞ –∫–æ—à–µ–ª—å–∫–∞:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address } from "@ton/core";
import { TonClient } from "@ton/ton";
import { HighloadWalletV3 } from "./wrappers/HighloadWalletV3";
import { mnemonicToWalletKey } from "@ton/crypto";

const client = new TonClient({
    endpoint: 'https://toncenter.com/api/v2/jsonRPC',
    apiKey: 'put your api key' // you can get an api key from @tonapibot bot in Telegram
});

const walletMnemonicArray = 'put your mnemonic'.split(' ');
const walletKeyPair = await mnemonicToWalletKey(walletMnemonicArray); // extract private and public keys from mnemonic
const wallet = client.open(HighloadWalletV3.createFromAddress(Address.parse('put your high-load wallet address')));
console.log(`Wallet address: ${wallet.address.toString()}`);
```

</TabItem>
</Tabs> 

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ `HighloadQueryId`. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å `shift` –∏ `bit_number`. –î–ª—è –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `fromShiftAndBitNumber`:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { HighloadQueryId } from "./wrappers/HighloadQueryId";

const queryHandler = HighloadQueryId.fromShiftAndBitNumber(0n, 0n);
```

</TabItem>
</Tabs> 

–ú—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –∑–¥–µ—Å—å –Ω—É–ª–∏, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤—ã —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –∫–∞–∫–∏–µ-–ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–Ω–µ–µ, —Ç–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–∑—è—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–π. –¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è, –∏ –¥–æ–±–∞–≤–∏–º –≤ –Ω–µ–≥–æ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—à–∏ TON –æ–±—Ä–∞—Ç–Ω–æ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { beginCell, internal, OutActionSendMsg, SendMode, toNano } from "@ton/core";

const actions: OutActionSendMsg[] = [];
actions.push({
    type: 'sendMsg',
    mode: SendMode.CARRY_ALL_REMAINING_BALANCE,
    outMsg: internal({
        to: Address.parse('put address of deployer wallet'),
        value: toNano(0),
        body: beginCell()
            .storeUint(0, 32)
            .storeStringTail('Hello, TON!')
            .endCell()
    })
});
```

</TabItem>
</Tabs> 

–î–∞–ª–µ–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è `subwalletId`, `timeout`, `internalMessageValue` –∏ `createdAt`:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
const subwalletId = 0x10ad;
const timeout = 60 * 60; // must be same as in the contract
const internalMessageValue = toNano(0.01); // in real case it is recommended to set the value to 1 TON
const createdAt = Math.floor(Date.now() / 1000) - 60; // LiteServers have some delay in time
await wallet.sendBatch(
    walletKeyPair.secretKey,
    actions,
    subwalletId,
    queryHandler,
    timeout,
    internalMessageValue,
    SendMode.PAY_GAS_SEPARATELY,
    createdAt
);
```

</TabItem>
</Tabs> 

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `getNext` –≤ `queryHandler` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í —Ä–µ–∞–ª—å–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è `timeout * 2`.

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
queryHandler.getNext();
```

</TabItem>
</Tabs> 

## Highload Wallet V2 (—É—Å—Ç–∞—Ä–µ–≤—à–µ–µ)

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –ö–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –æ–±—ã—á–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –¥–æ 4 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ —Ä–∞–∑, —Ö—Ä–∞–Ω—è [–º–∞–∫—Å–∏–º—É–º 4 —Å—Å—ã–ª–∫–∏](/v3/documentation/data-formats/tlb/cell-boc#cell) –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ. Highload-–∫–æ—à–µ–ª—å–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ 255 —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–µ–π—Å—Ç–≤–∏–π) –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–ª–æ–∫—á–µ–π–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 255.

–ë–∏—Ä–∂–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è–≤–ª—è—é—Ç—Å—è –ª—É—á—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º –∫—Ä—É–ø–Ω–æ–º–∞—Å—à—Ç–∞–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è highload-–∫–æ—à–µ–ª—å–∫–æ–≤. –¢–∞–∫–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∏—Ä–∂–∏, –∫–∞–∫ Binance –∏ –¥—Ä—É–≥–∏–µ, –∏–º–µ—é—Ç –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –±–∞–∑—ã, –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –≤—ã–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤. Highload-–∫–æ—à–µ–ª—å–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤.

### –ö–æ–¥ FunC highload-–∫–æ—à–µ–ª—å–∫–∞

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º [—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ highload-–∫–æ—à–µ–ª—å–∫–∞](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/new-highload-wallet-v2.fif):

```func
() recv_external(slice in_msg) impure {
  var signature = in_msg~load_bits(512); ;; get signature from the message body
  var cs = in_msg;
  var (subwallet_id, query_id) = (cs~load_uint(32), cs~load_uint(64)); ;; get rest values from the message body
  var bound = (now() << 32); ;; bitwise left shift operation
  throw_if(35, query_id < bound); ;; throw an error if message has expired
  var ds = get_data().begin_parse();
  var (stored_subwallet, last_cleaned, public_key, old_queries) = (ds~load_uint(32), ds~load_uint(64), ds~load_uint(256), ds~load_dict()); ;; read values from storage
  ds.end_parse(); ;; make sure we do not have anything in ds
  (_, var found?) = old_queries.udict_get?(64, query_id); ;; check if we have already had such a request
  throw_if(32, found?); ;; if yes throw an error
  throw_unless(34, subwallet_id == stored_subwallet);
  throw_unless(35, check_signature(slice_hash(in_msg), signature, public_key));
  var dict = cs~load_dict(); ;; get dictionary with messages
  cs.end_parse(); ;; make sure we do not have anything in cs
  accept_message();
```

> üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
>
> ["–ü–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏" –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#dict_get)
>
> [`load_dict()` –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#load_dict)
>
> [`udict_get?()` –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#dict_get)

–í—ã –∑–∞–º–µ—Ç–∏–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤. –¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç highload-–∫–æ—à–µ–ª—å–∫–∏ –Ω–∞ TON (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º subwallet, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–∏ –æ–± —ç—Ç–æ–º —Ä–∞–Ω–µ–µ).

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Query ID –≤–º–µ—Å—Ç–æ Seqno

–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, –æ–±—ã—á–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å–≤–æ–π `seqno` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ `1`. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∂–¥–∞—Ç—å, –ø–æ–∫–∞ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è, –∑–∞—Ç–µ–º –∏–∑–≤–ª–µ–∫–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é GET-–º–µ—Ç–æ–¥–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
–≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ highload-–∫–æ—à–µ–ª—å–∫–∏ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã (–∫–∞–∫ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤—ã—à–µ, –æ–Ω–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π). –ü–æ—ç—Ç–æ–º—É highload-–∫–æ—à–µ–ª—å–∫–∏ –Ω–∞ TON –∏—Å–ø–æ–ª—å–∑—É—é—Ç `query_id`.

–ï—Å–ª–∏ —Ç–∞–∫–æ–π –∂–µ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –ø—Ä–∏–º–µ—Ç –µ–≥–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω —É–∂–µ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω:

```func
var (stored_subwallet, last_cleaned, public_key, old_queries) = (ds~load_uint(32), ds~load_uint(64), ds~load_uint(256), ds~load_dict()); ;; read values from storage
ds.end_parse(); ;; make sure we do not have anything in ds
(_, var found?) = old_queries.udict_get?(64, query_id); ;; check if we have already had such a request
throw_if(32, found?); ;; if yes throw an error
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã **–∑–∞—â–∏—â–∞–µ–º—Å—è –æ—Ç –ø–æ–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**, —á—Ç–æ –±—ã–ª–æ —Ä–æ–ª—å—é seqno –≤ –æ–±—ã—á–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–∞—Ö.

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–Ω –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Ü–∏–∫–ª. –í–æ –≤—Ä–µ–º—è —ç—Ç–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ —Å–ª–æ–≤–∞—Ä—è —Å—Ä–µ–∑—ã ‚Äì `slices`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ä–µ–∂–∏–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Å–ª–æ–≤–∞—Ä—å –Ω–µ –æ–ø—É—Å—Ç–µ–µ—Ç.

```func
int i = -1; ;; we write -1 because it will be the smallest value among all dictionary keys
do {
  (i, var cs, var f) = dict.idict_get_next?(16, i); ;; get the key and its corresponding value with the smallest key, which is greater than i
  if (f) { ;; check if any value was found
    var mode = cs~load_uint(8); ;; load message mode
    send_raw_message(cs~load_ref(), mode); ;; load message itself and send it
  }
} until (~ f); ;; if any value was found continue
```

> üí° –ü–æ–ª–µ–∑–Ω–∞—è —Å—Å—ã–ª–∫–∞:
>
> [`idict_get_next()` –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#dict_get_next)

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ, `f` –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ -1 (true). –û–ø–µ—Ä–∞—Ü–∏—è `~ -1` (–ø–æ–±–∏—Ç–æ–≤–æ–µ "–Ω–µ") –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ 0, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ü–∏–∫–ª —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å. –û–¥–Ω–∞–∫–æ, –∫–æ–≥–¥–∞ —Å–ª–æ–≤–∞—Ä—å –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—á–∏–Ω–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç–µ—Ö –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ **–∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –±–æ–ª—å—à–µ -1** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0), –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 1 —Å –∫–∞–∂–¥—ã–º –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º. –¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, [—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ TON —Å–∞–º–∏ –æ–ø–ª–∞—á–∏–≤–∞—é—Ç —Å–≤–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ](/v3/documentation/smart-contracts/transaction-fees/fees-low-level#–ø–ª–∞—Ç–∞-–∑–∞-—Ö—Ä–∞–Ω–µ–Ω–∏–µ). –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö, –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ–π —Å–µ—Ç–µ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –°–æ–æ–±—â–µ–Ω–∏—è —Å—Ç–∞—Ä—à–µ 64 —Å–µ–∫—É–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```func
bound -= (64 << 32);   ;; clean up records that have expired more than 64 seconds ago
old_queries~udict_set_builder(64, query_id, begin_cell()); ;; add current query to dictionary
var queries = old_queries; ;; copy dictionary to another variable
do {
  var (old_queries', i, _, f) = old_queries.udict_delete_get_min(64);
  f~touch();
  if (f) { ;; check if any value was found
    f = (i < bound); ;; check if more than 64 seconds have elapsed after expiration
  }
  if (f) { 
    old_queries = old_queries'; ;; if yes save changes in our dictionary
    last_cleaned = i; ;; save last removed query
  }
} until (~ f);
```

> üí° –ü–æ–ª–µ–∑–Ω–∞—è —Å—Å—ã–ª–∫–∞:
>
> [`udict_delete_get_min()` –≤ docs](/v3/documentation/smart-contracts/func/docs/stdlib/#dict_delete_get_min)

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `f` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ü–æ—Å–∫–æ–ª—å–∫—É [TVM ‚Äì —ç—Ç–æ —Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞](/v3/documentation/tvm/tvm-overview#tvm---—ç—Ç–æ-—Å—Ç–µ–∫–æ–≤–∞—è-–º–∞—à–∏–Ω–∞), —Ç–æ –≤–æ –≤—Ä–µ–º—è –∫–∞–∂–¥–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `f` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–±—Ä–∞—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –û–ø–µ—Ä–∞—Ü–∏—è `f~touch()` –ø–æ–º–µ—â–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `f` –Ω–∞ –≤–µ—Ä—à–∏–Ω—É —Å—Ç–µ–∫–∞, —á—Ç–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞.

### –ü–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ–º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω—ã–º –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ä–∞–Ω–µ–µ –Ω–µ —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –ø–æ–±–∏—Ç–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏. –°–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ –∫–æ–¥–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:

```func
var bound = (now() << 32); ;; bitwise left shift operation
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫ —á–∏—Å–ª—É —Å–ø—Ä–∞–≤–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è 32 –±–∏—Ç–∞. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–º–µ—â–µ–Ω—ã –Ω–∞ 32 –±–∏—Ç–∞ –≤–ª–µ–≤–æ**. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–≤–∞–π—Ç–µ –≤–æ–∑—å–º–µ–º —á–∏—Å–ª–æ `3` –∏ –ø–µ—Ä–µ–≤–µ–¥–µ–º –µ–≥–æ –≤ –¥–≤–æ–∏—á–Ω—É—é —Ñ–æ—Ä–º—É, –ø–æ–ª—É—á–∏–≤ `11`. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ `3 << 2`, —Å–¥–≤–∏–≥–∞–µ—Ç `11` –Ω–∞ –¥–≤–∞ —Ä–∞–∑—Ä—è–¥–∞ –≤–ª–µ–≤–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–ø—Ä–∞–≤–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–≤–∞ `0`. –í –∏—Ç–æ–≥–µ –º—ã –ø–æ–ª—É—á–∞–µ–º `1100`, —á—Ç–æ —Ä–∞–≤–Ω–æ `12`.

–í —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `now()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç uint32, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ 32 –±–∏—Ç–æ–≤. –°–¥–≤–∏–Ω—É–≤ 32 –±–∏—Ç–∞ –≤–ª–µ–≤–æ, –º—ã –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –º–µ—Å—Ç–æ –¥–ª—è –µ—â–µ –æ–¥–Ω–æ–≥–æ uint32, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —á–µ–≥–æ –ø–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `query_id`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, **timestamp –∏ query_id –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã** –≤ –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–î–∞–ª–µ–µ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞:

```func
bound -= (64 << 32); ;; clean up the records that have expired more than 64 seconds ago
```

–í—ã—à–µ –º—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ —Å–¥–≤–∏–≥–∞ —á–∏—Å–ª–∞ 64 –Ω–∞ 32 –±–∏—Ç–∞, —á—Ç–æ–±—ã **–≤—ã—á–µ—Å—Ç—å 64 —Å–µ–∫—É–Ω–¥—ã** –∏–∑ –Ω–∞—à–µ–≥–æ `timestamp`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –º–æ–∂–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ—à–ª—ã–µ `query_id` –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —è–≤–ª—è—é—Ç—Å—è –ª–∏ –æ–Ω–∏ –º–µ–Ω—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–Ω—å—à–µ, —Ç–æ —Å—Ä–æ–∫ –∏—Ö –¥–µ–π—Å—Ç–≤–∏—è –∏—Å—Ç–µ–∫ –±–æ–ª–µ–µ 64 —Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥:

```func
if (f) { ;; check if any value has been found
  f = (i < bound); ;; check if more than 64 seconds have elapsed after expiration
}
```

–ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —ç—Ç–æ, –¥–∞–≤–∞–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —á–∏—Å–ª–æ–º `1625918400` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ `timestamp`. –ï–≥–æ –¥–≤–æ–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω—É–ª–µ–π —Å–ª–µ–≤–∞ –Ω–∞ 32 –±–∏—Ç–∞) ‚Äì 01100000111010011000101111000000. –í—ã–ø–æ–ª–Ω–∏–≤ 32-–±–∏—Ç–Ω—ã–π —Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 32 –Ω—É–ª—è –≤ –∫–æ–Ω—Ü–µ –¥–≤–æ–∏—á–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ —á–∏—Å–ª–∞.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±–æ–π query_id (uint32)**. –ó–∞—Ç–µ–º, –≤—ã—á–∏—Ç–∞—è `64 << 32`, –º—ã –ø–æ–ª—É—á–∏–º `timestamp`, –∫–æ—Ç–æ—Ä—ã–π 64 —Å–µ–∫—É–Ω–¥—ã –Ω–∞–∑–∞–¥ –∏–º–µ–ª —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π `query_id`. –≠—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è `((1625918400 << 32) - (64 << 32)) >> 32`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –º–æ–∂–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —á–∞—Å—Ç–∏ –Ω–∞—à–µ–≥–æ —á–∏—Å–ª–∞ (timestamp), –∏ query_id –Ω–µ –±—É–¥–µ—Ç –º–µ—à–∞—Ç—å.

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

```func
  set_data(begin_cell()
    .store_uint(stored_subwallet, 32)
    .store_uint(last_cleaned, 64)
    .store_uint(public_key, 256)
    .store_dict(old_queries)
    .end_cell());
}
```

### GET-–º–µ—Ç–æ–¥—ã

–ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å, –ø—Ä–µ–∂–¥–µ —á–µ–º –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äì —ç—Ç–æ GET-–º–µ—Ç–æ–¥—ã highload-–∫–æ—à–µ–ª—å–∫–∞:

|                                       –ú–µ—Ç–æ–¥                                       |                                                                                                                                         –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                        |
| :-------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|        int processed?(int query_id)       | –£–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `-1`, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –∏ `0`, –µ—Å–ª–∏ –Ω–µ—Ç. –¢–∞–∫–∂–µ –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `1`, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω, –ø–æ—Å–∫–æ–ª—å–∫—É –∑–∞–ø—Ä–æ—Å —Å—Ç–∞—Ä—ã–π –∏ –±–æ–ª—å—à–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ |
| int get_public_key() |                                                                                                     –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á. –ú—ã —É–∂–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–Ω–µ–µ                                                                                                     |

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–µ—Ç–æ–¥ `int processed?(int query_id)`, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å last_cleaned:

```func
int processed?(int query_id) method_id {
  var ds = get_data().begin_parse();
  var (_, last_cleaned, _, old_queries) = (ds~load_uint(32), ds~load_uint(64), ds~load_uint(256), ds~load_dict());
  ds.end_parse();
  (_, var found) = old_queries.udict_get?(64, query_id);
  return found ? true : - (query_id <= last_cleaned);
}
```

–ó–Ω–∞—á–µ–Ω–∏–µ `last_cleaned` –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ —Å–ª–æ–≤–∞—Ä—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞–π–¥–µ–Ω, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `true`, –∞ –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `- (query_id <= last_cleaned)`. –ó–Ω–∞—á–µ–Ω–∏–µ `last_cleaned` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —É–¥–∞–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å **—Å –Ω–∞–∏–±–æ–ª—å—à–∏–º timestamp**, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –º—ã –Ω–∞—á–∏–Ω–∞–ª–∏ —Å –Ω–∞–∏–º–µ–Ω—å—à–µ–≥–æ timestamp.

–ï—Å–ª–∏ `query_id`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ –º–µ—Ç–æ–¥, –º–µ–Ω—å—à–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `last_cleaned`, —Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –±—ã–ª –ª–∏ –æ–Ω –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∏–ª–∏ –Ω–µ—Ç. –ü–æ—ç—Ç–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `query_id <= last_cleaned` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `-1`, –∞ –º–∏–Ω—É—Å –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –º–µ–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ `1`. –ï—Å–ª–∏ `query_id` –±–æ–ª—å—à–µ, —á–µ–º `last_cleaned`, —Ç–æ –º–µ—Ç–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –æ–Ω –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ highload-–∫–æ—à–µ–ª—å–∫–∞ V2

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å highload-–∫–æ—à–µ–ª–µ–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫–∏–π –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –∫–ª—é—á –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.

–ß—Ç–æ–±—ã –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é highload-–∫–æ—à–µ–ª—å–∫–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å [–∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/new-highload-wallet-v2.fif) –≤ —Ç—É –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è stdlib.fc –∏ wallet_v3, –∏ –Ω–µ –∑–∞–±—ã—Ç—å –¥–æ–±–∞–≤–∏—Ç—å `#include "stdlib.fc";` –≤ –Ω–∞—á–∞–ª–æ –∫–æ–¥–∞. –î–∞–ª–µ–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∫–æ–¥ highload-–∫–æ—à–µ–ª—å–∫–∞, –∫–∞–∫ –º—ã —ç—Ç–æ –¥–µ–ª–∞–ª–∏ –≤ [—ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ](#–∫–æ–º–ø–∏–ª—è—Ü–∏—è-–∫–æ–¥–∞-–∫–æ—à–µ–ª—å–∫–∞):

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { compileFunc } from '@ton-community/func-js';
import fs from 'fs'
import { Cell } from '@ton/core';

const result = await compileFunc({
    targets: ['highload_wallet.fc'], // targets of your project
    sources: {
        'stdlib.fc': fs.readFileSync('./src/stdlib.fc', { encoding: 'utf-8' }),
        'highload_wallet.fc': fs.readFileSync('./src/highload_wallet.fc', { encoding: 'utf-8' }),
    }
});

if (result.status === 'error') {
console.error(result.message)
return;
}

const codeCell = Cell.fromBoc(Buffer.from(result.codeBoc, 'base64'))[0];

// now we have base64 encoded BOC with compiled code in result.codeBoc
console.log('Code BOC: ' + result.codeBoc);
console.log('\nHash: ' + codeCell.hash().toString('base64')); // get the hash of cell and convert in to base64 encoded string

```

</TabItem>
</Tabs>

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:

```text
Code BOC: te6ccgEBCQEA5QABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQHq8oMI1xgg0x/TP/gjqh9TILnyY+1E0NMf0z/T//QE0VNggED0Dm+hMfJgUXO68qIH+QFUEIf5EPKjAvQE0fgAf44WIYAQ9HhvpSCYAtMH1DAB+wCRMuIBs+ZbgyWhyEA0gED0Q4rmMQHIyx8Tyz/L//QAye1UCAAE0DACASAGBwAXvZznaiaGmvmOuF/8AEG+X5dqJoaY+Y6Z/p/5j6AmipEEAgegc30JjJLb/JXdHxQANCCAQPSWb6VsEiCUMFMDud4gkzM2AZJsIeKz

Hash: lJTRzI7fEvBWcaGpugmSEJbrUIEeGSTsZcPGKfu4CBI=
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ base64 –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —è—á–µ–π–∫–∏ —Å –∫–æ–¥–æ–º –Ω–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –≤ –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –∏ —è–∑—ã–∫–∞—Ö —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<Tabs groupId="code-examples">
<TabItem value="go" label="Golang">

```go
import (
  "encoding/base64"
  "github.com/xssnick/tonutils-go/tvm/cell"
  "log"
)

base64BOC := "te6ccgEBCQEA5QABFP8A9KQT9LzyyAsBAgEgAgMCAUgEBQHq8oMI1xgg0x/TP/gjqh9TILnyY+1E0NMf0z/T//QE0VNggED0Dm+hMfJgUXO68qIH+QFUEIf5EPKjAvQE0fgAf44WIYAQ9HhvpSCYAtMH1DAB+wCRMuIBs+ZbgyWhyEA0gED0Q4rmMQHIyx8Tyz/L//QAye1UCAAE0DACASAGBwAXvZznaiaGmvmOuF/8AEG+X5dqJoaY+Y6Z/p/5j6AmipEEAgegc30JjJLb/JXdHxQANCCAQPSWb6VsEiCUMFMDud4gkzM2AZJsIeKz" // save our base64 encoded output from compiler to variable
codeCellBytes, _ := base64.StdEncoding.DecodeString(base64BOC) // decode base64 in order to get byte array
codeCell, err := cell.FromBOC(codeCellBytes) // get cell with code from byte array
if err != nil { // check if there is any error
  panic(err) 
}

log.Println("Hash:", base64.StdEncoding.EncodeToString(codeCell.Hash())) // get the hash of our cell, encode it to base64 because it has []byte type and output to the terminal
```

</TabItem>
</Tabs>

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —è—á–µ–π–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é `initial data` (–ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), —Å–æ–∑–¥–∞—Ç—å State Init –∏ –≤—ã—á–∏—Å–ª–∏—Ç—å –∞–¥—Ä–µ—Å highload-–∫–æ—à–µ–ª—å–∫–∞. –ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ `subwallet_id`, `last_cleaned`, `public_key` –∏ `old_queries` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address, beginCell } from '@ton/core';
import { mnemonicToWalletKey } from '@ton/crypto';

const highloadMnemonicArray = 'put your mnemonic that you have generated and saved before'.split(' ');
const highloadKeyPair = await mnemonicToWalletKey(highloadMnemonicArray); // extract private and public keys from mnemonic

const dataCell = beginCell()
    .storeUint(698983191, 32) // Subwallet ID
    .storeUint(0, 64) // Last cleaned
    .storeBuffer(highloadKeyPair.publicKey) // Public Key
    .storeBit(0) // indicate that the dictionary is empty
    .endCell();

const stateInit = beginCell()
    .storeBit(0) // No split_depth
    .storeBit(0) // No special
    .storeBit(1) // We have code
    .storeRef(codeCell)
    .storeBit(1) // We have data
    .storeRef(dataCell)
    .storeBit(0) // No library
    .endCell();

const contractAddress = new Address(0, stateInit.hash()); // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
console.log(`Contract address: ${contractAddress.toString()}`); // Output contract address to console
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "crypto/ed25519"
  "crypto/hmac"
  "crypto/sha512"
  "github.com/xssnick/tonutils-go/address"
  "golang.org/x/crypto/pbkdf2"
  "strings"
)

highloadMnemonicArray := strings.Split("put your mnemonic that you have generated and saved before", " ") // word1 word2 word3
mac := hmac.New(sha512.New, []byte(strings.Join(highloadMnemonicArray, " ")))
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len
highloadPrivateKey := ed25519.NewKeyFromSeed(k)                      // get private key
highloadPublicKey := highloadPrivateKey.Public().(ed25519.PublicKey) // get public key from private key

dataCell := cell.BeginCell().
  MustStoreUInt(698983191, 32).           // Subwallet ID
  MustStoreUInt(0, 64).                   // Last cleaned
  MustStoreSlice(highloadPublicKey, 256). // Public Key
  MustStoreBoolBit(false).                // indicate that the dictionary is empty
  EndCell()

stateInit := cell.BeginCell().
  MustStoreBoolBit(false). // No split_depth
  MustStoreBoolBit(false). // No special
  MustStoreBoolBit(true).  // We have code
  MustStoreRef(codeCell).
  MustStoreBoolBit(true). // We have data
  MustStoreRef(dataCell).
  MustStoreBoolBit(false). // No library
  EndCell()

contractAddress := address.NewAddress(0, 0, stateInit.Hash()) // get the hash of stateInit to get the address of our smart contract in workchain with ID 0
log.Println("Contract address:", contractAddress.String())    // Output contract address to console
```

</TabItem>
</Tabs> 

:::caution
–í—Å–µ, —á—Ç–æ –º—ã –æ–ø–∏—Å–∞–ª–∏ –≤—ã—à–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–º –∂–µ —à–∞–≥–∞–º, —á—Ç–æ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ [—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª–µ–∫](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞-—á–µ—Ä–µ–∑-–∫–æ—à–µ–ª–µ–∫). –î–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π [–∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ GitHub](https://github.com/aSpite/wallet-tutorial).
:::

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π highload-–∫–æ—à–µ–ª—å–∫–æ–º V2

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º highload-–∫–æ—à–µ–ª–µ–∫ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–∑—å–º–µ–º 12 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, —á—Ç–æ–±—ã –ø–ª–∞—Ç–∞ –∑–∞ –≥–∞–∑ –±—ã–ª–∞ –Ω–µ–±–æ–ª—å—à–æ–π.

:::info highload-–±–∞–ª–∞–Ω—Å
–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –Ω–µ –º–µ–Ω–µ–µ 0.5 TON.
:::

–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –∫–æ–¥–æ–º, –∞ –∞–¥—Ä–µ—Å–æ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥–µ—Ç –∫–æ—à–µ–ª–µ–∫, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Address, beginCell, Cell, toNano } from '@ton/core';

let internalMessages:Cell[] = [];
const walletAddress = Address.parse('put your wallet address from which you deployed high-load wallet');

for (let i = 0; i < 12; i++) {
    const internalMessageBody = beginCell()
        .storeUint(0, 32)
        .storeStringTail(`Hello, TON! #${i}`)
        .endCell();

    const internalMessage = beginCell()
        .storeUint(0x18, 6) // bounce
        .storeAddress(walletAddress)
        .storeCoins(toNano('0.01'))
        .storeUint(0, 1 + 4 + 4 + 64 + 32)
        .storeBit(0) // We do not have State Init
        .storeBit(1) // We store Message Body as a reference
        .storeRef(internalMessageBody) // Store Message Body Init as a reference
        .endCell();

    internalMessages.push(internalMessage);
}
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "fmt"
  "github.com/xssnick/tonutils-go/address"
  "github.com/xssnick/tonutils-go/tlb"
  "github.com/xssnick/tonutils-go/tvm/cell"
)

var internalMessages []*cell.Cell
walletAddress := address.MustParseAddr("put your wallet address from which you deployed high-load wallet")

for i := 0; i < 12; i++ {
  comment := fmt.Sprintf("Hello, TON! #%d", i)
  internalMessageBody := cell.BeginCell().
    MustStoreUInt(0, 32).
    MustStoreBinarySnake([]byte(comment)).
    EndCell()

  internalMessage := cell.BeginCell().
    MustStoreUInt(0x18, 6). // bounce
    MustStoreAddr(walletAddress).
    MustStoreBigCoins(tlb.MustFromTON("0.001").NanoTON()).
    MustStoreUInt(0, 1+4+4+64+32).
    MustStoreBoolBit(false). // We do not have State Init
    MustStoreBoolBit(true). // We store Message Body as a reference
    MustStoreRef(internalMessageBody). // Store Message Body Init as a reference
    EndCell()

  messageData := cell.BeginCell().
    MustStoreUInt(3, 8). // transaction mode
    MustStoreRef(internalMessage).
    EndCell()

	internalMessages = append(internalMessages, messageData)
}
```

</TabItem>
</Tabs>

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã—à–µ –±—É–¥–µ—Ç –º–∞—Å—Å–∏–≤ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –î–∞–ª–µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å —Ç–µ–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –≠—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { Dictionary } from '@ton/core';
import { mnemonicToWalletKey, sign } from '@ton/crypto';
import * as crypto from 'crypto';

const dictionary = Dictionary.empty<number, Cell>(); // create an empty dictionary with the key as a number and the value as a cell
for (let i = 0; i < internalMessages.length; i++) {
    const internalMessage = internalMessages[i]; // get our message from an array
    dictionary.set(i, internalMessage); // save the message in the dictionary
}

const queryID = crypto.randomBytes(4).readUint32BE(); // create a random uint32 number, 4 bytes = 32 bits
const now = Math.floor(Date.now() / 1000); // get current timestamp
const timeout = 120; // timeout for message expiration, 120 seconds = 2 minutes
const finalQueryID = (BigInt(now + timeout) << 32n) + BigInt(queryID); // get our final query_id
console.log(finalQueryID); // print query_id. With this query_id we can call GET method to check if our request has been processed

const toSign = beginCell()
    .storeUint(698983191, 32) // subwallet_id
    .storeUint(finalQueryID, 64)
    // Here we create our own method that will save the 
    // message mode and a reference to the message
    .storeDict(dictionary, Dictionary.Keys.Int(16), {
        serialize: (src, buidler) => {
            buidler.storeUint(3, 8); // save message mode, mode = 3
            buidler.storeRef(src); // save message as reference
        },
        // We won't actually use this, but this method 
        // will help to read our dictionary that we saved
        parse: (src) => {
            let cell = beginCell()
                .storeUint(src.loadUint(8), 8)
                .storeRef(src.loadRef())
                .endCell();
            return cell;
        }
    }
);

const highloadMnemonicArray = 'put your high-load wallet mnemonic'.split(' ');
const highloadKeyPair = await mnemonicToWalletKey(highloadMnemonicArray); // extract private and public keys from mnemonic
const highloadWalletAddress = Address.parse('put your high-load wallet address');

const signature = sign(toSign.endCell().hash(), highloadKeyPair.secretKey); // get the hash of our message to wallet smart contract and sign it to get signature
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "crypto/ed25519"
  "crypto/hmac"
  "crypto/sha512"
  "golang.org/x/crypto/pbkdf2"
  "log"
  "math/big"
  "math/rand"
  "strings"
  "time"
)

dictionary := cell.NewDict(16) // create an empty dictionary with the key as a number and the value as a cell
for i := 0; i < len(internalMessages); i++ {
  internalMessage := internalMessages[i]                             // get our message from an array
  err := dictionary.SetIntKey(big.NewInt(int64(i)), internalMessage) // save the message in the dictionary
  if err != nil {
    return
  }
}

queryID := rand.Uint32()
timeout := 120                                                               // timeout for message expiration, 120 seconds = 2 minutes
now := time.Now().Add(time.Duration(timeout)*time.Second).UTC().Unix() << 32 // get current timestamp + timeout
finalQueryID := uint64(now) + uint64(queryID)                                // get our final query_id
log.Println(finalQueryID)                                                    // print query_id. With this query_id we can call GET method to check if our request has been processed

toSign := cell.BeginCell().
  MustStoreUInt(698983191, 32). // subwallet_id
  MustStoreUInt(finalQueryID, 64).
  MustStoreDict(dictionary)

highloadMnemonicArray := strings.Split("put your high-load wallet mnemonic", " ") // word1 word2 word3
mac := hmac.New(sha512.New, []byte(strings.Join(highloadMnemonicArray, " ")))
hash := mac.Sum(nil)
k := pbkdf2.Key(hash, []byte("TON default seed"), 100000, 32, sha512.New) // In TON libraries "TON default seed" is used as salt when getting keys
// 32 is a key len
highloadPrivateKey := ed25519.NewKeyFromSeed(k) // get private key
highloadWalletAddress := address.MustParseAddr("put your high-load wallet address")

signature := ed25519.Sign(highloadPrivateKey, toSign.EndCell().Hash())
```

</TabItem>
</Tabs>

:::note –í–ê–ñ–ù–û
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ JavaScript –∏ TypeScript –Ω–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∂–∏–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –¢–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ @ton/ton –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Ä—É—á–Ω–æ. –ü–æ—ç—Ç–æ–º—É –º–µ—Ç–æ–¥ —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∂–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –∑–∞—Ç–µ–º —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ï—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `Dictionary.Values.Cell()` –¥–ª—è –º–µ—Ç–æ–¥–∞ value, —Ç–æ –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º –≤ –≤–∏–¥–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —è—á–µ–π–∫—É, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—è –æ—Ç–¥–µ–ª—å–Ω–æ —Ä–µ–∂–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è.
:::

–î–∞–ª–µ–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –≤–Ω–µ—à–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏–º –µ–≥–æ –≤ –±–ª–æ–∫—á–µ–π–Ω —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–¥–∞:

<Tabs groupId="code-examples">
<TabItem value="js" label="JavaScript">

```js
import { TonClient } from '@ton/ton';

const body = beginCell()
    .storeBuffer(signature) // store signature
    .storeBuilder(toSign) // store our message
    .endCell();

const externalMessage = beginCell()
    .storeUint(0b10, 2) // indicate that it is an incoming external message
    .storeUint(0, 2) // src -> addr_none
    .storeAddress(highloadWalletAddress)
    .storeCoins(0) // Import fee
    .storeBit(0) // We do not have State Init
    .storeBit(1) // We store Message Body as a reference
    .storeRef(body) // Store Message Body as a reference
    .endCell();

// We do not need a key here as we will be sending 1 request per second
const client = new TonClient({
    endpoint: 'https://toncenter.com/api/v2/jsonRPC',
    // apiKey: 'put your api key' // you can get an api key from @tonapibot bot in Telegram
});

client.sendFile(externalMessage.toBoc());
```

</TabItem>
<TabItem value="go" label="Golang">

```go
import (
  "context"
  "github.com/xssnick/tonutils-go/liteclient"
  "github.com/xssnick/tonutils-go/tl"
  "github.com/xssnick/tonutils-go/ton"
)

body := cell.BeginCell().
  MustStoreSlice(signature, 512). // store signature
  MustStoreBuilder(toSign). // store our message
  EndCell()

externalMessage := cell.BeginCell().
  MustStoreUInt(0b10, 2). // ext_in_msg_info$10
  MustStoreUInt(0, 2). // src -> addr_none
  MustStoreAddr(highloadWalletAddress). // Destination address
  MustStoreCoins(0). // Import Fee
  MustStoreBoolBit(false). // No State Init
  MustStoreBoolBit(true). // We store Message Body as a reference
  MustStoreRef(body). // Store Message Body as a reference
  EndCell()

connection := liteclient.NewConnectionPool()
configUrl := "https://ton-blockchain.github.io/global.config.json"
err := connection.AddConnectionsFromConfigUrl(context.Background(), configUrl)
if err != nil {
  panic(err)
}
client := ton.NewAPIClient(connection)

var resp tl.Serializable
err = client.Client().QueryLiteserver(context.Background(), ton.SendMessage{Body: externalMessage.ToBOCWithFlags(false)}, &resp)

if err != nil {
  log.Fatalln(err.Error())
  return
}
```

</TabItem>
</Tabs>

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –Ω–∞—à –∫–æ—à–µ–ª–µ–∫ –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞ –Ω–µ–≥–æ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 12 –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å GET-–º–µ—Ç–æ–¥ `processed?`, –∏—Å–ø–æ–ª—å–∑—É—è query_id, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `-1` (true).

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –Ω–∞–º –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω–µ TON. –ú—ã –∏–∑—É—á–∏–ª–∏ –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.

–í—Å–µ —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –≥–ª—É–±–∂–µ –ø–æ–Ω–∏–º–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–ª–æ–∫—á–µ–π–Ω–∞ TON. –ú—ã —Ç–∞–∫–∂–µ –Ω–∞—É—á–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å highload-–∫–æ—à–µ–ª—å–∫–∏ –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–µ—Ç–∞–ª–µ–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

## üß© –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ß—Ç–µ–Ω–∏–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –≤—ã—à–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äì —Å–ª–æ–∂–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ, –∏ –ø–æ–Ω—è—Ç—å –≤—Å—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É TON –¥–æ–≤–æ–ª—å–Ω–æ —Ç—Ä—É–¥–Ω–æ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —ç—Ç–æ —Ö–æ—Ä–æ—à–µ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–≤–ª–µ—á–µ–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –Ω–∞ TON. –ï—â–µ –æ–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äì –Ω–∞—á–∞—Ç—å –∏–∑—É—á–∞—Ç—å, –∫–∞–∫ –ø–∏—Å–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ TON, –æ–±—Ä–∞—Ç–∏–≤—à–∏—Å—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º: [–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –ø–æ FunC](/v3/documentation/smart-contracts/func/overview), [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](/v3/guidelines/smart-contracts/guidelines), [–ü—Ä–∏–º–µ—Ä—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤](/v3/documentation/smart-contracts/contracts-specs/examples), [FunC Cookbook](/v3/documentation/smart-contracts/func/cookbook).

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —á–∏—Ç–∞—Ç–µ–ª—è–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏: [ton.pdf](https://docs.ton.org/ton.pdf) –∏ [tblkch.pdf](https://ton.org/tblkch.pdf).

## üì¨ –û–± –∞–≤—Ç–æ—Ä–µ

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–∞–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–≤—Ç–æ—Ä–æ–º —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ [Telegram](https://t.me/aspite) (@aSpite –∏–ª–∏ @SpiteMoriarty) –∏–ª–∏ [GitHub](https://github.com/aSpite).

## üìñ –°–º. —Ç–∞–∫–∂–µ

- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∫–æ—à–µ–ª—å–∫–∞: [V3](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/wallet3-code.fc), [V4](https://github.com/ton-blockchain/wallet-contract/blob/main/func/wallet-v4-code.fc), [Highload](https://github.com/ton-blockchain/ton/blob/master/crypto/smartcont/new-highload-wallet-v2.fif)

- –ü–æ–ª–µ–∑–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é): [ton.pdf](https://docs.ton.org/ton.pdf), [tblkch.pdf](https://ton.org/tblkch.pdf), [tvm.pdf](https://ton.org/tvm.pdf)

–û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞:

- [@ton/ton (JS/TS)](https://github.com/ton-org/ton)
- [@ton/core (JS/TS)](https://github.com/ton-org/ton-core)
- [@ton/crypto (JS/TS)](https://github.com/ton-org/ton-crypto)
- [tonutils-go (GO)](https://github.com/xssnick/tonutils-go)

–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- [–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è](/v3/documentation/smart-contracts/message-management/internal-messages)

- [–í–Ω–µ—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è](/v3/documentation/smart-contracts/message-management/external-messages)

- [–¢–∏–ø—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫–æ—à–µ–ª—å–∫–∞](/v3/documentation/smart-contracts/contracts-specs/wallet-contracts#–∫–æ—à–µ–ª–µ–∫-v4)

- [TL-B](/v3/documentation/data-formats/tlb/tl-b-language)

- [–ë–ª–æ–∫—á–µ–π–Ω –±–ª–æ–∫—á–µ–π–Ω–æ–≤](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains)

–í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏:

- [Ton Deep](https://github.com/xssnick/ton-deep-doc)

- [Block.tlb](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb)

- [–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é TON](https://github.com/ton-blockchain/TEPs)
