import Feedback from '@site/src/components/Feedback';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# TON Connect для JS

This guide will help you integrate TON Connect into your Javascript app for user authentication and transactions.

If using React for your DApp, look at the [TON Connect UI React SDK](/v3/guidelines/ton-connect/frameworks/react).

If you're using Vue for your DApp, look at the [TON Connect UI Vue SDK](/v3/guidelines/ton-connect/frameworks/vue).

## Implementation

### Установка

<Tabs groupId="Installation">
  <TabItem value="CDN" label="CDN">
Add the script to the `<HEAD>` element of your website:
    <br/>
    <br/>

```html
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
```

</TabItem>
  <TabItem value="NPM" label="NPM">
   Install the [@tonconnect/ui](https://www.npmjs.com/package/@tonconnect/ui) package:

```bash npm2yarn
npm i @tonconnect/ui
```

</TabItem>
</Tabs>

### TON Connect initiation

After installing the package, create a `manifest.json` file for your app.
More information on how to create a `manifest.json` file can be found [here](/v3/guidelines/ton-connect/guidelines/creating-manifest).

Add a button with a `ton-connect` id to connect to the wallet:

```html
<div id="ton-connect"></div>
```

_After this tag_, add a script for `tonConnectUI` in the `<body>` part of the app page:

```html
<script>
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://<YOUR_APP_URL>/tonconnect-manifest.json',
        buttonRootId: 'ton-connect'
    });
</script>
```

### Connect to the wallet

The `'ton-connect'` button in `buttonRootId` will automatically manage clicks.

But you can open **connect modal** programmatically, for example, after clicking on the custom button:

```html
<script>
    async function connectToWallet() {
        const connectedWallet = await tonConnectUI.connectWallet();
        // Do something with connectedWallet if needed
        console.log(connectedWallet);
    }

    // Call the function
    connectToWallet().catch(error => {
        console.error("Error connecting to wallet:", error);
    });
</script>
```

### Перенаправления

#### Настройка стратегии возврата

Чтобы перенаправить пользователя на конкретный URL после подключения, вы можете [настроить стратегию возврата](https://github.com/ton-connect/sdk/tree/main/packages/ui#add-the-return-strategy).

#### Мини-приложения Telegram

Чтобы перенаправить пользователя в [Мини-приложение Telegram](/v3/guidelines/dapps/tma/overview) после подключения кошелька, используйте параметр `twaReturnUrl`:

```tsx
tonConnectUI.uiOptions = {
      twaReturnUrl: 'https://t.me/YOUR_APP_NAME'
  };
```

[Подробнее читайте в документации SDK](https://github.com/ton-connect/sdk/tree/main/packages/ui#use-inside-twa-telegram-web-app)

### Настройка пользовательского интерфейса

TonConnect UI предоставляет интерфейс, который должен быть знаком и узнаваем пользователю при использовании различных приложений. Однако разработчик приложения может изменить этот интерфейс, чтобы он соответствовал интерфейсу приложения.

- [Документация TonConnect UI](https://github.com/ton-connect/sdk/tree/main/packages/ui#ui-customisation)

## SDK documentation

- [Документация SDK](https://github.com/ton-connect/sdk/blob/main/packages/ui/README.md)
- [Последняя документация API](https://ton-connect.github.io/sdk/modules/_tonconnect_ui.html)

## Использование

Let's look at the example of using the TON Connect UI in the app.

### Отправка сообщений

Here's an example of sending a transaction using the TON Connect UI:

```js
import TonConnectUI from '@tonconnect/ui';

const tonConnectUI = new TonConnectUI({ //connect application
    manifestUrl: 'https://<YOUR_APP_URL>/tonconnect-manifest.json',
    buttonRootId: '<YOUR_CONNECT_BUTTON_ANCHOR_ID>'
});

const transaction = {
  validUntil: Math.floor(Date.now() / 1000) + 60, // 60 sec
  messages: [
        {
            address: "EQABa48hjKzg09hN_HjxOic7r8T1PleIy1dRd8NvZ3922MP0", // destination address
            amount: "20000000" //Toncoin in nanotons
        }
    ]
}

const result = await tonConnectUI.sendTransaction(transaction)
```

:::tip
Get more examples on the [Preparing messages](/v3/guidelines/ton-connect/guidelines/preparing-messages) page.
:::

### Understanding transaction status by hash

Learn the principle explained in [payment processing](/v3/guidelines/dapps/asset-processing/payments-processing#check-contracts-transactions) using the tonweb library.

### Signing and verification

Узнайте, как подписывать и проверять сообщения с помощью TON Connect:

- [Signing and verification](/v3/guidelines/ton-connect/guidelines/verifying-signed-in-users)
- [Реализация пользовательского интерфейса TON Connect на GitHub](https://github.com/ton-connect/sdk/tree/main/packages/ui#add-connect-request-parameters-ton_proof)

### Wallet disconnection

Вызов для отключения кошелька:

```js
await tonConnectUI.disconnect();
```

## See also

- [UI customization](https://github.com/ton-connect/sdk/tree/main/packages/ui#ui-customisation)
- [[YouTube] TonConnect UI-React и авторизация через ton_proof](https://youtu.be/wIMbkJHv0Fs?list=PLyDBPwv9EPsCJ226xS5_dKmXXxWx1CKz_&t=1747)
- [[YouTube] Connect TON Connect UI to site [RU]](https://www.youtube.com/watch?v=HUQ1DPfFxG4&list=PLyDBPwv9EPsAIWi8vgic9kiV3KF_wvIcz&index=4)

<Feedback />
