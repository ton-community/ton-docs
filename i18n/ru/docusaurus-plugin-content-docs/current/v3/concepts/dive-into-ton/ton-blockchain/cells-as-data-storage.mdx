import Feedback from '@site/src/components/Feedback';

import ConceptImage from '@site/src/components/conceptImage';
import ThemedImage from '@theme/ThemedImage';

# Ячейки как хранилище данных

В TON всё хранится в **ячейках**. Ячейка — это структура данных, содержащая:

- до **1023 бит** данных (не байт!)
- до **4 ссылок** на другие ячейки
- ячейка хранит биты и ссылки раздельно
- циклические ссылки запрещены: для любой ячейки никто из её ячеек-«потомков» не может ссылаться на неё

Таким образом, все ячейки формируют направленный ациклический граф (DAG). Вот наглядная иллюстрация:

<br />

<ThemedImage
  alt=""
  sources={{
     light: '/img/docs/cells-as-data-storage/dag.png?raw=true',
     dark: '/img/docs/cells-as-data-storage/Cells-as-data-storage_1_dark.png?raw=true',
  }}
/>

<br />

## Типы ячеек

В настоящее время существует пять типов ячеек: один обычный и четыре так называемых «экзотических» (exotic).
Экзотические типы следующие:

- Ячейка обрезанной ветви
- Ячейка ссылки на библиотеку
- Ячейка доказательства Меркла
- Ячейка обновления Меркла

:::tip
Подробнее об экзотических ячейках см: [**TVM Whitepaper, раздел 3**](https://ton.org/tvm.pdf).
:::

## Разновидности ячеек

Ячейка — это непрозрачный объект, оптимизированный для компактного хранения.

Он устраняет дублирование данных: содержимое нескольких эквивалентных подъячеек, на которые ссылаются разные ветви, хранится только один раз. Однако нельзя напрямую изменять или считывать ячейку из-за её непрозрачности. Поэтому существуют два дополнительных варианта ячеек:

- **Builder** — для конструирования ячеек
- **Slice** — для чтения ячеек

Также в TVM используется ещё одна особая разновидность ячеек:

- **Continuation** — для ячеек с оп-кодами инструкций для виртуальной машины TON, см. [обзор TVM](/v3/documentation/tvm/tvm-overview).

## Сериализация данных в ячейки

Любой объект в TON (сообщение, блок или состояние всего блокчейна) сериализуется в ячейку.

Процесс сериализации описывается схемой TL-B. Это формальное описание того, как определённый объект может быть сериализован в *Builder* или как прочитать объект заданного типа из *Slice*.
TL-B для ячеек — это то же самое, что TL или ProtoBuf для байтовых потоков.

Если вы хотите узнать больше подробностей о (де)сериализации ячеек, вы можете прочитать статью [Cell & Bag of Cells](/v3/documentation/data-formats/tlb/cell-boc).

## См. также

- [Блокчейн блокчейнов](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains)
- [Язык TL-B](/v3/documentation/data-formats/tlb/tl-b-language)

<Feedback />
