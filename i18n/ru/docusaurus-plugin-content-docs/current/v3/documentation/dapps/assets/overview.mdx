import Button from '@site/src/components/button'
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Обзор обработки активов

В данной статье представлен **краткий обзор** того, [как работают переводы TON](/v3/documentation/dapps/assets/overview#overview-on-messages-and-transactions), какие [типы активов](/v3/documentation/dapps/assets/overview#digital-asset-types-on-ton) вы можете найти в TON, а также о том, как [взаимодействовать с ton](/v3/documentation/dapps/assets/overview#interaction-with-ton-blockchain) с помощью вашего языка программирования.Настоятельно рекомендуется ознакомиться со всей представленной ниже информацией, прежде чем переходить к последующим страницам.

## Обзор сообщений и транзакций

Покрывая полностью асинхронный формат взаимодействия, блокчейн TON содержит несколько концепций, которые нетипичны для традиционных блокчейнов. В частности, каждое взаимодействие любого субъекта с блокчейном состоит из графа асинхронно передаваемых [сообщений](/v3/documentation/smart-contracts/message-management/messages-and-transactions) между смарт-контрактами и/или внешним миром. Каждая транзакция состоит из одного входящего сообщения и до 255 исходящих сообщений.

Существует 3 типа сообщений, которые полностью описаны [здесь](/v3/documentation/smart-contracts/message-management/sending-messages#types-of-messages). Если коротко:

- [внешнее сообщение](/v3/documentation/smart-contracts/message-management/external-messages):
  - `external in message` (иногда называемое просто `external message`) — это сообщение, которое отправляется из *вне* блокчейна в смарт-контракт *внутри* блокчейна.
  - `external out message` (обычно называемое `logs message`) отправляется из *сущности блокчейна* во *внешний мир*.
- [внутреннее сообщение](/v3/documentation/smart-contracts/message-management/internal-messages) отправляется из одной *сущности блокчейна* в *другую*, может нести некоторое количество цифровых активов и произвольную часть данных.

Стандартный формат любого взаимодействия начинается с отправки внешнего сообщения на смарт-контракт `wallet`. Он, в свою очередь, аутентифицирует отправителя сообщения с помощью криптографии с открытым ключом, берет на себя оплату комиссии и отправляет внутренние сообщения блокчейна. Эта очередь сообщений образует направленный ациклический граф или дерево.

Например:

![](/img/docs/asset-processing/alicemsgDAG.svg)

- Допустим `Алиса` использует [Tonkeeper](https://tonkeeper.com/), для отправки`external message` на свой кошелек
- `external message` – это входящее сообщение для контракта `wallet A v4` с пустым отправителем
- `outgoing message` является исходящим сообщением для контракта `wallet A v4`, а также входящим сообщением для контракта `wallet B v4` с источником `wallet A v4` и пунктом назначения `wallet B v4`

В результате образуются 2 транзакции со своим набором входящих и исходящих сообщений.

Каждое действие, когда контракт принимает сообщение в качестве входных данных (инициированное им), обрабатывает его и генерирует или не генерирует исходящие сообщения в качестве выходных данных, называется `транзакцией`. Подробнее о них можно прочитать [здесь](/v3/documentation/smart-contracts/message-management/messages-and-transactions#what-is-a-transaction).

Подобные `транзакции` могут выполняться **длительный период** времени. Технически, транзакции с очередями сообщений объединяются в блоки, которые в свою очередь обрабатываются валидаторами. Асинхронная природа блокчейна TON **не позволяет предсказать хэш и lt (логическое время) транзакции** на этапе отправки сообщения.

Принятая в блок `транзакция` является окончательной и не может быть изменена.

:::info Подтверждение транзакции
Транзакции TON необратимы после всего лишь одного подтверждения. Для лучшего пользовательского опыта рекомендуется избегать ожидания дополнительных блоков после завершения транзакций в блокчейне TON. Подробнее читайте в [Catchain.pdf](https://docs.ton.org/catchain.pdf#page=3).
:::

Смарт-контракты выплачивают несколько видов [комиссий](/v3/documentation/smart-contracts/transaction-fees/fees) за транзакции. Обычно они вычитаются с баланса входящего сообщения. Формат работы зависит от [режима работы сообщений](/v3/documentation/smart-contracts/message-management/sending-messages#message-modes).Размер комиссий напрямую зависит от конфигурации воркчейна – с максимальными комиссиями в `masterchain` и существенно более низкими комиссиями в `basechain`.

## Типы цифровых активов на TON

TON имеет три типа цифровых активов.

- Toncoin, основной токен сети. Он используется для всех основных операций в блокчейне, например, для оплаты комиссий за газ или стейкинга для валидации.
- Активы контрактов, такие как токены и NFT, которые аналогичны стандартам ERC-20/ERC-721 и управляются произвольными контрактами и, таким образом, могут требовать настраиваемых правил для обработки. Вы можете найти больше информации об их обработке в статьях о [обработке NFT](/v3/guidelines/dapps/asset-processing/nft-processing/nfts) и [обработке жетонов](/v3/guidelines/dapps/asset-processing/jettons).
- Собственный токен – это особый вид активов, который можно прикрепить к любому сообщению в сети. Однако данные активы в настоящее время не используются, поскольку функциональность для выпуска новых собственных токенов закрыта.

## Взаимодействие с блокчейном TON

Основные операции в блокчейне TON можно выполнять через TonLib. Это общая библиотека, которая может быть скомпилирована вместе с узлом TON и предоставлять API для взаимодействия с блокчейном через так называемые lite server (серверы для lite clients).TonLib следует подходу без доверия, проверяя доказательства для всех входящих данных. Таким образом, при взаимодействии нет необходимости в доверенном поставщике данных.Методы, доступные TonLib, перечислены [в схеме TL](https://github.com/ton-blockchain/ton/blob/master/tl/generate/scheme/tonlib_api.tl#L234). Их можно использовать как общую библиотеку через [обертки](/v3/guidelines/dapps/asset-processing/payments-processing/#sdks).

## Читать далее

После прочтения этой статьи, советуем ознакомиться со следующими разделами:

1. [Обработка платежей](/v3/guidelines/dapps/asset-processing/payments-processing), чтобы узнать, как работать с `TON coins`
2. [Обработка жетонов](/v3/guidelines/dapps/asset-processing/jettons), чтобы узнать, как работать с `jettons` (иногда называемыми `tokens`)
3. [Обработка NFT](/v3/guidelines/dapps/asset-processing/nft-processing/nfts), чтобы узнать, как работать с NFT (это особый тип  `jetton`)
