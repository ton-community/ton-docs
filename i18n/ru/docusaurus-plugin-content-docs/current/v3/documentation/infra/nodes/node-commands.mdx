# Флаги командной строки узла TON

:::warning
Эта страница переведена сообществом на русский язык, но нуждается в улучшениях. Если вы хотите принять участие в переводе свяжитесь с [@alexgton](https://t.me/alexgton).
:::

В этом документе описываются различные флаги и параметры, доступные при запуске узла TON. Каждый флаг имеет короткое имя, длинное имя, значение по умолчанию (если используется) и описание его функциональности.

## Общие параметры

| Опция                                                 | Описание                                                                                                                                                                                                                       | Значение по умолчанию                                   | Использование                                                                             |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| `-v`, `-verbosity`                                    | Устанавливает уровень детализации вывода журнала.                                                                                                                                                                              | `INFO` (2)                                              | `-v <level>` (например, `-v 2`)                                                           |
| `-V`, `--version`                                     | Показывает информацию о сборке движка валидатора.                                                                                                                                                                              | Н/Д                                                     | `-V`                                                                                      |
| `-h`, \`--help\`\\`                                   | Выводит справочную информацию.                                                                                                                                                                                                 | Н/Д                                                     | `-h`                                                                                      |
| `-C`, `--global-config`                               | Указывает файл для чтения глобальной конфигурации (узлы начальной загрузки, общедоступные liteservers, блоки инициализации и т. д.).                                                                                           | Н/Д                                                     | `-C <file>`                                                                               |
| `-c`, `-local-config`                                 | Указывает файл для записи/чтения конфигурации локального узла (адреса, ключи и т. д.).                                                                                                                                         | Н/Д                                                     | `-c <file>`                                                                               |
| `-I`, `--ip`                                          | Указывает IP-адрес и порт экземпляра. Используется во время первого запуска.                                                                                                                                                   | Н/Д                                                     | `-I <ip:port>`                                                                            |
| `-D`, `--db`                                          | Указывает корневой каталог для баз данных.                                                                                                                                                                                     | Н/Д                                                     | `-D <path>`                                                                               |
| `-f`, `--fift-dir`                                    | Указывает каталог со скриптами Fift.                                                                                                                                                                                           | Н/Д                                                     | `-f <path>`                                                                               |
| `-d`, `--daemonize`                                   | Разделяет процесс, закрывая стандартный ввод и создавая новую сессию.                                                                                                                                                          | Отключено                                               | `-d`                                                                                      |
| `-l`, `--logname`                                     | Указывает файл для записи логов.                                                                                                                                                                                               | Н/Д                                                     | `-l <file>`                                                                               |
| `-s`, `--state-ttl`                                   | Устанавливает TTL (время жизни) для состояния в секундах.                                                                                                                                                                      | `86400` секунд (1 день)                                 | `-s <seconds>`                                                                            |
| `-m`, `--mempool-num`                                 | Указывает максимальное количество внешних сообщений в мемпуле.                                                                                                                                                                 | Неограниченное количество                               | `-m <number>`                                                                             |
| `-b`, \`--block-ttl\`\\`                              | Устанавливает TTL для блоков в секундах.                                                                                                                                                                                       | `86400` секунд (1 день)                                 | `-b <seconds>`                                                                            |
| `-A`, `--archive-ttl`                                 | Устанавливает TTL для архивных блоков в секундах.                                                                                                                                                                              | `604800` секунд (7 дней)                                | `-A <seconds>`                                                                            |
| `-K`, `--key-proof-ttl`                               | Устанавливает TTL для ключевых блоков в секундах.                                                                                                                                                                              | `315360000` секунд (10 лет)                             | `-K <seconds>`                                                                            |
| `-S`, `--sync-before`                                 | Во время начальной синхронизации загружает все блоки за последнее заданное количество секунд.                                                                                                                                  | `3600` секунд (1 час)                                   | `-S <seconds>`                                                                            |
| `-t`, `--threads`                                     | Указывает количество используемых потоков.                                                                                                                                                                                     | `7`                                                     | `-t <number>`                                                                             |
| `-u`, `--user`                                        | Изменяет пользователя, запускающего процесс.                                                                                                                                                                                   | Н/Д                                                     | `-u <username>`                                                                           |

## Дополнительные параметры

| Опция                                                     | Описание                                                                                                                                                                                                           | Значение по умолчанию                                | Использование                                                                                     |
| --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------- |
| `--shutdown-at`                                           | Планирует выключение валидатора в указанную временную метку Unix.                                                                                                                                                  | N/A                                                  | `--shutdown-at <timestamp>`                                                                       |
| `-T`, `--truncate-db`                                     | Обрезает базу данных с указанным номером последовательности как новый верхний блок мастерчейна.                                                                                                                    | N/A                                                  | `-T <seqno>`                                                                                      |
| `-U`, `--unsafe-catchain-restore`                         | Включает медленный и опасный метод восстановления catchain.                                                                                                                                                        | Отключено                                            | `-U <catchain-seqno>`                                                                             |
| `-F`, `--unsafe-catchain-rotate`                          | Включает принудительную и опасную ротацию catchain.                                                                                                                                                                | Отключено                                            | `-F <block-seqno>:<catchain-seqno>:<height>`                                                      |
| `--celldb-compress-depth`                                 | Оптимизирует CellDb, сохраняя ячейки глубиной X с целыми поддеревьями.                                                                                                                                             | `0` (отключено)                                      | `--celldb-compress-depth <depth>`                                                                 |
| `--max-archive-fd`                                        | Устанавливает ограничение на количество открытых файловых дескрипторов в менеджере архивов. `0` для неограниченного количества.                                                                                    | `0` (неограниченно)                                  | `--max-archive-fd <number>`                                                                       |
| `--archive-preload-period`                                | Предварительно загружает фрагменты архива за последние X секунд при запуске.                                                                                                                                       | `0` секунд (отключено)                               | `--archive-preload-period <seconds>`                                                              |
| `--enable-precompiled-smc`                                | Включает выполнение предварительно скомпилированных смарт-контрактов (экспериментально).                                                                                                                           | Отключено                                            | `--enable-precompiled-smc`                                                                        |
| `--disable-rocksdb-stats`.                                | Отключает сбор статистики RocksDb.                                                                                                                                                                                 | Включено                                             | `--disable-rocksdb-stats`                                                                         |
| `--nonfinal-ls`                                           | Включает специальные запросы локального состояния (LS) к нефинализированным блокам.                                                                                                                                | Отключено                                            | `--nonfinal-ls`                                                                                   |
| `--celldb-cache-size`                                     | Устанавливает размер кэша блока для RocksDb в CellDb в байтах.                                                                                                                                                     | `1G` (1 Гигабайт)                                    | `--celldb-cache-size <size>`                                                                      |
| `--celldb-direct-io`                                      | Включает режим прямого ввода-вывода для RocksDb в CellDb (применяется только при размере кэша >= 30G).                                                                                                             | Отключено                                            | `--celldb-direct-io`                                                                              |
| `--celldb-preload-all`.                                   | Предварительно загружает все ячейки из CellDb при запуске.                                                                                                                                                         | Отключено                                            | `--celldb-preload-all`                                                                            |
| `--celldb-in-memory`                                      | Сохраняет всю celldb в памяти. Для валидаторов с настройками по умолчанию размер celldb ~80-100 Гб, поэтому 128 Гб необходимо, а 256 предпочтительнее.                                                             | Отключено                                            | `--celldb-in-memory`                                                                              |
| `--catchain-max-block-delay`                              | Устанавливает задержку перед созданием нового блока catchain в секундах.                                                                                                                                           | `0.4` секунды                                        | `--catchain-max-block-delay <seconds>`                                                            |
| `--catchain-max-block-delay-slow`                         | Устанавливает максимальную задержку расширенного блока catchain для слишком длинных раундов в секундах.                                                                                                            | `1.0` секунда                                        | `--catchain-max-block-delay-slow <seconds>`                                                       |
| `--fast-state-serializer`                                 | Включает более быстрый сериализатор постоянного состояния, требует больше оперативной памяти.                                                                                                                      | Отключено                                            | `--fast-state-serializer`                                                                         |

## Параметры журналов сеансов

| Параметр                          | Описание                                                                                                          | Значение по умолчанию                          | Использование                                  |
| --------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- | ---------------------------------------------- |
| `--session-logs`                  | Указывает файл для статистики сеанса валидатора.                                                                  | `{logname}.session-stats`                      | `--session-logs <file>`                        |
