import Feedback from '@site/src/components/Feedback';

# Compile TON on low-memory machines

:::caution
This section provides low-level instructions for working with TON.
:::

To compile TON on systems with limited memory (< 1 GiB), you need to create swap space (using a swap file).

## Symptoms

When compiling C++ components on Linux, you may encounter memory-related failures:

```text
fatal error: Killed signal terminated program cc1plus
compilation terminated.
```

## Solution

Follow these steps to create a 4 GiB swap file:

```bash
# Create swap directory
sudo mkdir -p /var/cache/swap/

# Allocate 4 GiB swap space (64 MiB blocks Ã— 64)
sudo dd if=/dev/zero of=/var/cache/swap/swap0 bs=64M count=64

# Set secure permissions
sudo chmod 0600 /var/cache/swap/swap0

# Initialize swap
sudo mkswap /var/cache/swap/swap0

# Activate swap
sudo swapon /var/cache/swap/swap0

# Verify activation
sudo swapon -s
```

### Swap management commands

**Remove swap file:**

```bash
sudo swapoff /var/cache/swap/swap0
sudo rm /var/cache/swap/swap0
```

**Free all swap space:**

```bash
sudo swapoff -a
free -m
```

### Make swap persistent (optional)

To enable the swap file on boot, add the following line to `/etc/fstab`:

```text
/var/cache/swap/swap0 none swap sw 0 0
```

After reboot, verify with:

```bash
sudo swapon --show
```

<Feedback />
