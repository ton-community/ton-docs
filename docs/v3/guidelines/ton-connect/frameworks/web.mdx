import Feedback from '@site/src/components/Feedback';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# TON Connect for JS

This guide will help you integrate TON Connect into your JavaScript app for user authentication and transactions.

If using React for your DApp, look at the [TON Connect UI React SDK](/v3/guidelines/ton-connect/frameworks/react).

## Implementation

### Installation

<Tabs groupId="Installation">
  <TabItem value="CDN" label="CDN">
    Add the script to the `<head>` element of your website:

    <br />

    ```html
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    ```
  </TabItem>

  <TabItem value="NPM" label="NPM">
    Install the [@tonconnect/ui](https://www.npmjs.com/package/@tonconnect/ui) package:

    ```bash npm2yarn
    npm i @tonconnect/ui
    ```
  </TabItem>
</Tabs>

### Set up TON Connect

After installing the package, create a `tonconnect-manifest.json` file for your app.
See the [manifest creation guide](/v3/guidelines/ton-connect/creating-manifest) for details.

Add a container element with the id `ton-connect` to host the connect button:

```html
<div id="ton-connect"></div>
```

_After this tag_, add a script for `tonConnectUI` in the `<body>` part of the app page:

```html
<script>
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://<YOUR_APP_URL>/tonconnect-manifest.json',
        buttonRootId: 'ton-connect'
    });
</script>
```

### Connect to the wallet

The element specified by `buttonRootId` renders the connect button and handles clicks automatically.

You can also open the connect modal programmatically; for example, from a custom buttonâ€™s click handler:

```html
<button onclick="openTonConnectModal()">Connect Wallet</button>

<script>
    async function connectToWallet() {
        // Open the connect modal programmatically
        await tonConnectUI.openModal();
    }

    // Call the function
    connectToWallet().catch(error => {
        console.error("Error connecting to wallet:", error);
    });
</script>
```

### Redirects

#### Customizing return strategy

To redirect the user to a specific URL after connection, you can [customize your return strategy](https://github.com/ton-connect/sdk/tree/main/packages/ui#add-the-return-strategy).

#### Telegram Mini Apps

To redirect the user to a [Telegram Mini App](/v3/guidelines/dapps/tma/overview) after wallet connection, use the `twaReturnUrl` option:

```js
tonConnectUI.uiOptions = {
  actionsConfiguration: {
    twaReturnUrl: 'https://t.me/YOUR_APP_NAME'
  }
};
```

[Read more in SDK documentation](https://github.com/ton-connect/sdk/tree/main/packages/ui#use-inside-twa-telegram-web-app)

### UI customization

TON Connect UI provides an interface that should be familiar and recognizable to the user when using various apps. However, the app developer can modify this interface to keep it consistent with the app's interface.

- [TON Connect UI documentation](https://github.com/ton-connect/sdk/tree/main/packages/ui#ui-customisation)

## SDK documentation

- [SDK documentation](https://github.com/ton-connect/sdk/blob/main/packages/ui/README.md)
- [Latest API documentation](https://ton-connect.github.io/sdk/modules/_tonconnect_ui.html)

## Usage

Let's look at an example of using the TON Connect UI in an app.

### Sending messages

Here's an example of sending a transaction using the TON Connect UI:

```js
import { TonConnectUI } from '@tonconnect/ui';

const tonConnectUI = new TonConnectUI({ //connect application
    manifestUrl: 'https://<YOUR_APP_URL>/tonconnect-manifest.json',
    buttonRootId: '<YOUR_CONNECT_BUTTON_ANCHOR_ID>'
});

const transaction = {
  validUntil: Math.floor(Date.now() / 1000) + 60, // 60 sec
  messages: [
        {
            address: "EQABa48hjKzg09hN_HjxOic7r8T1PleIy1dRd8NvZ3922MP0", // destination address
            amount: "20000000" //Toncoin in nanotons
        }
    ]
};

async function sendTransaction() {
  try {
    const result = await tonConnectUI.sendTransaction(transaction);
    console.log("Transaction sent:", result);
  } catch (error) {
    console.error("Transaction failed:", error);
  }
};

sendTransaction();
```

:::tip
Get more examples on the [Sending messages](/v3/guidelines/ton-connect/cookbook/ton-transfer) page.
:::

### Understanding transaction status by hash

Learn the principle explained in [payment processing](/v3/guidelines/dapps/asset-processing/payments-processing#check-contracts-transactions) using the Tonweb library.

### Signing and verification

Understand how to sign and verify messages using TON Connect:

- [Signing and verification](/v3/guidelines/ton-connect/verifying-signed-in-users)
- [TON Connect UI implementation on GitHub](https://github.com/ton-connect/sdk/tree/main/packages/ui#add-connect-request-parameters-ton_proof)

This feature is particularly useful for verifying ownership of off-chain assets such as Telegram usernames or virtual phone numbers on platforms like Fragment.

### Wallet disconnection

Disconnect the wallet:

```js
await tonConnectUI.disconnect();
```

## See also

- [UI customization](https://github.com/ton-connect/sdk/tree/main/packages/ui#ui-customisation)
- [\[YouTube\] TON Connect UI React \[RU\]](https://youtu.be/wIMbkJHv0Fs?list=PLyDBPwv9EPsCJ226xS5_dKmXXxWx1CKz_&t=1747)
- [\[YouTube\] Connect TON Connect UI to a site \[RU\]](https://www.youtube.com/watch?v=HUQ1DPfFxG4&list=PLyDBPwv9EPsAIWi8vgic9kiV3KF_wvIcz&index=4)

<Feedback />
